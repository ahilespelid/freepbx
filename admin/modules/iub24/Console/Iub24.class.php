<?php
 namespace FreePBX\Console\Command; use Informunity\Classes\clearCache; use Informunity\Classes\Config; use Informunity\Classes\Offline; use Informunity\Log; use Informunity\Rest\App\CheckRegistration; use Informunity\Rest\App\Recordings\ResendRecords; use Symfony\Component\Console\Command\Command; use Symfony\Component\Console\Input\InputArgument; use Symfony\Component\Console\Input\InputInterface; use Symfony\Component\Console\Input\InputOption; use Symfony\Component\Console\Output\OutputInterface; use Symfony\Component\Console\Style\SymfonyStyle; class Iub24 extends Command { protected function configure() { $this->setName("\151\x75\x62\62\64")->setAliases(array("\x69\x75"))->setDescription("\x4d\157\144\x75\x6c\145\x20\x68\x65\x6c\x70")->setDefinition(array(new InputArgument("\x61\x72\147\163", InputArgument::IS_ARRAY, null, null))); } protected function execute(InputInterface $input, OutputInterface $output) { goto mj3_7; E5evO: goto rez11; goto AaoZg; uxYZt: T12A9: goto E5evO; svm6m: \Informunity\Console\Custom::$command($config); goto rpwM9; wb8iN: $this->{$command}($io, $args, $iub24); goto PuMoE; XLGs5: if (class_exists("\134\111\156\146\157\162\x6d\165\x6e\151\164\171\x5c\103\157\156\x73\157\154\x65\134\103\x75\163\164\x6f\155") && method_exists("\x5c\111\x6e\x66\x6f\162\155\x75\156\151\164\171\134\103\x6f\x6e\163\x6f\154\x65\134\x43\165\163\164\x6f\x6d", $command)) { goto ywko0; } goto FjxxL; KtgJN: goto T12A9; goto qdR3i; dfeMD: if ($args[2]) { goto k6WhH; } goto Wi1h8; Aq9Z6: ywko0: goto svm6m; FjxxL: if (method_exists($this, $command)) { goto giNNd; } goto dfeMD; YShDF: $io = new SymfonyStyle($input, $output); goto STLay; p8pFw: $iub24->config["\141\x73\x74\x65\x72\151\163\x6b\x5f\x63\x61\x6c\154\x69\144"] = $args[1]; goto iu5sc; PuMoE: rez11: goto t4iEK; nHFKH: echo $this->QueryRest($command, $config, $args); goto uxYZt; DDLSh: $command = isset($args[0]) ? $args[0] : ''; goto YShDF; qdR3i: k6WhH: goto nHFKH; mj3_7: $args = $input->getArgument("\x61\162\147\163"); goto DDLSh; rpwM9: o2NRG: goto U7uAY; iu5sc: $config = $iub24->config; goto XLGs5; t4iEK: goto o2NRG; goto Aq9Z6; STLay: $iub24 = \FreePBX::create()->iub24; goto p8pFw; Wi1h8: $this->help($io); goto KtgJN; AaoZg: giNNd: goto wb8iN; U7uAY: } public function help($io) { goto XNuxH; t9EWX: $io->table(array("\117\160\164\x69\x6f\156", "\x44\145\x73\143\162\x69\160\x74\x69\x6f\x6e"), array(array("\x3c\151\x6e\x66\x6f\76" . _("\150\x65\x6c\160") . "\74\x2f\151\156\146\157\x3e", "\124\150\x69\x73\x20\x69\x6e\x66\157"), array("\x3c\x69\x6e\x66\157\76" . _("\x72\145\x66\162\145\x73\150\57\162") . "\74\x2f\151\x6e\146\157\x3e", "\x55\160\144\141\164\x65\x20\164\157\153\145\156\163"), array("\x3c\x69\156\x66\x6f\76" . _("\x73\x65\x6e\x64\x2f\x73") . "\74\57\151\156\146\x6f\76", "\x53\145\156\x64\40\161\165\x65\x75\145\144\40\162\x65\x63\x6f\x72\x64\163"), array("\x3c\x69\156\x66\157\76" . _("\x63\x6c\145\x61\x6e\57\143") . "\x3c\x2f\x69\156\x66\157\x3e", "\x43\154\x65\x61\156\x75\x70\40\162\x65\x67\x69\163\x74\x72\x61\x74\x69\x6f\x6e\40\164\157\x6b\x65\156\163"), array("\x3c\x69\156\146\x6f\x3e" . _("\x69\162") . "\74\57\x69\x6e\146\157\76", "\x45\x6e\141\142\154\145\x20\157\x72\x20\x64\151\163\x61\142\x6c\x65\40\151\156\x62\x6f\x75\156\x64\40\x72\x6f\x75\x74\x65\x20\165\163\141\x67\145\x20\164\145\163\164\56\40\123\141\155\145\40\x6c\x69\x6b\x65\40\x69\156\40\x6d\157\144\165\154\145\40\125\162\x6c\40\x26\x69\x72\x3d\x65\40\x26\x69\x72\x3d\x64\x20"), array("\74\151\x6e\x66\x6f\x3e" . _("\x63\157\156\146\x69\x67") . "\74\57\x69\156\x66\x6f\x3e", "\x47\145\x74\40\143\x75\163\x74\x6f\x6d\x20\x63\x6f\156\x66\x69\x67\x73"), array("\74\151\156\146\x6f\76" . _("\x74\145\x73\x74\144\160") . "\74\x2f\151\x6e\x66\x6f\x3e", "\x43\150\145\143\x6b\40\162\157\165\164\x65\40\146\157\162\x20\156\x75\x6d\142\x65\x72"))); goto fF0Dj; XNuxH: $io->title("\101\x76\141\x69\x6c\x61\142\x6c\x65\40\160\x61\162\x61\x6d\x73\72"); goto t9EWX; fF0Dj: $io->newLine(); goto Cp7gQ; Cp7gQ: } public function clean($io) { goto FPSUM; dcPDq: $q = $db->prepare($sql); goto Hog3h; Hog3h: $q->execute(); goto hn0AR; hn0AR: $io->text("\74\151\156\x66\x6f\76" . _("\122\x65\147\151\x73\164\162\x61\164\x69\x6f\x6e\40\144\x61\x74\141\x20\x69\163\40\x63\154\145\x61\x6e\x65\x64") . "\x3c\x2f\151\x6e\146\x6f\76"); goto aqOSr; FPSUM: $db = \FreePBX::Database(); goto ZruUv; ZruUv: $sql = "\125\x50\x44\101\124\x45\40\x69\165\x62\62\x34\x20\123\105\x54\x20\164\157\x6b\x65\x6e\75\x27\x27\x2c\x20\x72\145\146\x72\x65\x73\150\x5f\164\157\153\145\x6e\x3d\x27\47\54\40\x65\170\160\x69\162\145\163\x3d\47\x27\x2c\155\x65\x6d\142\145\162\137\151\144\x3d\47\47\40\x57\110\105\x52\105\x20\x69\x64\x3d\x30"; goto dcPDq; aqOSr: } public function c($io) { $this->clean($io); } public function ir($io, $data, $iub24) { goto l_ksT; ibIsh: return false; goto nPM1B; l_ksT: if (!isset($data[1])) { goto LqryW; } goto vi6Bb; qQg_B: LqryW: goto ibIsh; zK9_G: $io->text("\x44\x6f\156\145"); goto qQg_B; vi6Bb: $iub24->setDestinationsCheck($data[1]); goto zK9_G; nPM1B: } public function ur($io, $data, $iub24) { unset($io, $data); $iub24->ManageRegions(); } public function send($io, $data, $iub24) { unset($io, $data); ResendRecords::load($iub24->config)->Run(); } public function debug($io, $data, $iub24) { goto Sp9xi; OI6Cx: Fc1qm: goto oq0W1; ZXAUO: $file = $iub24->config["\x63\x6f\156\146\x5f\x64\151\x72"] . "\x64\145\x62\x75\147"; goto lA8EU; Qnl3H: $result = file_exists($file) ? "\x45\156\x61\142\154\x65\144" : "\104\x69\163\x61\x62\154\x65\x64"; goto VysW2; xWOWE: V08MR: goto zUV_S; q4lit: goto V08MR; goto OI6Cx; VysW2: return "\x44\x65\142\165\147\40" . $result; goto q4lit; oq0W1: switch (strtolower($data[1])) { case "\x6f\156": goto GqigO; GqigO: if (file_exists($file)) { goto IOJO0; } goto AzoKr; hdD2M: IOJO0: goto Ywc7l; Ywc7l: goto bbITU; goto lROzN; q3K7S: return "\x44\145\142\x75\x67\40\163\164\x61\162\164\145\144"; goto hdD2M; oecXP: chown($file, "\x61\163\x74\145\162\151\x73\153"); goto q3K7S; AzoKr: file_put_contents($file, "\43\x40\x53\164\141\x72\164"); goto oecXP; lROzN: case "\x6f\146\x66": goto GBQ9w; kp8uG: unlink($file); goto DaKSy; rla9y: goto bbITU; goto BuU19; GBQ9w: if (!file_exists($file)) { goto Yh60k; } goto kp8uG; DaKSy: return "\103\154\145\x61\156\x65\x64\40\141\x6e\144\40\x44\151\163\x61\142\154\145\144"; goto c1Qpg; c1Qpg: Yh60k: goto rla9y; BuU19: } goto oSoN9; lA8EU: if ($data[1]) { goto Fc1qm; } goto Qnl3H; Sp9xi: unset($io); goto ZXAUO; zUV_S: return false; goto shR_X; oSoN9: PojC1: goto GClhb; GClhb: bbITU: goto xWOWE; shR_X: } public function testdp($io, $data) { goto SSZ82; vJuYw: return false; goto b0FVx; YwltG: $result = $astman->send_request("\123\150\157\167\104\x69\141\x6c\120\x6c\x61\x6e", array("\x45\x78\164\145\156\x73\x69\x6f\156" => $data[2], "\103\157\x6e\x74\145\170\x74" => "\x66\x72\x6f\155\55\x69\156\x74\145\x72\156\141\154")); goto W5rHN; mw48u: $io->section("\125\x73\x61\x67\x65\40\x3a\x20\74\151\156\x66\x6f\x3e" . _("\x66\167\143\x6f\156\x73\157\154\x65\40\x69\x75\40\x74\145\163\164\x64\160\40\134\74\160\150\x6f\156\x65\40\156\x75\155\142\145\162\x3e") . "\74\57\x69\156\x66\157\x3e"); goto k7bjk; c0KxE: goto JWxzR; goto Ptaa1; SSZ82: if (!empty($data[2])) { goto fqtWs; } goto mw48u; nDnf7: global $astman; goto YwltG; Ptaa1: fqtWs: goto nDnf7; sM9ps: JWxzR: goto vJuYw; W5rHN: $io->table(array("\122\x65\x73\x70\157\x6e\143\x65", "\x4d\145\x73\163\x61\147\x65"), $this->setConfTable($result)); goto sM9ps; k7bjk: return "\105\170\x61\x6d\160\154\x65\72\x20\x66\x77\x63\157\x6e\163\157\154\x65\40\x69\x75\40\164\145\163\164\144\160\x20\x2b\61\70\60\60\x37\x37\x37\63\x33\62\x32"; goto c0KxE; b0FVx: } public function rc($io, $data) { goto dKEeu; dKEeu: if (!$data[2]) { goto qmKLy; } goto JeZNH; JeZNH: $db = \FreePBX::Database(); goto GviZl; V3FD6: $io->text("\x44\x6f\x6e\145"); goto SyD7X; N0_PY: $q->bindParam("\x3a\162\x6f\165\x74\145\x43\150\x65\143\153", $data[2], \PDO::PARAM_STR); goto tPl5w; cdsL_: $q = $db->prepare($sql); goto N0_PY; SyD7X: qmKLy: goto TIvE_; tPl5w: $q->execute(); goto V3FD6; GviZl: $sql = "\x55\120\x44\x41\x54\x45\40\x69\165\x62\62\x34\40\x53\105\124\40\x72\x6f\x75\x74\145\103\150\x65\x63\153\x3d\72\x72\157\x75\164\x65\x43\x68\145\143\x6b\x20\x57\x48\105\122\x45\40\151\x64\x3d\x30"; goto cdsL_; TIvE_: } public function token($io, $data) { goto Ji5LE; Ji5LE: if (!isset($data[2])) { goto ridM6; } goto c276k; c276k: $io->text(encrypt_decrypt($data[1], $data[2])); goto yD0g3; yD0g3: ridM6: goto Mp1j5; Mp1j5: } public function config($io, $data, $iub24) { goto GzLXA; uQ81c: $CustomConf = array(); goto iyjOj; X20lV: if (empty($CustomConf)) { goto OPOeT; } goto DGOap; cO6V2: XaltZ: goto G26CX; v57bS: K15Gu: goto mlPOI; RikLx: if (!(!empty($CustomConf) && $data[2] === "\x73\x61\166\145")) { goto ihXwr; } goto AoTuN; LaB5g: OPOeT: goto RikLx; msWCB: $io->section("\x43\x6f\156\x66\x69\147\x73\x20\141\x76\x61\x69\x6c\141\x62\x6c\145\40\146\x6f\x72\x20\143\x75\163\x74\x6f\x6d\x69\172\x61\164\151\x6f\x6e\40\x3a"); goto NjaIV; GzLXA: if (empty($data[1])) { goto byA3V; } goto uQ81c; DGOap: $io->table(array("\x4f\160\164\x69\157\156", "\120\x61\x72\141\x6d\145\x74\x72\x73"), Config::setConfTable($CustomConf)); goto v3_pJ; G26CX: m235u: goto X20lV; NjaIV: $io->table(array("\117\x70\164\x69\157\x6e", "\104\145\163\x63\162\151\160\x74\151\x6f\x6e"), array(array("\x3c\151\156\146\157\x3e" . _("\x53\x54\101\x54\x55\x53\137\103\x4f\x44\x45\x53") . "\x3c\x2f\151\156\146\x6f\76", "\x43\x61\x6c\x6c\x20\x46\x69\156\151\163\x68\x20\x73\x74\141\164\165\x73\40\x63\x6f\x64\145\163"), array("\x3c\151\x6e\146\157\x3e" . _("\163\x6f\x78") . "\74\x2f\151\156\x66\x6f\x3e", "\x53\x6f\170\x20\157\x70\164\151\x6f\156\x73\40\x66\157\162\x20\123\164\145\x72\145\x6f\x20\x6d\x6f\x64\x65"))); goto v57bS; iyjOj: switch ($data[1]) { case "\x53\124\101\x54\x55\123\x5f\103\117\104\105\123": $CustomConf = Config::LoadStatusArray($iub24->config); goto m235u; case "\163\x6f\x78": $CustomConf = Config::GetSoxConfig($iub24->config); goto m235u; default: goto m235u; } goto cO6V2; HuZoS: byA3V: goto msWCB; v3_pJ: $io->note("\x50\x61\x74\141\155\145\x74\x72\x73\40\x61\162\162\x61\x79\x20\x69\x6e\x74\x65\x72\160\162\x69\x74\141\164\x69\x6f\156\x20\x5b\42\157\x75\164\160\x75\164\42\54\42\151\156\x70\165\164\x2d\61\x22\54\x2e\56\x2e\54\42\x69\156\x70\x75\164\x2d\x6e\x22\135"); goto LaB5g; AoTuN: Config::saveConfigFile($iub24->config, $CustomConf, $data[1]); goto A99MK; A99MK: ihXwr: goto esSgn; esSgn: goto K15Gu; goto HuZoS; mlPOI: } public function QueryRest($command, $config, $data) { goto b3Z2E; krvmT: if (!(!class_exists($classname) && file_exists($config["\x63\x6f\156\146\x5f\x64\151\x72"] . "\122\x65\x73\164\x2f\x41\160\160\57\x43\x61\x6c\x6c\x2f" . $command . "\x2e\x70\x68\160"))) { goto IcpWQ; } goto rz8qH; IA4qX: IcpWQ: goto aSHPi; MVcbg: return false; goto MM2wl; rz8qH: require_once $config["\143\157\156\x66\137\x64\151\162"] . "\x52\145\163\x74\57\x41\160\x70\x2f\103\x61\x6c\x6c\x2f" . $command . "\56\x70\x68\x70"; goto IA4qX; aSHPi: if (!(class_exists($classname) && in_array("\x52\x75\156", get_class_methods($classname)))) { goto bqSHL; } goto mSHEx; mSHEx: return $classname::load($config, $data)->Run(); goto Wgyvi; b3Z2E: $classname = "\111\156\x66\157\x72\155\165\156\x69\164\x79\134\x52\x65\163\x74\x5c\101\x70\x70\134\103\141\154\154\134" . $command; goto krvmT; Wgyvi: bqSHL: goto MVcbg; MM2wl: } public function Finish($io, $data, $iub24) { goto KQLMi; q0kwV: return $this->QueryRest($data[0], $iub24->config, $data); goto dHWe5; KQLMi: unset($io); goto Wmndf; Wmndf: if (!$data[2]) { goto SPO6X; } goto q0kwV; B9R4O: return array(); goto z_1lx; dHWe5: SPO6X: goto B9R4O; z_1lx: } public function Handler($io, $data, $iub24) { goto A0b11; EXv5Q: global $astman; goto Zrfgz; COL4R: Ib7Y_: goto ZryUC; A0b11: uset($io, $iub24); goto KpX9C; URJWz: if (!$data["\x63\x68\x61\156\156\x65\154"]) { goto jgG3F; } goto SJoA9; KpX9C: if (!$data[2]) { goto Ib7Y_; } goto EXv5Q; Zrfgz: $data = array_combine(array("\x61\163\x74\x65\x72\151\x73\153\x5f\143\x61\154\x6c\151\144", "\143\x68\x61\x6e\x6e\x65\154"), explode("\x2c", $data[2])); goto URJWz; g6YQO: jgG3F: goto COL4R; SJoA9: $astman->SetVar($data["\143\x68\x61\x6e\x6e\x65\154"], "\103\x48\x41\116\x4e\x45\x4c\x28\x68\141\x6e\x67\165\160\137\150\x61\156\x64\x6c\145\162\x5f\160\x75\x73\150\x29", "\150\141\x6e\147\165\160\x2d\150\x61\156\144\x6c\x65\x72\x2d\x6f\x70\x65\x72\x61\164\157\162\x2c\163\x2c\x31"); goto g6YQO; ZryUC: } public function ClearCache($io, $data, $iub24) { clearCache::Load()->Run($iub24->config); } public function offlineCallsHandler($io, $data, $iub24) { goto LmrJ3; cDZaw: foreach ($calls as $call) { $OfflineCalls->ProcessCall($iub24->config, $call); ipmxV: } goto BND3w; PYkYv: if (is_array($calls)) { goto mMAAG; } goto bseNB; D3LkP: return; goto nPAj_; ETnlH: if (!empty($calls)) { goto c2b0J; } goto D3LkP; Syikx: i886q: goto PYkYv; wj8nR: return; goto lr1NW; omX0X: mMAAG: goto cDZaw; CVr2P: return; goto Syikx; UXELm: if ($OfflineCalls->CheckPID()) { goto zEa2H; } goto wj8nR; t3zmQ: $calls = $OfflineCalls->getCalls(2); goto ETnlH; bseNB: return; goto omX0X; BND3w: HjdSe: goto o2TZd; LmrJ3: $OfflineCalls = new Offline(); goto UXELm; eWicQ: if (CheckRegistration::load($iub24->config, array())->Run()) { goto i886q; } goto CVr2P; lr1NW: zEa2H: goto t3zmQ; nPAj_: c2b0J: goto eWicQ; o2TZd: } }
