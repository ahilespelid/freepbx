<?php
 namespace Informunity\Classes; use Informunity\Log; use Informunity\UI\Classes\Item; use Informunity\UI\Classes\Panel; class Dids { public static function load() { return CustomClassName::Load(__CLASS__); } public function get_dids() { goto P_Hpc; r1y79: return is_array($return) ? $return : array(); goto DWzsB; Lvd_y: $return = $db->getAll("\123\105\x4c\105\103\124\40\52\x20\106\122\117\x4d\x20\x61\163\x74\x65\x72\x69\x73\153\x2e\x69\x75\142\62\x34\137\144\151\x64\163", DB_FETCHMODE_ASSOC); goto r1y79; P_Hpc: global $db; goto Lvd_y; DWzsB: } public function getDidsList($config) { goto RCMJt; RjRUw: Njt8I: goto Sa31P; Sa31P: $Destinations = new Destinations($config); goto QTykG; VH3le: $InboundDestinations = new Panel(array()); goto ERVFX; umihl: RUksT: goto KBSSR; KBSSR: return $InboundDestinations; goto QSNc4; ERVFX: if (empty($dids)) { goto YMCse; } goto OI1Dn; bK69h: $InboundDestinations->addMsg(new Item(array("\x74\x65\x78\164" => $config["\160\x68\162\x61\163\145\163"]->getDictionary("\111\x44\145\163\164\76\155\163\x67\163\76\144\145\163\164\151\156\x61\164\151\157\x6e\x73\x5f\x6e\x6f\164\x5f\165\x73\145\x64"), "\x74\171\x70\x65" => "\167\141\x72\156\151\156\147"))); goto umihl; OI1Dn: $notConfigured = true; goto A3p3d; p2umh: $notConfigured = false; goto RjRUw; loxwS: if (!(isset($notConfigured) && $notConfigured)) { goto RUksT; } goto bK69h; A3p3d: if (!(isset($config["\143\150\x65\x63\153\104\120"]) && $config["\143\x68\145\143\153\104\120"] == 0)) { goto Njt8I; } goto p2umh; RCMJt: $dids = $this->get_dids(); goto VH3le; Dcw3y: YMCse: goto loxwS; CHZJ5: W4fpV: goto Dcw3y; QTykG: foreach ($dids as $did) { goto P9CIO; R7HD7: $Did->addMsg(new Item(array("\164\x65\170\x74" => $config["\160\x68\162\141\x73\x65\x73"]->getDictionary("\111\104\145\163\x74\76\155\x73\147\163\76\144\145\163\164\x5f\x6e\157\x74\137\x65\x78\x69\x73\164\x73"), "\164\171\160\145" => "\145\x72\x72\x6f\x72"))); goto iXgDu; StcWi: PBK1C: goto cehfz; ZCCLD: OOP2v: goto eAQoP; z3xbw: if (!(!empty($did["\x6d\141\156\x61\x67\x65\x72\137\x69\156\137\x63\x68\141\x72\x67\145"]) && !$Destinations->checkDestination($did["\x6d\x61\156\141\x67\145\162\x5f\151\156\x5f\x63\150\141\x72\x67\x65"]))) { goto h9gtA; } goto R7HD7; P9CIO: if (!(!empty($did) && is_array($did))) { goto OOP2v; } goto x3zKV; IJgMb: $Did->addMsg(new Item(array("\164\145\x78\164" => $config["\160\150\x72\x61\x73\x65\163"]->getDictionary("\111\x44\x65\x73\164\x3e\155\163\x67\x73\76\x64\145\163\164\137\x6e\x6f\164\137\x75\x73\145\144"), "\x74\171\160\145" => "\x77\141\162\156\x69\156\x67"))); goto WJRoz; WJRoz: dj1jm: goto sYnRA; qOlRp: KSRgz: goto ZCCLD; CwbXh: $InboundDestinations->addItem($Did); goto z3xbw; eAQoP: $used = $Destinations->returnUsage("\151\165\142\62\64\x5f\144\151\x64\163\54" . $did["\151\144"] . "\x2c\x31"); goto GPPNU; sYnRA: opcfE: goto okfYI; iXgDu: h9gtA: goto StcWi; X2IPY: if (!$inRoute) { goto gLK7v; } goto GYM2f; GPPNU: $inRoute = $Destinations->checkInRoute("\x69\x75\x62\62\x34\137\144\x69\144\x73\x2c" . $did["\x69\x64"] . "\x2c\x31"); goto X2IPY; okfYI: if ($Destinations->checkDestination($did["\x64\x65\x73\164\x69\x6e\141\164\x69\x6f\x6e"])) { goto i2GFm; } goto VEyJ1; souXn: i2GFm: goto CwbXh; GcoXj: $Did = Item::Set(array_merge($did, array("\151\156\122\x6f\165\x74\x65" => $inRoute, "\x69\166\162" => json_decode($did["\x69\166\x72"]), "\165\163\x65\144" => isset($used["\x75\x72\154"]) ? $used["\165\x72\x6c"] : '', "\141\163\163\145\163\x73\155\x65\156\164" => array("\x61\163\x73\x65\163\163\155\145\x6e\x74" => $did["\x61\163\163\x65\163\x73\x6d\x65\156\x74"], "\x67\162\145\141\164\151\156\x67\163" => $did["\x67\x72\x65\141\x74\x69\x6e\x67\163"], "\142\x79\145" => $did["\x62\x79\x65"]), "\x64\x65\x73\x74\151\156\x61\x74\x69\157\156\125\122\114" => $Destinations->getURL($did["\x64\x65\x73\164\x69\156\141\164\151\157\156"]), "\x6d\x61\156\x61\147\x65\x72\137\151\156\x5f\x63\150\141\x72\147\145" => array("\x64\145\x73\164\151\x6e\141\164\x69\x6f\156" => $did["\155\141\156\x61\147\145\162\x5f\x69\156\137\143\x68\141\162\x67\x65"], "\164\x69\155\145\x6f\165\x74" => $did["\141\163\163\x69\147\156\x65\144\x5f\x6d\x61\156\x61\147\145\x72\x5f\162\x69\x6e\147\137\x74\151\155\145\162"]), "\x64\145\x73\164\x69\156\141\164\151\157\x6e" => array("\x64\x65\163\x74\x69\156\x61\x74\x69\x6f\x6e" => $did["\144\145\x73\164\151\x6e\x61\x74\x69\157\156"])))); goto nX_4i; VEyJ1: $Did->addMsg(new Item(array("\x74\145\170\x74" => $config["\160\x68\162\x61\163\145\163"]->getDictionary("\111\104\x65\x73\164\76\155\x73\x67\163\x3e\x64\x65\x73\x74\137\156\157\164\x5f\x63\x6f\156\x66\151\147\x75\162\x65\144"), "\164\171\160\x65" => "\x65\x72\x72\157\162"))); goto souXn; nX_4i: if (!empty($used["\165\x72\154"])) { goto opcfE; } goto jvgq_; ExRu2: gLK7v: goto GcoXj; GYM2f: $notConfigured = false; goto ExRu2; x3zKV: foreach ($did as $item => &$value) { IUDB::setValueType("\x69\165\x62\x32\x34\137\x64\151\x64\163", $item, $value); zIvZB: } goto qOlRp; jvgq_: if (!(isset($config["\x63\x68\145\x63\x6b\104\120"]) && $config["\x63\150\145\143\x6b\104\120"] == 1)) { goto dj1jm; } goto IJgMb; cehfz: } goto CHZJ5; QSNc4: } protected function getIVR($string) { $result = json_decode($string); return json_last_error() === JSON_ERROR_NONE ? $result : ''; } public function getDidByIDApp($data) { goto wVPkV; CywBc: $q = $db->prepare($sql); goto COT9a; DSsLk: $status["\162\145\163\165\x6c\x74"] = $q->fetch(); goto SNIs6; SNIs6: return is_array($status) ? $status["\x72\x65\x73\x75\154\x74"] : array(); goto ZOKbO; PN1nM: $sql = "\123\105\114\105\103\x54\x20\52\40\106\x52\117\x4d\x20\151\x75\x62\x32\64\137\144\x69\144\163\x20\x57\x48\105\122\x45\40\x69\x64\75\x27" . $data["\x69\144"] . "\47"; goto CywBc; COT9a: $q->execute(); goto DSsLk; wVPkV: $db = \FreePBX::Database(); goto PN1nM; ZOKbO: } public function removeDid($config, $data) { goto wJYHs; f9YX1: $sql = "\x44\105\114\x45\124\105\x20\106\x52\x4f\x4d\x20\151\165\x62\62\x34\137\x64\x69\x64\163\40\x57\x48\x45\122\x45\40\x69\144\40\x3d\40\72\x64\x69\x64\x69\144"; goto WoeDU; Y2YJL: return $this->updatePanel(); goto KabXK; WoeDU: $q = $db->prepare($sql); goto pIcAi; R_4li: $db = \FreePBX::Database(); goto f9YX1; L_q05: needreload(); goto Y2YJL; lwn90: LnfQm: goto RZXi6; KabXK: NmZUp: goto lwn90; VOhLB: if (!isset($params["\x69\144"])) { goto LnfQm; } goto R_4li; GCf5z: if (!$q->execute()) { goto NmZUp; } goto L_q05; pIcAi: $q->bindParam("\72\144\151\x64\x69\x64", $params["\151\x64"], \PDO::PARAM_STR); goto GCf5z; P40K2: $params = $data["\x69\164\x65\x6d\x73"]; goto VOhLB; wJYHs: unset($config); goto P40K2; RZXi6: } public function updateDid($config, $data) { goto qQZFI; ey8oF: unset($params["\141\163\163\x65\163\x73\x6d\x65\156\x74"]); goto rK2nF; SUTsF: $params["\x64\x65\x73\164\x69\x6e\141\164\x69\x6f\x6e"] = array("\144\x65\163\164\x69\156\141\x74\x69\157\x6e" => $params["\x64\x65\163\164\151\156\x61\164\x69\157\156"]["\144\145\163\x74\x69\x6e\141\x74\151\157\x6e"]); goto DhL3C; Nrvmp: if (!IUDB::Insert("\151\x75\142\62\x34\x5f\144\x69\144\163", $params)) { goto nBbFV; } goto RzhQW; zQ51Q: return $this->updatePanel(); goto rtMGP; W3C0L: $params = $data["\x69\164\x65\x6d\163"]; goto dL8x7; rK2nF: foreach ($p as $el => $val) { $params[$el] = $val; AicHM: } goto KxFHS; RzhQW: needreload(); goto zQ51Q; KxFHS: qMRLw: goto hOHJm; DWFja: $p = $params["\141\x73\163\x65\x73\163\155\145\156\x74"]; goto ey8oF; dL8x7: if (!(!empty($params["\x61\163\163\x65\163\x73\x6d\145\156\x74"]) && is_array($params["\141\x73\163\145\163\x73\155\145\156\164"]))) { goto RuMf5; } goto DWFja; rtMGP: nBbFV: goto jA271; hOHJm: RuMf5: goto iZMtC; qQZFI: unset($config); goto W3C0L; iZMtC: if (empty($params["\x64\145\163\x74\x69\156\141\x74\x69\157\x6e"])) { goto ZLL0I; } goto SUTsF; DhL3C: ZLL0I: goto Nrvmp; jA271: } protected function updatePanel() { return array("\155\145\163\163\x61\x67\x65" => array("\141\143\x74\151\x6f\x6e\163" => array("\147\145\x74\x50\141\x6e\145\x6c\x49\164\145\x6d\x73", "\124\x6f\x67\x67\154\x65\x41\160\x70\x6c\171"), "\x6f\x70\x74\x69\157\156\x73" => array("\147\145\164\x50\141\x6e\x65\154\x49\164\145\x6d\163" => "\111\x44\x65\x73\164"))); } }
