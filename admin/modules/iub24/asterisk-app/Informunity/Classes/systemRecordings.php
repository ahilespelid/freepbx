<?php
 namespace Informunity\Classes; class systemRecordings { public $recordings = array("\x49\x55\62\64\x20\x69\156\151\x74\151\x61\154\x20\x6d\145\163\x73\x61\x67\145" => array("\x64\x69\163\x70\154\x61\x79\x6e\141\155\145" => "\x49\x55\x32\64\40\151\x6e\x69\164\x69\x61\x6c\40\155\145\163\x73\141\x67\145", "\144\x65\163\x63\x72\x69\160\x74\x69\157\156" => "\x52\x65\143\x6f\162\x64\40\164\157\40\142\x65\40\160\154\141\171\145\144\40\x6f\156\x20\145\156\164\x72\x79\40\164\x6f\x20\x74\150\x65\40\x61\x73\163\x65\163\163\x6d\x65\156\x74\56", "\x66\151\x6c\145\156\x61\155\145" => "\143\x75\163\x74\157\x6d\57\101\x73\x73\145\163\x73\155\x65\x6e\x74\137\111\x6e\151\164\151\x61\154"), "\111\x55\x32\x34\40\x66\151\x6e\x61\x6c\x20\x6d\145\x73\x73\141\147\145" => array("\x64\151\x73\x70\154\141\x79\x6e\x61\x6d\x65" => "\111\125\62\x34\40\146\x69\156\141\x6c\x20\155\145\x73\x73\141\147\145", "\x64\x65\x73\x63\x72\151\x70\164\151\157\156" => "\122\145\143\157\x72\144\x20\164\x6f\40\x62\x65\40\160\x6c\x61\x79\x65\144\x20\x6f\156\x20\x65\156\x64\40\157\146\40\x74\x68\145\40\141\x73\x73\x65\x73\163\155\145\156\x74\56", "\x66\151\154\145\x6e\x61\155\x65" => "\143\x75\163\164\157\x6d\57\x41\x73\x73\145\163\x73\x6d\x65\156\x74\x5f\106\x69\x6e\x61\x6c")); private $language = array("\145\x6e", "\162\165"); private $config; public function __construct($config) { $this->config = $config; } public static function load($config) { return new systemRecordings($config); } private function link_recordings($record) { goto s51qJ; jCU7o: rQJX0: goto Ws1eV; oJNVD: $fname = pathinfo($record["\x66\x69\154\x65\156\141\155\145"], PATHINFO_FILENAME); goto bsF4m; tOPyS: global $amp_conf; goto oJNVD; SxqL_: IUDB::Insert("\x72\145\143\x6f\162\x64\151\156\x67\x73", $record); goto gxbsH; gxbsH: X4k8P: goto Ig0la; bsF4m: if (empty($this->language)) { goto qcghe; } goto vLy0R; Ig0la: qcghe: goto cGe7v; vLy0R: foreach ($this->language as $language) { goto yiX_i; x6k60: $lang_dest_path = "\x2f\166\x61\x72\57\x6c\151\x62\x2f\141\163\164\x65\x72\151\x73\153\x2f\x73\157\165\x6e\x64\x73\57" . $language . "\x2f"; goto gzyth; lWpB4: wHyJP: goto QA2H_; TVRkK: $link_path = $dir_dest_path . $fname . "\x2e\x77\141\166"; goto wTCRi; wTCRi: if (!file_exists($file_loc_path)) { goto vKp6N; } goto Whcs2; D1I_F: mkdir($lang_dest_path); goto lWpB4; MTLUr: mkdir($dir_dest_path); goto oB_Hy; Whcs2: try { unlink($link_path); } catch (\Exception $e) { unset($e); } goto yKaXl; zxNpj: LDiol: goto bGI3I; oB_Hy: H75Iu: goto TVRkK; gUsIi: vKp6N: goto zxNpj; gzyth: $dir_dest_path = "\57\166\141\x72\57\x6c\x69\x62\x2f\x61\x73\164\x65\162\x69\x73\x6b\x2f\163\x6f\165\156\x64\163\x2f" . $language . "\x2f\143\165\x73\x74\x6f\x6d\x2f"; goto M5UWe; M5UWe: if (!(!file_exists($lang_dest_path) && !is_dir($lang_dest_path))) { goto wHyJP; } goto D1I_F; yKaXl: try { symlink($file_loc_path, $link_path); $linked = true; } catch (\Exception $e) { unset($e); } goto gUsIi; yiX_i: $file_loc_path = $amp_conf["\101\x4d\x50\127\105\x42\x52\117\117\124"] . "\57\x61\x64\155\151\156\x2f\x6d\157\x64\165\154\145\163\x2f" . $this->config["\155\x6f\x64\165\154\x65\x4e\x61\x6d\145"] . "\x2f\x52\x65\x63\157\x72\144\151\x6e\147\163\57" . $language . "\x2f" . $fname . "\56\x77\141\x76"; goto x6k60; QA2H_: if (!(!file_exists($dir_dest_path) && !is_dir($dir_dest_path))) { goto H75Iu; } goto MTLUr; bGI3I: } goto jCU7o; s51qJ: $linked = false; goto tOPyS; Ws1eV: if (!$linked) { goto X4k8P; } goto SxqL_; cGe7v: } private function getCurrent() { goto Dcm5B; ZmSYV: ZZNSu: goto uqlEw; LF9G3: $q = $db->prepare("\x53\x45\x4c\105\103\x54\x20\x60\x64\x69\163\160\154\x61\171\156\141\155\x65\140\x20\x46\122\x4f\x4d\40\x60\x72\x65\x63\x6f\162\x64\151\156\147\x73\140\40\x57\x48\x45\x52\x45\x20\x60\144\151\x73\x70\x6c\141\171\156\141\x6d\145\x60\x20\111\x4e\40\50\x27" . implode("\x27\54\x27", array_keys($this->recordings)) . "\47\51"); goto KblXM; QAwB3: if (empty($result)) { goto ZZNSu; } goto U1Sh5; U1Sh5: foreach ($result as $item) { unset($records[$item["\144\151\163\160\x6c\141\171\x6e\141\x6d\x65"]]); ie_Zj: } goto LkhN8; LkhN8: BBnvC: goto ZmSYV; n27BA: $records = $this->recordings; goto LF9G3; qZRPc: $result = $q->fetchAll(\PDO::FETCH_ASSOC); goto QAwB3; KblXM: if (!$q->execute()) { goto eDpFT; } goto qZRPc; m0Nr9: return array(); goto gLQdW; u2NL_: eDpFT: goto m0Nr9; Dcm5B: $db = \FreePBX::Database(); goto n27BA; uqlEw: return $records; goto u2NL_; gLQdW: } public function Link() { goto ezDH8; n9uRN: yzKLZ: goto KEzHf; rXkmc: if (!(!empty($exist) && is_array($exist))) { goto yzKLZ; } goto kk1Sk; kk1Sk: array_map(array($this, "\154\x69\156\153\137\x72\x65\x63\x6f\162\x64\151\x6e\147\x73"), $exist); goto n9uRN; ezDH8: $exist = $this->getCurrent(); goto rXkmc; KEzHf: } }
