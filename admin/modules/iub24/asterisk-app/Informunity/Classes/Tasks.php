<?php
 namespace Informunity\Classes; use Informunity\UI\Classes\Item; use Informunity\UI\Classes\Panel; class Tasks { public static function load() { return CustomClassName::Load(__CLASS__); } protected function get() { goto wHCwR; Kym5m: $sql = "\123\x45\114\105\103\124\x20\52\40\106\x52\117\115\40\x69\x75\142\62\x34\137\x74\141\163\153\163"; goto M0tSA; wHCwR: $db = \FreePBX::Database(); goto Kym5m; M0tSA: $q = $db->prepare($sql); goto s62qP; YK9fg: $result = $q->fetchAll(\PDO::FETCH_ASSOC); goto ZV16h; s62qP: $q->execute(); goto YK9fg; ZV16h: return !empty($result) && is_array($result) ? $result : array(); goto w2dxL; w2dxL: } public function getTasksList() { return array_map(function ($task) { return array("\151\144" => intval($task["\x69\x64"]), "\156\141\x6d\145" => $task["\x6e\141\x6d\145"], "\144\x65\x61\144\154\x69\x6e\145" => $task["\x64\x65\x61\144\154\151\x6e\x65"], "\144\x65\x61\x64\x6c\x69\x6e\145\137\x64\x61\171" => $task["\144\145\141\x64\154\x69\156\145\137\144\141\x79"], "\x61\x63\143\x6f\x6d\160\x6c\x69\x63\x65\x73" => json_decode($task["\x61\x63\x63\x6f\x6d\x70\x6c\x69\x63\145\x73"]), "\x6f\142\x73\145\x72\166\x65\x72\x73" => json_decode($task["\157\x62\163\x65\162\x76\145\162\163"])); }, $this->get()); } public function getTasks() { goto U_xPk; U_xPk: $tasks = $this->get(); goto FuJ3C; Mesc9: bXwFu: goto qll9r; FuJ3C: $Tasks = new Panel(array()); goto mUS5a; mUS5a: if (!(!empty($tasks) && is_array($tasks))) { goto btYQe; } goto pXCHD; pXCHD: foreach ($tasks as $task) { $Tasks->addItem(new Item(array("\151\x64" => intval($task["\151\144"]), "\156\141\x6d\x65" => $task["\156\141\x6d\145"], "\144\145\141\144\154\x69\156\x65" => $task["\144\145\x61\144\x6c\151\156\x65"], "\x64\145\141\144\154\151\x6e\x65\x5f\x64\x61\171" => $task["\x64\x65\141\x64\154\151\156\145\x5f\x64\141\171"], "\x61\x63\143\x6f\155\x70\154\151\x63\145\163" => json_decode($task["\x61\143\x63\x6f\x6d\160\x6c\x69\143\145\x73"]), "\x6f\x62\163\145\x72\x76\x65\x72\163" => json_decode($task["\157\x62\x73\x65\162\x76\145\162\163"])))); McJSd: } goto Mesc9; qll9r: btYQe: goto mNyox; mNyox: return $Tasks; goto D7TUy; D7TUy: } public function getTaskByID($id) { goto tNNbS; dcUtq: $sql = "\123\x45\114\x45\x43\x54\40\x2a\40\x46\122\117\115\40\x69\165\x62\x32\x34\x5f\164\141\x73\153\163\x20\127\110\x45\122\x45\40\151\144\40\75\x20\x3a\164\141\163\153\x49\104"; goto nlNFH; FlfJc: $q->execute(); goto LMrVk; LWdmK: $db = \FreePBX::Database(); goto dcUtq; tNNbS: if (empty($id)) { goto cNdMr; } goto LWdmK; nlNFH: $q = $db->prepare($sql); goto LjAgM; I_M80: cNdMr: goto QVabp; LMrVk: $result = $q->fetchall(\PDO::FETCH_ASSOC); goto I_M80; QVabp: return empty($result) ? '' : $result[0]; goto HfAXr; LjAgM: $q->bindParam("\72\164\141\x73\153\111\x44", $id, \PDO::PARAM_STR); goto FlfJc; HfAXr: } public function removeTask($data) { goto Wr8ql; tyXUY: if (!$q->execute()) { goto Ck2oY; } goto eN_WW; SQjm4: NIznf: goto EFuQL; Wr8ql: $params = $data["\151\164\145\x6d\x73"]; goto sRfrX; JCPoa: $db = \FreePBX::Database(); goto BOYQg; vu2Ma: return $this->updatePanel(); goto cOP2d; cBHoA: if (!isset($id)) { goto NIznf; } goto JCPoa; BOYQg: $sql = "\104\105\x4c\x45\124\105\40\x46\122\117\x4d\40\x69\x75\142\62\x34\137\x74\x61\x73\x6b\x73\40\x57\x48\x45\122\x45\40\x69\144\x20\75\40\72\x74\141\x73\153\x49\104"; goto xG332; sRfrX: $id = $params["\151\x64"]; goto cBHoA; cOP2d: Ck2oY: goto SQjm4; xG332: $q = $db->prepare($sql); goto DuRZP; DuRZP: $q->bindParam("\x3a\164\141\x73\153\x49\104", $id, \PDO::PARAM_STR); goto tyXUY; eN_WW: needreload(); goto vu2Ma; EFuQL: } public function updateTask($data) { goto gkcHo; FoY_V: $params["\141\x63\x63\x6f\155\160\x6c\x69\x63\x65\163"] = json_encode($params["\x61\143\143\x6f\155\x70\154\x69\143\x65\x73"]); goto yEBHt; gkcHo: $params = $data["\x69\164\145\155\163"]; goto NBeHw; yEBHt: AZbGX: goto y4dTI; PGzwT: return $this->updatePanel(); goto EsbGF; EsbGF: NPgsd: goto JufFU; NBeHw: if (!(isset($params["\x6f\142\163\x65\162\166\145\x72\163"]) && gettype($params["\157\142\x73\x65\x72\x76\x65\162\x73"]) === "\x61\162\x72\141\x79")) { goto gmKLm; } goto G3Izv; P7zYq: if (!(isset($params["\141\143\143\x6f\155\x70\154\151\143\145\163"]) && gettype($params["\141\x63\143\157\x6d\160\x6c\x69\x63\145\163"]) === "\141\162\x72\x61\x79")) { goto AZbGX; } goto FoY_V; G3Izv: $params["\x6f\142\163\x65\x72\166\x65\x72\163"] = json_encode($params["\x6f\x62\163\x65\162\166\145\162\x73"]); goto iz2Ny; iz2Ny: gmKLm: goto P7zYq; x4hpn: needreload(); goto PGzwT; y4dTI: if (!IUDB::Insert("\x69\x75\142\62\x34\137\164\141\163\153\163", $params)) { goto NPgsd; } goto x4hpn; JufFU: } protected function updatePanel() { return array("\155\x65\x73\x73\141\147\145" => array("\141\143\x74\x69\x6f\x6e\x73" => array("\147\145\x74\120\141\x6e\x65\154\x49\x74\x65\155\x73", "\124\x6f\x67\147\154\x65\101\x70\x70\x6c\x79", "\x67\x65\x74\x53\x65\154\145\x63\x74\x6f\162\163"), "\157\x70\x74\x69\157\156\x73" => array("\x67\145\164\120\141\156\145\x6c\x49\x74\x65\155\x73" => "\x74\x61\x73\x6b\x73", "\x67\x65\x74\x53\x65\154\145\x63\x74\x6f\x72\163" => array("\164\141\163\x6b\163")))); } }
