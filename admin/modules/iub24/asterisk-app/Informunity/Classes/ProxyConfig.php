<?php
 namespace Informunity\Classes; use Informunity\Log; class ProxyConfig { protected $appConfigPath; protected $freepbxConfigPath; public function __construct() { $this->appConfigPath = realpath(__DIR__ . "\x2f\x2e\x2e\x2f\x62\x69\x6e\x2f\x63\157\x6e\146\151\x67") . "\57\x61\160\160\103\157\x6e\x66\151\x67\x2e\x6a\x73\157\156"; $this->freepbxConfigPath = realpath(__DIR__ . "\57\56\56\57\x62\x69\156\x2f\x63\x6f\x6e\146\151\x67") . "\x2f\x66\162\x65\x65\x70\x62\170\56\x6a\163\x6f\x6e"; } public static function load() { return CustomClassName::Load(__CLASS__); } public function updateConfig($params) { goto Xy0wu; no7rT: foreach ($params as $param => $value) { goto FDwRh; CjfOI: BxZRa: goto EmeK6; fcMF8: yH17d: goto CjfOI; QthtC: GgDNJ: goto fcMF8; FDwRh: switch ($param) { case "\x63\x75\x72\x6c\137\160\x72\157\170\171": goto saJdd; QZjS7: goto yH17d; goto d3fp6; QG0aW: $curlProxyConfig = parse_url($value); goto mdX1d; mdX1d: $appConfig["\x6c\x69\x73\x74\x65\156\145\x72"]["\160\x6f\x72\x74"] = $curlProxyConfig["\x70\157\x72\x74"]; goto W4tL0; W4tL0: $this->setAppConfig($appConfig); goto QZjS7; saJdd: $appConfig = $this->getAppConfig(); goto QG0aW; d3fp6: case "\x62\x69\156": case "\160\162\x6f\x62\145": goto QLrs6; QLrs6: $appConfig = $this->getAppConfig(); goto LwyP6; LwyP6: $appConfig["\146\x66\155\160\x65\x67"][$param] = $value; goto M2Umd; zL1cZ: goto yH17d; goto KpzXM; M2Umd: $this->setAppConfig($appConfig); goto zL1cZ; KpzXM: case "\143\x75\163\164\x6f\x6d\104\x69\x72": case "\x6c\x6f\x67\x44\151\162": case "\x6d\x6f\x64\x75\x6c\x65\103\157\x6e\x66\x69\147\x55\x52\114": case "\x63\141\143\150\145\124\x69\155\145": goto eR11Q; pYi2_: goto yH17d; goto Q5kFn; eR11Q: $appConfig = $this->getAppConfig(); goto yKyzF; yKyzF: $appConfig[$param] = $value; goto Cn6lz; Cn6lz: $this->setAppConfig($appConfig); goto pYi2_; Q5kFn: case "\x64\151\163\141\142\x6c\x65\x4c\157\147": goto l5t07; lbOgA: $appConfig[$param] = (bool) $value; goto eGiYP; l5t07: $appConfig = $this->getAppConfig(); goto lbOgA; eGiYP: $this->setAppConfig($appConfig); goto V7wRx; V7wRx: goto yH17d; goto rCJAI; rCJAI: case "\143\165\x72\x6c": case "\x68\141\x6e\144\x6c\145\162\115\x61\x6e\x61\147\145\162": goto USqXr; USqXr: $appConfig = $this->getAppConfig(); goto Pgihm; MSHHi: $this->setAppConfig($appConfig); goto H1jDa; H1jDa: goto yH17d; goto GeWiA; Pgihm: $appConfig["\154\x6f\147\114\x65\x76\145\154"][$param] = $value; goto MSHHi; GeWiA: case "\150\x6f\163\x74": goto BKQzy; bBRUN: $val = parse_url($value); goto WsGRn; BKQzy: $PBXConfig = $this->getFreePBXConfig(); goto bBRUN; F6anV: ywYUe: goto cfUzN; zxNdA: $PBXConfig["\150\x6f\163\164"] = $val["\150\x6f\x73\164"]; goto cHXEK; K0W7T: u77EI: goto F6anV; WsGRn: if (empty($val["\163\143\150\x65\x6d\145"])) { goto b2VdE; } goto OdEip; cfIn5: $PBXConfig["\150\157\163\x74"] = $value; goto BeSOO; BeSOO: if (empty($PBXConfig["\x73\143\150\x65\x6d\x65"])) { goto u77EI; } goto kLiJT; OdEip: $PBXConfig["\163\143\150\x65\x6d\x65"] = $val["\x73\x63\x68\145\155\x65"]; goto zxNdA; kLiJT: unset($PBXConfig["\163\x63\150\x65\155\x65"]); goto K0W7T; pLe5T: goto yH17d; goto OoeAn; cfUzN: $this->setFreePBXConfig($PBXConfig); goto pLe5T; KUNmb: b2VdE: goto cfIn5; cHXEK: goto ywYUe; goto KUNmb; OoeAn: case "\x70\x6f\x72\164": case "\162\x65\x63\157\x72\144\163\120\141\164\x68": goto v1iQz; tjkKX: goto yH17d; goto g_K90; BPRja: $this->setFreePBXConfig($PBXConfig); goto tjkKX; v1iQz: $PBXConfig = $this->getFreePBXConfig(); goto yTae5; yTae5: $PBXConfig[$param] = $value; goto BPRja; g_K90: } goto QthtC; EmeK6: } goto BZvN6; KJX7h: return array("\155\145\163\163\141\147\x65" => array("\x61\x63\164\x69\x6f\156\x73" => array("\124\157\147\x67\x6c\x65\101\160\160\x6c\x79"))); goto LZoCI; LZoCI: p1kUD: goto OU2LQ; Xy0wu: if (!(!empty($params) && is_array($params))) { goto p1kUD; } goto no7rT; OU2LQ: return false; goto gcPe8; BZvN6: rOiyr: goto KJX7h; gcPe8: } public function getFreePBXConfig() { goto C209c; jQB3q: try { $getConfig = json_decode(file_get_contents($this->freepbxConfigPath), true); } catch (\Exception $e) { unset($e); $getConfig = $defaults; } goto cgvAG; C209c: $defaults = $this->freePBXConfigDefaults(); goto jQB3q; cgvAG: return $getConfig; goto fibWX; fibWX: } public function setFreePBXConfig($config) { try { file_put_contents($this->freepbxConfigPath, str_replace("\x5c\x2f", "\x2f", json_encode($config))); } catch (\Exception $e) { unset($e); } } public function getAppConfig() { goto Pi7N6; Zq9B3: try { $getConfig = json_decode(file_get_contents($this->appConfigPath), true); } catch (\Exception $e) { unset($e); $getConfig = $defaults; } goto DmP4I; DmP4I: return $getConfig; goto hf4oo; Pi7N6: $defaults = $this->appConfigDefaults(); goto Zq9B3; hf4oo: } public function setAppConfig($config) { try { file_put_contents($this->appConfigPath, str_replace("\x5c\57", "\x2f", json_encode($config))); } catch (\Exception $e) { unset($e); } } protected function appConfigDefaults() { return array("\154\151\x73\x74\x65\x6e\x65\162" => array("\x68\157\163\x74" => "\x30\x2e\x30\56\x30\x2e\60", "\160\x6f\x72\164" => ''), "\x63\x61\x63\x68\145\x54\151\155\x65" => 600000, "\x63\165\x73\x74\157\x6d\104\x69\x72" => false, "\154\x6f\x67\x44\151\162" => "\x2f\166\141\162\57\154\x6f\x67\57\141\x73\x74\145\x72\x69\163\x6b"); } protected function freePBXConfigDefaults() { return array("\150\157\163\164" => '', "\x70\157\162\164" => '', "\x6d\x6f\x64\165\154\x65\x43\x6f\x6e\146\151\x67\125\x52\x4c" => "\57\x61\144\155\x69\156\57\x61\152\141\170\x2e\x70\150\160\77\x6d\x6f\144\165\154\145\x3d\x69\165\x62\62\64\46\x63\x6f\155\x6d\x61\x6e\144\75\156\x6f\x64\x65\x43\157\156\x66\x69\147", "\162\x65\x63\x6f\x72\144\x73\120\141\x74\150" => "\57\166\x61\x72\57\163\160\x6f\157\154\x2f\141\x73\x74\x65\162\x69\163\x6b\57\155\157\x6e\x69\164\x6f\162"); } }
