<?php
 namespace Informunity\Rest; use Informunity\Classes\CustomClassName; use Informunity\Classes\ProxyConfig; use Informunity\Log; class RestProxy { protected $proxy; protected $curl; public static function load() { return CustomClassName::Load(__CLASS__); } public function query($config) { goto KCNrZ; SgEpL: try { $pbxConfig = $proxyConfig->getFreePBXConfig(); } catch (\Exception $e) { unset($e); } goto JtN2Y; xss4l: if (!isset($appConfig)) { goto mcz0p; } goto fNjZI; Ssn1x: xXrs3: goto xss4l; D8eeX: mcz0p: goto qzTRQ; fNjZI: $this->exec(array("\164\171\x70\x65" => "\141\x70\160", "\x63\x6f\156\146\x69\x67" => $appConfig)); goto D8eeX; mH9oi: $proxyConfig = ProxyConfig::load(); goto SgEpL; JtN2Y: try { $appConfig = $proxyConfig->getAppConfig(); } catch (\Exception $e) { unset($e); } goto PuOKY; PuOKY: if (!isset($pbxConfig)) { goto xXrs3; } goto QgncH; KCNrZ: $this->proxy = $config["\x63\x75\162\x6c\x5f\160\x72\157\x78\171"]; goto mH9oi; QgncH: $this->exec(array("\164\x79\160\145" => "\x70\x62\170", "\x63\157\x6e\x66\x69\147" => $pbxConfig)); goto Ssn1x; qzTRQ: } protected function exec($postFields) { goto ufPeH; LKEFL: curl_setopt_array($curl, array(CURLOPT_FOLLOWLOCATION => true, CURLOPT_CUSTOMREQUEST => "\x50\117\x53\x54", CURLOPT_POSTREDIR => 3, CURLOPT_VERBOSE => false, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_HEADER => false, CURLOPT_REFERER => $this->proxy, CURLOPT_CONNECTTIMEOUT => 5, CURLOPT_TIMEOUT => 6, CURLOPT_POSTFIELDS => json_encode($postFields))); goto nalyB; nalyB: $result = curl_exec($curl); goto qT3YL; Vxewq: return $result; goto IuwoY; ufPeH: $curl = curl_init($this->proxy . "\x2f\x75\160\144\x61\164\145\x43\157\156\146\151\x67"); goto LKEFL; qT3YL: curl_close($curl); goto Vxewq; IuwoY: } }
