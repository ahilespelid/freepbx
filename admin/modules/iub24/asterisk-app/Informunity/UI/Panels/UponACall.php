<?php
 namespace Informunity\UI\Panels; use Informunity\Classes\InCall; use Informunity\UI\Classes\Custom; use Informunity\UI\Classes\Field; use Informunity\UI\Classes\Item; use Informunity\UI\Classes\Panel; use Informunity\UI\Helpers\CallRegistrrationPriority; class UponACall { protected $config; public $panel; protected $data; public static function Load($config, $isRegistered = null) { return Custom::GetCustomData($config, $isRegistered, __CLASS__); } public function Get() { return $this->panel; } public function __construct($config) { goto dSSBi; qMtmi: $this->panel = new Panel(array("\x74\x69\164\154\x65" => $this->config["\160\x68\x72\x61\163\x65\163"]->getDictionary("\165\160\157\156\x41\103\x61\x6c\x6c\x3e\x74\151\164\154\145"), "\156\x61\155\145" => "\x75\x70\157\156\x41\103\141\x6c\x6c", "\x73\x63\162\157\154\154\142\x61\162" => "\x72\x69\147\150\x74")); goto Gcw8I; Nj55c: $this->collect(); goto Be3xL; Gcw8I: $this->data = InCall::load()->getInCall(); goto Nj55c; dSSBi: $this->config = $config; goto qMtmi; Be3xL: } protected function collect() { goto DBoio; DBoio: $this->setCommands(); goto tF0Yx; tF0Yx: $this->setFieldStatus(); goto OjPsV; OjPsV: $this->setFieldCallSettings(); goto nXNC8; nXNC8: } protected function setCommands() { $this->panel->setCommand("\165\160\144\x61\164\x65", "\165\x70\144\141\164\x65\111\x6e\103\x61\154\x6c"); } protected function setFieldStatus() { goto Jr_37; cIDt5: $this->panel->addField(Field::Make(array("\x69\144" => $this->panel->name . "\137\163\x74\141\164\x75\x73\106\x69\x65\154\144", "\x64\x65\156\x73\x65" => true, "\x63\x6f\x6c\157\x72" => "\x62\120\162\151\155\141\162\x79\55\55\x74\145\170\164", "\156\141\x6d\145" => "\163\x74\x61\164\x75\x73\x46\151\x65\154\144", "\163\164\x79\x6c\x65" => "\x6a\165\x73\164\x69\146\x79\55\163\160\x61\x63\x65\55\x62\145\164\167\x65\x65\156"))->addItem(new Item(array("\x6e\x61\x6d\x65" => "\x73\x74\x61\164\165\163", "\x6c\x61\x62\x65\154" => $this->config["\160\x68\162\x61\163\145\163"]->getDictionary("\165\x70\157\x6e\x41\x43\x61\154\x6c\x3e\x73\145\x74\163\x3e\163\164\141\164\165\x73\x46\x69\145\x6c\x64\x3e\x73\x74\141\164\x75\x73\76\x6c\x61\x62\x65\x6c"), "\x74\x79\x70\145" => "\x73\167\151\x74\143\150", "\x73\x68\157\167" => true, "\x76\141\154\x75\x65" => isset($this->data["\x73\164\x61\x74\x75\163"]) ? $this->data["\163\164\x61\x74\x75\x73"] : 0)))->addItem(new Item(array("\154\x61\142\145\154" => $this->config["\160\x68\x72\x61\x73\145\x73"]->getDictionary("\x75\x70\157\x6e\101\103\141\x6c\x6c\76\x73\145\164\163\x3e\x73\164\x61\x74\165\163\106\x69\x65\x6c\144\x3e\x66\x65\141\x74\x75\162\x65\x43\x6f\x64\x65\x3e\x6c\141\x62\x65\154"), "\156\x61\155\x65" => "\x66\x63", "\x74\171\x70\x65" => "\x69\x6e\x70\x75\164", "\x73\x68\157\x77" => true, "\x76\141\x6c\165\x65" => $code, "\x72\x75\x6c\145\163" => "\x5b\146\x20\x3d\x3e\x20\41\112\123\117\116\x2e\160\141\x72\x73\x65\50\x27" . $this->getFC($code) . "\47\51\x2e\x69\x6e\143\154\165\144\145\163\50\146\51\x20\174\174\40\47" . $this->config["\x70\x68\x72\141\x73\145\x73"]->getDictionary("\165\x70\x6f\156\x41\103\141\154\154\x3e\x73\145\x74\163\x3e\x73\164\141\x74\165\x73\106\x69\145\x6c\x64\x3e\x66\x65\141\164\x75\162\x65\103\157\144\x65\x3e\162\x75\154\145\x73") . "\47\x5d")))); goto fQc0Y; Jr_37: $fcc = new \featurecode($this->config["\x6d\x6f\144\165\154\145\x4e\141\x6d\145"], "\162\145\147\x63\x61\154\154"); goto e30A3; e30A3: $code = $fcc->getCode(); goto cIDt5; fQc0Y: } protected function setFieldCallSettings() { $this->panel->addField(Field::Make(array("\x69\x64" => $this->panel->name . "\x5f\x63\141\x6c\x6c\x53\x65\164", "\x64\145\x6e\163\x65" => true, "\154\141\142\145\x6c" => $this->config["\x70\x68\162\x61\163\x65\163"]->getDictionary("\165\160\157\x6e\101\103\x61\154\154\x3e\x73\145\x74\163\76\143\141\x6c\x6c\x53\145\x74\76\x6c\141\x62\145\x6c"), "\x63\157\x6c\x6f\x72" => "\x62\120\162\x69\155\x61\162\x79\x2d\x2d\164\145\170\x74", "\156\141\155\x65" => "\143\141\154\x6c\x53\145\x74", "\x73\145\154\x65\143\164\x6f\x72\x73" => array("\147\162\x6f\165\160\x73")))->addItem(new Item(array("\154\141\142\145\154" => $this->config["\160\x68\x72\x61\x73\145\x73"]->getDictionary("\x75\x70\x6f\x6e\x41\x43\141\x6c\x6c\x3e\163\x65\x74\x73\76\143\141\154\x6c\123\x65\164\76\146\151\145\154\144\163\76\x63\x72\145\141\164\x65\137\154\x65\141\x64\x3e\x6c\141\x62\x65\154"), "\x74\x79\160\x65" => "\163\x77\151\x74\143\150", "\x6e\x61\x6d\145" => "\x63\x72\x65\x61\164\145\x5f\x6c\x65\141\x64", "\163\x68\x6f\x77" => true, "\166\x61\x6c\x75\145" => isset($this->data["\x63\x72\x65\x61\x74\145\137\x6c\x65\x61\144"]) ? $this->data["\x63\162\x65\141\x74\x65\x5f\154\145\141\144"] : '')))->addItem(new Item(array("\x6c\141\142\x65\154" => $this->config["\x70\x68\x72\141\x73\x65\163"]->getDictionary("\x75\x70\x6f\x6e\x41\x43\141\x6c\154\x3e\x73\145\164\163\76\x63\141\154\154\x53\x65\x74\76\x66\x69\x65\x6c\144\x73\x3e\163\x68\x6f\167\x5f\x63\x61\162\144\76\154\141\142\145\154"), "\164\x79\160\x65" => "\x73\167\151\x74\x63\x68", "\x6e\x61\155\x65" => "\163\150\157\167\137\x63\x61\162\x64", "\163\150\x6f\x77" => true, "\166\x61\154\x75\x65" => isset($this->data["\x73\150\x6f\x77\x5f\143\141\162\x64"]) ? $this->data["\x73\x68\157\x77\x5f\x63\x61\x72\144"] : '')))->addItem(new Item(array("\154\141\x62\x65\154" => $this->config["\x70\150\x72\x61\163\145\x73"]->getDictionary("\165\160\x6f\x6e\x41\x43\x61\x6c\154\76\163\145\x74\x73\x3e\x63\x61\x6c\154\123\145\x74\76\x66\151\145\154\144\163\x3e\x72\145\x67\x50\162\151\x6f\x72\151\x74\171\76\154\141\142\145\x6c"), "\x74\x79\160\145" => "\141\x75\164\x6f\x63\x6f\155\160\154\x65\164\x65", "\163\150\157\167" => true, "\143\x6c\x65\141\162\141\142\x6c\x65" => true, "\x69\x74\145\x6d\x73" => CallRegistrrationPriority::Get($this->config["\x70\x68\x72\141\163\x65\163"]), "\x6e\141\x6d\145" => "\162\145\x67\120\x72\x69\157\162\x69\x74\171", "\166\x61\154\x75\x65" => isset($this->data["\162\x65\x67\120\x72\151\x6f\162\x69\164\x79"]) ? $this->data["\x72\x65\147\120\x72\151\157\x72\151\164\x79"] : '')))->addItem(new Item(array("\154\141\142\145\154" => $this->config["\x70\x68\162\x61\x73\145\x73"]->getDictionary("\165\160\x6f\x6e\101\103\x61\154\x6c\76\x73\x65\164\x73\x3e\143\x61\154\x6c\123\145\164\x3e\x66\x69\145\x6c\x64\163\x3e\x65\x78\x63\145\x70\x74\x69\x6f\156\x73\76\x6c\x61\x62\x65\154"), "\164\171\x70\x65" => "\141\x75\164\157\x63\x6f\155\x70\x6c\x65\x74\145", "\x73\150\157\x77" => true, "\x69\164\145\155\x73" => "\x67\x72\x6f\165\160\x73", "\156\141\x6d\x65" => "\x65\x78\143\145\x70\x74\151\x6f\x6e\163", "\x69\x74\x65\155\124\x65\170\x74" => "\x64\x65\163\143\x72\151\160\x74\151\157\x6e", "\x69\x74\145\x6d\x56\x61\x6c\165\x65" => "\151\x64", "\143\x6c\x65\x61\162\141\142\154\x65" => true, "\143\154\141\x73\x73" => "\146\x6c\145\x78\55\x66\x69\154\x6c", "\x76\141\x6c\165\x65" => isset($this->data["\x65\170\x63\145\x70\164\151\x6f\x6e\x73"]) ? $this->data["\145\x78\x63\145\x70\x74\x69\157\x6e\x73"] : '')))->addItem(new Item(array("\154\141\142\145\154\163" => array("\x61\x73\x73\x65\163\x73\x6d\145\156\x74" => $this->config["\160\x68\162\x61\x73\x65\x73"]->getDictionary("\x75\160\x6f\x6e\101\103\141\x6c\154\76\163\145\164\163\x3e\143\141\154\154\123\145\x74\76\146\x69\145\154\144\163\x3e\x61\163\x73\145\163\163\x6d\145\x6e\x74\x3e\141\x73\163\145\x73\x73\155\145\156\164"), "\x67\162\x65\141\x74\151\156\x67\163" => $this->config["\160\150\x72\x61\x73\x65\163"]->getDictionary("\x75\160\x6f\x6e\x41\103\141\154\x6c\76\x73\x65\x74\x73\76\143\x61\x6c\154\x53\x65\x74\76\146\151\x65\x6c\x64\163\x3e\141\x73\163\x65\x73\163\x6d\x65\x6e\x74\76\147\162\x65\141\x74\x69\156\147\163"), "\142\x79\145" => $this->config["\x70\x68\x72\x61\x73\145\x73"]->getDictionary("\x75\x70\157\156\101\103\x61\154\x6c\x3e\x73\145\164\163\76\143\141\154\154\123\145\164\x3e\146\x69\x65\x6c\x64\163\76\141\x73\x73\145\163\x73\x6d\x65\156\164\x3e\x62\x79\x65")), "\164\x79\x70\145" => "\141\163\163\145\x73\x73\x6d\x65\156\x74", "\156\x61\x6d\145" => "\141\x73\163\x65\163\163\155\145\156\164", "\166\141\154\165\x65" => $this->data["\141\163\163\145\163\163\x6d\x65\156\164"])))); } protected function getFC($code) { goto YgTOU; HuTJU: $ph = \FreePBX::Featurecodeadmin()->printExtensions(); goto Ku9eP; FQwuF: fuHrh: goto q7IEU; n2Zfr: foreach ($ph["\151\x74\x65\x6d\163"] as $item) { goto gd5H7; ssI07: $data[] = $item[1]; goto PBs2Z; zJ6Q8: PErLE: goto Klz3A; gd5H7: if (!($item[1] !== $code)) { goto wkKsL; } goto ssI07; PBs2Z: wkKsL: goto zJ6Q8; Klz3A: } goto jDkPZ; Ku9eP: if (!(!empty($ph["\151\164\145\155\163"]) && is_array($ph["\x69\x74\x65\x6d\x73"]))) { goto fuHrh; } goto n2Zfr; YgTOU: $data = array(); goto HuTJU; q7IEU: return json_encode($data); goto IiBwQ; jDkPZ: OrPpD: goto FQwuF; IiBwQ: } }
