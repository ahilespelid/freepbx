<?php
 namespace Informunity\Ajax\Methods; use Informunity\Log; use Informunity\UI\Helpers\LogFiles; class DownloadLogFile implements \Informunity\Interfaces\Ajax { public static function ajaxRequest(&$setting) { $setting = array("\x61\165\164\x68\x65\x6e\164\x69\x63\141\x74\145" => true, "\141\x6c\x6c\x6f\x77\x72\x65\x6d\157\x74\145" => false); return true; } public function ajaxHandler($config, $data) { goto rnx6J; NRtit: header("\x43\x6f\156\x74\x65\x6e\164\55\114\x65\x6e\147\x74\x68\x3a\x20" . filesize($file)); goto ijXif; XVnqF: if (!(!empty($pathInfo) && $pathInfo["\145\170\x74\x65\x6e\x73\x69\x6f\x6e"] === "\172\151\x70")) { goto SEAVT; } goto l30iW; DYaFK: if (empty($file)) { goto Ahl6v; } goto IMAsq; R8egN: header("\x54\x72\x61\x6e\x73\x66\145\x72\x2d\105\156\143\x6f\x64\151\156\x67\72\40\x62\x69\x6e\141\x72\x79"); goto MnNGM; KzrBi: SEAVT: goto b11YQ; PwkyZ: vQs_o: goto aRXjJ; FLl4_: kvFuS: goto DYaFK; fUzwZ: if ($zip->open($data["\151\164\145\x6d\163"]["\x66\x69\154\145"] . "\56\172\x69\x70", \ZipArchive::CREATE) === TRUE) { goto S_Ogs; } goto jXINb; gX1Gu: header("\x43\x6f\156\x74\x65\x6e\164\x2d\122\141\x6e\x67\145\72\x20\142\x79\164\x65\163\x20\x30\55" . (filesize($file) - 1) . "\x2f" . filesize($file)); goto fMEbN; rnx6J: if (isset($data["\x69\164\x65\x6d\x73"]["\146\x69\x6c\145"]) && $this->ValidateFile($data["\151\x74\145\x6d\x73"]["\x66\x69\x6c\145"])) { goto xQz9E; } goto SpdK_; IMWSW: echo "\320\263\xd0\276\xd1\x82\xd0\xbe\320\xb2\xd0\276"; goto wR5nX; xUkrd: S_Ogs: goto oALzX; KbZxQ: $zip->close(); goto IMWSW; wbPod: ob_end_clean(); goto eQRCq; IMAsq: if (!ob_get_level()) { goto dYyx7; } goto wbPod; l30iW: unlink($file); goto KzrBi; SpdK_: if (isset($data["\x72\145\x63\157\162\144"])) { goto vQs_o; } goto H0QuS; lngrN: $file = $data["\x69\x74\x65\x6d\163"]["\x66\151\x6c\x65"] . "\x2e\172\151\160"; goto yA7yh; Pb8yl: goto sGS33; goto xUkrd; yJllm: header("\x50\x72\141\147\155\141\72\40\x70\x75\x62\154\151\143"); goto NRtit; aRXjJ: $file = $data["\x72\x65\143\x6f\162\144"]; goto FLl4_; NztCC: xQz9E: goto hgEEA; yA7yh: goto kvFuS; goto PwkyZ; eFZLI: header("\x43\x6f\156\x74\145\156\x74\55\x44\x69\x73\x70\157\x73\151\164\x69\x6f\x6e\x3a\40\141\164\x74\141\143\150\x6d\145\156\164\73\40\146\151\154\x65\156\141\155\x65\75" . basename($file)); goto R8egN; oALzX: $zip->addFile($data["\x69\164\145\x6d\x73"]["\x66\x69\154\x65"], $pathInfo["\142\141\163\145\x6e\141\x6d\145"]); goto KbZxQ; o7UmG: header("\x43\157\156\164\145\x6e\x74\x2d\104\145\x73\x63\162\x69\x70\164\x69\x6f\156\72\40\106\151\x6c\x65\x20\124\162\x61\156\163\x66\145\x72"); goto E0yxb; f9J07: $zip = new \ZipArchive(); goto fUzwZ; wR5nX: sGS33: goto lngrN; hgEEA: $pathInfo = pathinfo($data["\x69\164\145\x6d\x73"]["\x66\151\x6c\x65"]); goto f9J07; fMEbN: readfile($file); goto XVnqF; jXINb: echo "\320\276\xd1\210\xd0\270\xd0\261\xd0\272\xd0\xb0"; goto Pb8yl; H0QuS: goto kvFuS; goto NztCC; ijXif: header("\141\x63\x63\145\160\x74\x2d\x72\x61\156\x67\x65\163\72\x20\x62\x79\164\x65\x73"); goto gX1Gu; eQRCq: dYyx7: goto o7UmG; MnNGM: header("\x43\141\143\x68\x65\55\x43\x6f\x6e\x74\x72\x6f\154\72\40\x6d\x75\x73\x74\55\x72\145\166\141\x6c\x69\144\x61\164\145"); goto yJllm; b11YQ: exit(0); goto OtR11; E0yxb: header("\x43\x6f\x6e\x74\x65\156\164\55\x54\171\x70\x65\72\40\141\x70\160\x6c\151\x63\141\164\x69\x6f\156\x2f\x6f\143\x74\x65\164\x2d\163\164\162\145\141\x6d"); goto eFZLI; OtR11: Ahl6v: goto aMz8J; aMz8J: } private function ValidateFile($path) { goto WOljM; F31E5: if (!(!empty($ExistingFiles) && is_array($ExistingFiles))) { goto j1SPa; } goto sI1eq; WOljM: $ExistingFiles = LogFiles::Get(); goto F31E5; LA_P4: return false; goto rsePZ; spMJs: j1SPa: goto LA_P4; sI1eq: foreach ($ExistingFiles as $file) { goto ReGLM; ReGLM: if (!($file->value === $path)) { goto Upccq; } goto HmjTk; bvjAQ: PD9pY: goto YexFU; qngPQ: Upccq: goto bvjAQ; HmjTk: return true; goto qngPQ; YexFU: } goto LV1rN; LV1rN: g63UJ: goto spMJs; rsePZ: } }
