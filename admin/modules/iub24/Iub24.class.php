<?php
 namespace FreePBX\modules; use Informunity\Ajax\ajaxHandler; use Informunity\Ajax\ajaxRequest; use Informunity\Autoloader; use Informunity\Classes; use Informunity\Classes\Addon; use Informunity\Classes\CurlInfo; use Informunity\Classes\InCall; use Informunity\Classes\systemRecordings; use Informunity\Config; use Informunity\lang\Phrases; use Informunity\Log; use Informunity\ModuleStaticConfig; use Informunity\Rest\App\Handlers\Event; use Informunity\Rest\App\Users\GetTelephonyUsers; use Informunity\Rest\RestProxy; use Informunity\UI\ProxySettings; require_once dirname(__FILE__) . "\x2f\141\163\x74\x65\162\151\163\x6b\55\141\x70\160\57\101\165\x74\x6f\x6c\157\141\x64\145\162\56\160\150\x70"; include_once dirname(__FILE__) . "\57\141\x73\x74\x65\162\151\x73\x6b\x2d\x61\x70\x70\x2f\x67\x65\x6e\x2e\160\x68\160"; class Iub24 extends \FreePBX_Helpers implements \BMO { public $config = array(); public $moduleConfig; public $Registred; private $notifyException; private $Module; private $freepbx; function __construct($freepbx = null) { goto BycqW; cSUam: $this->notifyException = \notifications::create(); goto IyWkn; nGZ4U: TKqE7: goto vUqI4; xbT_W: $freepbx->Modules->loadFunctionsInc($this->config["\155\x6f\144\165\x6c\x65\116\141\x6d\x65"]); goto cSUam; j2sYK: $this->config["\x70\150\162\x61\x73\x65\163"] = new Phrases(isset($_REQUEST["\x6c\141\x6e\x67\x75\141\147\x65"]) ? $_REQUEST["\x6c\141\x6e\147\165\141\x67\x65"] : ''); goto hpC1K; tKpnk: $this->config["\x61\x64\144\157\156\111\156\x66\157"] = Addon::load($this->config)->getInfo(); goto uIU0E; IyWkn: $this->moduleConfig = ModuleStaticConfig::load()->get(); goto Zm8sN; efFNw: $this->config["\143\x6f\156\146\137\x64\x69\162"] = (bool) $this->config["\141\x64\144\x6f\x6e"] ? $this->config["\143\x6f\x6e\x66\137\144\x69\162"] : false; goto F4M9d; uIU0E: if (!(isset($this->config["\141\144\144\x6f\x6e\111\x6e\x66\157"]) && (!isset($this->config["\x61\144\x64\x6f\x6e\x49\x6e\x66\x6f"]["\x73\x75\x70\x70\x6f\162\x74\145\144\101\x70\x70"]) || !$this->config["\141\x64\x64\157\x6e\111\156\x66\157"]["\x73\165\x70\x70\x6f\162\164\145\144\x41\x70\x70"]))) { goto G2G1q; } goto dgk2N; BycqW: $this->config = array_merge($this->config, Iub24::getSettings()); goto efFNw; fQ32s: $this->config["\114\151\x63\145\156\x73\145"] = new \Informunity\License(); goto eJYKI; MjfBZ: G2G1q: goto fQ32s; xSN1C: if (!($freepbx == null)) { goto uugS8; } goto QxrLZ; gg604: $this->config["\166\145\x72\x73\151\x6f\156"] = $this->Module[$this->config["\155\x6f\144\165\x6c\145\116\141\155\x65"]]["\x76\x65\162\x73\x69\157\156"]; goto b40yq; BG9cV: if (isset($_REQUEST["\144\151\163\x70\x6c\x61\x79"])) { goto GBbV3; } goto j2sYK; hpC1K: GBbV3: goto oHo6I; PMn8e: switch ($this->Module[$this->config["\155\157\144\x75\x6c\x65\116\x61\155\x65"]]["\x73\x74\141\x74\165\163"]) { case 1: case 2: $this->Registred = Classes\ModuleRegistred::Get($this->config); goto mDQKy; case 3: goto mDQKy; } goto nGZ4U; QxrLZ: throw new Exception("\116\x6f\164\x20\x67\151\166\x65\156\x20\141\40\x46\162\145\145\120\x42\130\40\x4f\x62\152\145\x63\x74"); goto GS8qJ; vUqI4: mDQKy: goto n6_wi; F4M9d: $autoloader = new Autoloader($this->config["\143\157\x6e\146\137\144\151\162"]); goto BG9cV; EloqP: $this->config["\x63\157\x6e\x66\x5f\144\151\x72"] = false; goto MjfBZ; gBGly: if (!is_array($this->Module[$this->config["\x6d\157\144\x75\154\145\x4e\141\x6d\x65"]])) { goto T6kSU; } goto xbT_W; oHo6I: $this->config["\x6d\x6f\x64\165\x6c\145\116\x61\x6d\x65"] = "\x69\x75\142\62\x34"; goto xSN1C; dgk2N: $autoloader->unsetConfDir(); goto EloqP; n6_wi: T6kSU: goto tKpnk; b40yq: $this->config["\x61\x64\x64\x6f\x6e\x56\x65\x72\163\x69\157\x6e"] = $this->Module[$this->config["\155\157\x64\165\154\x65\x4e\141\155\x65"]]["\141\x64\x64\x6f\x6e"]; goto gBGly; eJYKI: $this->config["\x4c\x69\143\x65\x6e\x73\x65"]->setData($this->config); goto yyWco; hOP3P: $this->Module = $freepbx->module_functions()->getinfo($this->config["\155\x6f\x64\x75\x6c\x65\116\141\155\145"], array(1, 2, 3)); goto gg604; GS8qJ: uugS8: goto hOP3P; Zm8sN: $this->freepbx = $freepbx; goto PMn8e; yyWco: } public function ajaxRequest($command, &$setting) { return ajaxRequest::Prepare($command)->Execute($setting); } public function ajaxHandler() { goto vyQ1U; JL3Q9: echo $result; goto MpcJb; ZiSIT: $result = ajaxHandler::Prepare($this->config, $_REQUEST)->Execute(); goto SXXuH; Dsl7S: return $result; goto kyEVN; SXXuH: if (!(gettype($result) === "\x73\x74\x72\151\x6e\x67")) { goto hYgVP; } goto JL3Q9; vyQ1U: $this->config["\160\150\x72\x61\x73\x65\163"] = new Phrases(isset($_REQUEST["\154\x61\156\x67\x75\141\147\145"]) ? $_REQUEST["\x6c\x61\156\x67\165\141\x67\145"] : ''); goto ZiSIT; MpcJb: exit; goto WYSrd; WYSrd: hYgVP: goto Dsl7S; kyEVN: } public function doConfigPageInit() { } public function install() { goto AoVX2; c_v7b: $action = version_compare_freepbx($Module[$this->config["\x6d\x6f\144\x75\154\x65\x4e\141\x6d\x65"]]["\166\145\x72\x73\x69\x6f\156"], $Module[$this->config["\155\157\x64\x75\154\145\116\x61\x6d\145"]]["\x64\142\166\x65\162\x73\151\157\156"]); goto D_c5k; jZprJ: systemRecordings::load($this->config)->Link(); goto pKYJk; f2TWC: foreach (array("\x2a\x2f\61\40\52\40\x2a\40\x2a\x20\52\x20" . fpbx_which("\146\x77\143\x6f\x6e\163\157\154\x65") . "\40\x69\x75\40\x6f\146\x66\x6c\151\x6e\x65\103\x61\x6c\x6c\163\x48\x61\x6e\144\x6c\145\162", "\x40\x64\141\x69\x6c\171\40" . fpbx_which("\146\x77\143\157\156\163\x6f\154\x65") . "\40\151\165\x20\x63\x6c\145\x61\162\103\141\x63\x68\x65") as $line) { goto SIOH1; OxH1o: GLnNy: goto yMEZT; O3vNI: $cron->add($line); goto OxH1o; SIOH1: if ($cron->checkLine($line)) { goto GLnNy; } goto O3vNI; yMEZT: C3CN4: goto p8p68; p8p68: } goto MQz3R; H7aDu: xKcsx: goto BD1YV; G66gg: $Module = \FreePBX::module_functions()->getinfo($this->config["\155\157\x64\165\x6c\x65\116\x61\x6d\x65"]); goto Vq0Ex; iTJwa: Y9tH3: goto Gn6Nv; EZH8A: PmEjP: goto u1YDi; EGlHb: outn($phrases->getDictionary("\x69\156\163\x74\x61\x6c\x6c\x3e\x44\x4f\x4e\105") . "\x2e\56\x2e\x3c\142\x72\76"); goto YvmW1; MQz3R: EOSDf: goto VB6WB; TvMwP: if ($installed) { goto Wz69r; } goto ACVZy; u1YDi: \FreePBX::Job()->addCommand($this->config["\x6d\x6f\x64\x75\x6c\145\116\141\155\145"], "\x73\145\x6e\144\117\x66\x66\x6c\x69\x6e\145\103\141\154\154\163", fpbx_which("\x66\x77\x63\157\156\163\157\154\x65") . "\x20\151\x75\40\x6f\146\146\x6c\151\x6e\145\x43\141\154\x6c\x73\x48\141\156\144\154\x65\x72", "\x2a\x2f\x31\x20\52\40\52\40\x2a\x20\x2a\x20"); goto ZsSeQ; BD1YV: if (!\FreePBX::Modules()->checkStatus("\x73\x79\x73\141\x64\x6d\151\156")) { goto odsNM; } goto REhS6; Te1ll: switch ($action) { case -1: $Install->post_downgrade(); goto hF7dq; case 0: $Install->post_reInstall(); goto hF7dq; case 1: $Install->post_upgrade(); goto hF7dq; case 2: $Install->post_newInstall(); goto hF7dq; } goto exnVn; Gn6Nv: b6Kzd: goto nqf1_; ZsSeQ: \FreePBX::Job()->addCommand($this->config["\x6d\x6f\x64\165\154\145\116\x61\155\145"], "\x63\x6c\145\141\162\x43\x61\143\150\145", fpbx_which("\x66\x77\143\x6f\156\x73\157\154\145") . "\40\151\165\x20\x63\x6c\x65\x61\x72\x43\x61\x63\x68\x65", "\x40\144\141\x69\x6c\x79"); goto H7aDu; CHe02: outn($phrases->getDictionary("\x69\156\x73\164\x61\154\154\x3e\x49\x4e\x53\124\x41\114\114\x41\124\111\117\116\x5f\103\110\105\103\113\x49\116\107") . "\12"); goto G66gg; L5QDC: $cron = \FreePBX::Cron(); goto f2TWC; nqf1_: array_map(array("\x49\156\146\x6f\162\x6d\165\156\151\x74\171\134\103\154\141\163\x73\x65\x73\134\111\x55\x44\x42", "\164\141\x62\154\145\115\151\147\x72\141\164\145"), Classes\IUDB::GetModuleTables()); goto Te1ll; VB6WB: goto xKcsx; goto EZH8A; Vq0Ex: $installed = $Module[$this->config["\x6d\x6f\x64\165\x6c\145\x4e\x61\x6d\x65"]]["\163\164\x61\164\x75\163"]; goto TvMwP; UyT9P: $Install = Classes\Install::Prepare($Module[$this->config["\155\x6f\x64\x75\x6c\x65\116\141\x6d\x65"]]); goto u8Iob; mJfal: goto Cn1Y5; goto qzrav; exnVn: n3cdk: goto n5yGu; MIVV3: touch("\57\166\x61\x72\57\163\x70\x6f\x6f\x6c\x2f\141\163\164\145\x72\151\x73\x6b\57\x69\156\143\x72\x6f\156\57\151\165\x62\x32\x34\x2e\154\x6f\x67\162\x6f\164\x61\164\145"); goto NZ58Z; n5yGu: hF7dq: goto AYv_E; qzrav: Wz69r: goto zYP3r; NZ58Z: odsNM: goto EGlHb; ACVZy: $action = 2; goto mJfal; D_c5k: Cn1Y5: goto UyT9P; REhS6: outn("\114\117\x47\122\117\x54\101\x54\105\x2e\x2e\x2e\x3c\x62\162\x3e"); goto MIVV3; AoVX2: $phrases = new Phrases(isset($_REQUEST["\154\141\156\x67\165\x61\147\x65"]) ? $_REQUEST["\154\x61\156\147\165\141\x67\145"] : ''); goto CHe02; u8Iob: switch ($action) { case -1: goto ox3sK; Cli5G: $Install->pre_downgrade(); goto nnEO5; nnEO5: goto b6Kzd; goto dUilV; ox3sK: outn($phrases->getDictionary("\x69\156\x73\164\141\x6c\154\76\x44\x4f\127\116\107\122\x41\104\x49\x4e\107") . "\x2e\56\56\74\142\x72\76\xa"); goto Cli5G; dUilV: case 0: goto OmX7m; FkXcS: goto b6Kzd; goto OXlmT; XxaTO: $Install->pre_reInstall(); goto FkXcS; OmX7m: outn($phrases->getDictionary("\x69\x6e\x73\x74\x61\x6c\x6c\76\122\105\55\x49\x4e\123\124\x41\114\114\x49\x4e\107") . "\x2e\x2e\56\74\142\x72\76\12"); goto XxaTO; OXlmT: case 1: goto w_ixU; Fgg_X: $Install->pre_upgrade(); goto u4Hpu; u4Hpu: goto b6Kzd; goto PHgaP; w_ixU: outn($phrases->getDictionary("\x69\x6e\x73\164\141\154\154\76\125\120\107\122\x41\104\x49\116\x47") . "\x2e\56\x2e\74\142\x72\x3e\12"); goto Fgg_X; PHgaP: case 2: goto VeIMp; CSE7p: $Install->pre_newInstall(); goto V_f0D; V_f0D: goto b6Kzd; goto oF8rO; VeIMp: outn($phrases->getDictionary("\151\x6e\163\164\141\x6c\x6c\x3e\x4e\x45\x57\137\111\x4e\123\124\x41\114\x4c\x41\x54\x49\x4f\116") . "\x2e\56\x2e\74\x62\162\76\12"); goto CSE7p; oF8rO: } goto iTJwa; pKYJk: $this->clearCrone(); goto UCPYE; zYP3r: outn($phrases->getDictionary("\x69\x6e\x73\x74\x61\x6c\154\76\124\x48\111\123\137\x56\x45\x52\123\x49\117\116\137\111\116\123\124\101\x4c\114\105\104") . "\40\47" . $Module[$this->config["\x6d\x6f\144\x75\154\145\116\x61\155\145"]]["\144\x62\x76\145\x72\x73\x69\x6f\x6e"] . "\x27\40\74\x62\x72\x3e\xa"); goto c_v7b; UCPYE: if (version_compare_freepbx(getVersion(), "\61\65\56\60", "\76\75")) { goto PmEjP; } goto L5QDC; AYv_E: Classes\Lines::load()->SetDefault(); goto jZprJ; YvmW1: } public function uninstall() { goto YUf0T; OWxWR: outn($phrases->getDictionary("\x75\156\151\156\x73\164\141\154\x6c\x3e\x43\x4c\x45\x41\116\x5f\x55\x50") . "\x20\x41\x73\x74\x44\102\x2e\x2e\56\74\x62\162\76"); goto tcfSA; RQZYp: $astman->database_deltree("\111\125\102\62\64"); goto kJqyR; F1GsB: array_map(array($this, "\143\x68\x65\143\153\x5f\x64\x65\154\145\164\x65"), Classes\IUDB::GetModuleTables()); goto QaN0D; JM89Z: \FreePBX::Job()->removeAllByModule($this->config["\x6d\x6f\144\x75\154\145\116\x61\155\x65"]); goto JnR9I; bi5qn: $fcc = new \featurecode($this->config["\155\x6f\x64\x75\154\x65\x4e\141\155\x65"], "\x72\145\x67\143\141\x6c\x6c"); goto o89Mq; sRgB_: outn($phrases->getDictionary("\x75\156\151\x6e\x73\x74\x61\x6c\154\x3e\103\x4c\105\101\116\137\125\x50") . "\x20" . $phrases->getDictionary("\165\x6e\x69\156\163\x74\x61\154\x6c\x3e\x48\101\x4e\x44\114\105\x52\123") . "\56\56\56\x3c\x62\x72\x3e"); goto XUKQ6; o89Mq: $fcc->delete(); goto vSFsK; gEA__: outn($phrases->getDictionary("\x69\156\163\164\x61\x6c\154\x3e\104\x4f\116\x45") . "\56\x2e\56\74\x62\162\x3e"); goto ifsxs; qBLWJ: $this->clearCrone(); goto AoFrG; n7jY2: Lextj: goto JM89Z; k4nyy: foreach ($this->moduleConfig["\x45\166\145\x6e\164\x73"] as $handler) { Event::load($this->config, array("\x6d\145\x74\x68\157\x64" => "\145\166\x65\156\x74\56\x75\156\142\x69\x6e\144", "\x65\166\145\156\164" => $handler, "\150\141\x6e\x64\x6c\145\162" => $this->moduleConfig["\x6c\x69\x63\x65\156\x73\145"]["\x73\145\x72\166\145\x72"] . $this->moduleConfig["\x6c\x69\x63\145\x6e\163\145"]["\x72\x6f\165\164\145"]["\143\154\151\x63\x6b\x62\141\x63\153"]))->Run(); zblgb: } goto wbVbh; vSFsK: $nodejs = new Classes\Pm2($this->freepbx); goto XqzKt; XUKQ6: if (!(!empty($this->moduleConfig["\105\166\x65\156\164\x73"]) && is_array($this->moduleConfig["\105\166\x65\x6e\x74\x73"]))) { goto zVGde; } goto k4nyy; YUf0T: $phrases = new Phrases(isset($_REQUEST["\x6c\x61\x6e\x67\165\x61\x67\x65"]) ? $_REQUEST["\x6c\x61\x6e\x67\x75\141\147\x65"] : ''); goto bi5qn; nWz0_: array_map(array($this, "\165\x6e\x6c\x69\x6e\153\137\162\145\x63\x6f\x72\x64\x69\156\147\163"), array("\x65\x6e", "\x72\165")); goto hL6Lk; cPbOb: zVGde: goto gEA__; JnR9I: F7JCx: goto cdsrE; tcfSA: global $astman; goto RQZYp; hL6Lk: outn($phrases->getDictionary("\x69\156\163\x74\x61\154\154\76\x44\x4f\116\105") . "\56\x2e\56\x3c\x62\162\x3e"); goto OWxWR; cdsrE: outn($phrases->getDictionary("\165\156\151\156\163\164\141\x6c\x6c\x3e\x55\116\114\111\116\x4b\x5f\122\105\103\117\122\x44\x49\116\x47\123") . "\x2e\x2e\x2e\x3c\142\162\76"); goto nWz0_; AoFrG: goto F7JCx; goto n7jY2; wbVbh: Bk9Aw: goto cPbOb; kJqyR: outn($phrases->getDictionary("\151\156\x73\164\141\x6c\154\76\104\117\x4e\105") . "\x2e\x2e\56\74\142\162\x3e"); goto asp6x; asp6x: outn($phrases->getDictionary("\x75\156\x69\x6e\x73\x74\x61\x6c\154\x3e\103\x4c\105\101\116\137\x55\x50") . "\x20\x44\x42\56\56\56\74\x62\x72\76"); goto F1GsB; XqzKt: $nodejs->deleteProxy(); goto sRgB_; ifsxs: if (version_compare_freepbx(getVersion(), "\x31\64\56\60", "\76\x3d")) { goto Lextj; } goto qBLWJ; QaN0D: outn($phrases->getDictionary("\151\156\163\164\x61\x6c\154\76\x44\117\x4e\105") . "\x2e\56\56\74\142\162\x3e"); goto pL5pG; pL5pG: } protected function clearCrone() { goto wW4Ax; H0FYd: hLLlU: goto OH0VA; mRQI4: sqK2o: goto H0FYd; wW4Ax: $cron = \FreePBX::Cron(); goto Fk_EB; Fk_EB: $cron_lines = $cron->getAll(); goto ErGC2; ErGC2: if (!(!empty($cron_lines) && is_array($cron_lines))) { goto hLLlU; } goto z6dHM; z6dHM: foreach ($cron_lines as $cron_line) { goto tw62G; TnRmr: TMAqy: goto PhQd0; tw62G: if (!(strpos($cron_line, "\157\x66\x66\x6c\151\x6e\x65\x43\141\154\154\x73\x48\141\156\144\x6c\145\162") || strpos($cron_line, "\x66\167\143\157\x6e\163\157\154\145\40\151\165"))) { goto f9LxO; } goto mtvOw; zNkX4: f9LxO: goto TnRmr; mtvOw: $cron->removeLine($cron_line); goto zNkX4; PhQd0: } goto mRQI4; OH0VA: } public function backup() { } public function restore($backup) { goto r04xw; ZNWIR: $backup = null; goto Mzv77; r04xw: if (!empty($backup)) { goto Vyh7_; } goto ZNWIR; Mzv77: Vyh7_: goto GPWF8; GPWF8: } public function myDialplanHooks() { return 980; } public function doDialplanHook(&$ext, $engine, $priority) { goto LJKsZ; LmffE: global $astman; goto xZxaN; F80mH: $usersPhones = GetTelephonyUsers::load($this->config, array("\x65\x78\164\x65\156\x73\151\x6f\156\x73" => $usersInDB))->Run(); goto Qe8Gb; ILzvt: $fcc = new \featurecode($this->config["\x6d\157\144\x75\154\x65\116\x61\x6d\145"], "\162\145\x67\x63\x61\154\154"); goto lZYTV; OPVlh: $core_conf->addApplicationMap("\x72\x65\147\x6f\165\x74\x63\x61\154\x6c", $code . "\54\160\145\x65\162\x2f\x63\x61\x6c\x6c\145\x72\x2c\x47\x6f\x73\x75\x62\54\42\x72\x65\147\143\x61\x6c\154\54\163\x2c\61\42"); goto thR37; anAEn: new Classes\Dialplan($this->config, $ext); goto K8k55; Cr6Kd: $this->getCustomContexts($ext); goto kkkad; ej_z2: $this->config["\x4c\x69\x63\145\156\x73\x65"]->setData(array("\x65\170\164\x65\x6e\163\x69\157\156\x73" => $usersPhones, "\x6c\x69\156\x65\x73" => empty($linesInMYSQL) ? array("\104\145\x66\x61\165\154\x74" => "\x44\x65\x66\x61\x75\x6c\x74") : array_values($linesInMYSQL), "\165\x72\x6c\137\x66" => $_SERVER["\x48\124\124\x50\x5f\110\117\x53\124"], "\155\x6f\x64\165\154\x65\x4e\141\x6d\145" => $this->config["\x6d\157\144\x75\154\145\116\x61\x6d\x65"], "\x6c\x6f\147\147\x69\x6e\x67" => $this->config["\x6c\x6f\147\x67\x69\156\147"])); goto F46iP; ILS8r: checkDependency("\146\146\x6d\160\x65\x67"); goto vE5vb; t3_MO: checkDependency("\x75\156\172\151\160"); goto ILS8r; lZYTV: $code = $fcc->getCodeActive(); goto OPVlh; Nl2pE: $linesInMYSQL = Classes\Lines::load()->getLinesList(); goto JXH1X; thR37: $core_conf->addApplicationMap("\162\145\147\151\156\143\x61\154\154", $code . "\54\x70\x65\x65\x72\x2f\143\141\154\154\x65\x65\x2c\x47\x6f\163\165\x62\54\42\162\145\x67\x63\141\154\154\x2c\163\54\61\x22"); goto s4b0M; LJKsZ: unset($engine, $priority); goto LmffE; vE5vb: $this->config["\151\156\143\141\x6c\154"] = InCall::load()->getInCall(); goto anAEn; uwXRY: $this->config["\x4c\151\143\x65\x6e\163\145"]->Request($moduleConfig["\154\151\143\x65\156\163\x65"]["\163\x65\162\x76\145\162"] . $moduleConfig["\x6c\151\x63\145\156\163\145"]["\x72\x6f\x75\x74\145"]["\x73\x61\166\x65"], "\x73\145\164\x5f\x6e\165\x6d\x62\145\x72\163", $fields); goto wCOfZ; xZxaN: $this->ManageProxy(); goto Nl2pE; i6_RI: $moduleConfig = ModuleStaticConfig::load()->get(); goto ej_z2; o_Ohs: $this->ManageRegions(); goto Cr6Kd; JXH1X: $usersInDB = $this->getPBXUsers(); goto F80mH; F46iP: $fields = array("\x75\162\x6c\x5f\146" => "\x75\162\154\x5f\x66", "\x61\144\162\x5f\160\x62\x78" => "\x65\x78\164\137\x61\x64\x64\x72\145\x73\x73", "\x6d\145\x6d\142\145\x72\137\151\144" => "\x6d\145\155\142\x65\162\137\151\x64", "\x65\170\164\x65\x6e\x73\151\x6f\156\x73" => "\145\170\x74\145\x6e\163\151\157\156\x73", "\154\x69\x6e\145\x73" => "\154\x69\x6e\145\x73", "\x6d\157\x64\x75\x6c\x65\116\x61\x6d\x65" => "\x6d\157\144\x75\154\x65\x4e\x61\155\x65"); goto uwXRY; wCOfZ: $astman->database_deltree("\111\x55\102\62\x34\137\x54\x52\x55\x4e\x4b"); goto t3_MO; s4b0M: VmESA: goto o_Ohs; JdvuI: if (!(!empty($this->config["\x69\156\143\x61\154\154"]["\163\x74\x61\164\x75\163"]) && $this->config["\x69\x6e\143\141\154\x6c"]["\163\164\141\164\165\x73"] !== "\156\x6f")) { goto VmESA; } goto ILzvt; Qe8Gb: $usersPhones = is_array($usersPhones) ? $usersPhones : array("\x64\x65\x66\141\165\154\164" => array("\x49\104" => "\144\145\x66\x61\165\154\x74", "\x55\106\x5f\x50\x48\117\x4e\x45\x5f\x49\116\116\105\x52" => "\x64\x65\x66\141\165\154\164")); goto i6_RI; K8k55: global $core_conf; goto JdvuI; kkkad: } public function startFreepbx() { $this->ManageProxy(); outn(preg_replace("\57\74\x5c\57\77\x5c\167\52\76\x2f", '', "\x49\156\x66\157\162\155\x75\x6e\x69\164\171\40\x42\x69\164\162\x69\170\62\64\x20\x2d\x20\160\162\x6f\x78\x79\40\151\x73\40\x73\164\x61\x72\164\145\144\12")); } public function stopFreepbx() { goto WCJa1; E5Rog: outn(preg_replace("\x2f\74\x5c\x2f\x3f\x5c\167\52\x3e\x2f", '', "\x49\156\x66\157\162\155\165\x6e\151\x74\x79\x20\x42\151\164\162\x69\x78\62\64\x20\x2d\40\x70\162\157\170\171\x20\151\163\40\163\x74\x6f\160\160\145\144\xa")); goto e5g_i; iIM_F: $nodejs->deleteProxy(); goto E5Rog; WCJa1: $nodejs = new Classes\Pm2($this->freepbx); goto iIM_F; e5g_i: } public function ManageProxy() { goto UqQme; oL6yF: iJ5N6: goto NQVVu; VFeHB: $this->config["\x6e\157\x64\145\x52\x75\156\x6e\x69\156\147"] = true; goto oL6yF; AlZiQ: YomHz: goto MysUp; rGiPL: $nodejs = new Classes\Pm2($this->freepbx); goto Qr9Ny; TsY5F: if (empty($start["\x70\x69\144"])) { goto iJ5N6; } goto VFeHB; h6OVi: LamQU: goto mHrIk; a9g4j: cNWDB: goto uWm66; MysUp: if (!$this->config["\156\x6f\x64\145\122\x75\156\x6e\151\x6e\147"]) { goto TZ3EZ; } goto w1sCj; z8LxB: $curlProxyConfig = parse_url($this->config["\143\x75\x72\x6c\x5f\x70\162\157\170\171"]); goto rGiPL; xSqc5: qgqv3: goto h4M3U; ENEQ0: if ($isLocalserver) { goto YomHz; } goto sEnkH; Qr9Ny: if ($this->config["\156\x6f\x64\145\152\x73"]) { goto cNWDB; } goto ixuCe; UqQme: $localIPs = CurlInfo::getLocalIPs(); goto z8LxB; NQVVu: j87Kg: goto ENEQ0; gFpRj: $nodejs->deleteProxy(); goto L2byz; wHZw_: goto qgqv3; goto a9g4j; ixuCe: $nodejs->deleteProxy(); goto wHZw_; uWm66: $isLocalserver = !empty($localIPs) && isset($curlProxyConfig["\150\x6f\x73\x74"]) && in_array($curlProxyConfig["\150\157\x73\x74"], $localIPs); goto pQg_6; L2byz: goto j87Kg; goto h6OVi; pQg_6: if ($isLocalserver && !empty($curlProxyConfig["\160\157\162\x74"]) && $curlProxyConfig["\160\x6f\162\164"] !== $_SERVER["\x53\x45\x52\x56\x45\x52\137\x50\117\x52\124"]) { goto LamQU; } goto gFpRj; mHrIk: $start = $nodejs->startProxy(); goto TsY5F; w1sCj: RestProxy::load()->query($this->config); goto gbVWH; sEnkH: $this->config["\x6e\157\x64\145\122\x75\156\156\x69\x6e\147"] = true; goto AlZiQ; gbVWH: TZ3EZ: goto xSqc5; h4M3U: } public function ManageRegions() { goto PAF7Y; DPdj5: Classes\Region::addRegions(); goto X0Vta; A1wBo: GNM_Z: goto WULfe; OCuB8: $Regions->getRegionFiles(); goto ZDple; M5loU: pKtgL: goto A1wBo; PAF7Y: if (!$this->config["\144\x65\x74\137\x72\x65\x67\x69\x6f\x6e"]) { goto GNM_Z; } goto DPdj5; X0Vta: $Regions = Classes\Region::load($this->moduleConfig); goto lVRU0; lVRU0: if (!$Regions->DoDownloadFiles()) { goto pKtgL; } goto OCuB8; ZDple: $Regions->createRegionList(); goto M5loU; WULfe: } public static function getSettings() { goto rwsXX; rwsXX: global $db; goto yNmHH; yNmHH: $result = $db->getRow("\x53\x45\114\105\x43\124\40\52\x20\106\x52\x4f\115\x20\141\x73\x74\145\x72\x69\x73\x6b\x2e\151\x75\x62\x32\x34", DB_FETCHMODE_ASSOC); goto f5ZMQ; f5ZMQ: return is_array($result) ? $result : array(); goto bOQ31; bOQ31: } public function checkDependency($app) { goto eQA_4; eQA_4: $notify = \notifications::create(); goto g0Q1L; g0Q1L: if (!fpbx_which($app)) { goto upU3h; } goto tpGgN; GhDnx: return true; goto csH9y; csH9y: upU3h: goto QZ3Vp; QZ3Vp: $notify->add_warning($this->config["\x6d\x6f\x64\x75\x6c\x65\x4e\x61\155\x65"], $app . "\x5f\116\117\124\137\x49\x4e\x53\124\101\x4c\114\x45\x44", $app . "\40\156\157\164\40\151\156\163\x74\141\x6c\x6c\x65\x64\40\157\156\40\x79\157\x75\162\x20\163\x79\x73\164\x65\155\x2e", '', '', true, true); goto sd26s; sd26s: return false; goto C1XFh; tpGgN: $notify->delete($this->config["\155\x6f\144\x75\x6c\x65\116\141\x6d\145"], $app . "\x5f\x4e\x4f\124\x5f\x49\x4e\x53\124\101\x4c\x4c\105\x44"); goto GhDnx; C1XFh: } public function getPBXUsers() { goto fqTKx; cS8CI: DRhf_: goto XILZB; XILZB: return array(); goto nQrPe; fqTKx: global $amp_conf; goto ZtoZf; ZtoZf: switch ($amp_conf["\101\115\120\x45\x58\x54\105\x4e\x53\111\117\x4e\x53"]) { case "\x65\170\164\145\156\x73\151\157\156\163": return $this->freepbx->core->getAllUsersByDeviceType(); goto DRhf_; case "\144\x65\x76\151\x63\145\141\x6e\144\x75\163\145\162": return $this->freepbx->core->getAllUsers(); goto DRhf_; } goto GKY1p; GKY1p: fTBK2: goto cS8CI; nQrPe: } function check_delete($table) { goto lvTbn; ZJVpV: $check = $db->query("\x44\122\117\x50\40\124\x41\102\x4c\x45\x20\x49\106\40\105\x58\x49\123\124\123\x20" . $table["\x6e\x61\x6d\x65"]); goto fYGij; fYGij: if (!\DB::IsError($check)) { goto nSyk_; } goto S9Bpt; lvTbn: global $db; goto ZJVpV; S9Bpt: die_freepbx("\103\x61\x6e\40\x6e\157\x74\40\144\x65\154\145\x74\x65\x20" . $table["\156\x61\155\x65"] . "\40\164\141\x62\154\145"); goto nEcg4; nEcg4: nSyk_: goto FxbsG; FxbsG: } function unlink_recordings($language) { goto H52UD; H52UD: global $amp_conf; goto pHjsV; gyMNe: foreach (glob($file_loc_path . "\x2f" . $language . "\57\52\x2e\x77\x61\166") as $f) { goto toTnm; wmvC3: unlink($u_file); goto uDEIf; jZCB9: dlwTE: goto y1SJT; kUclG: if (!file_exists($u_file)) { goto W45qz; } goto wmvC3; toTnm: $u_file = $file_dest_path . "\57" . $language . "\57\143\x75\163\164\157\155\57" . pathinfo($f, PATHINFO_FILENAME) . "\56\x77\x61\x76"; goto kUclG; uDEIf: W45qz: goto jZCB9; y1SJT: } goto az2dz; az2dz: hDmGQ: goto JKHBr; pHjsV: $file_loc_path = $amp_conf["\101\x4d\120\127\105\102\x52\117\117\124"] . "\57\x61\x64\155\151\x6e\x2f\155\157\x64\165\x6c\x65\163\x2f\151\x75\x62\62\64\57\122\x65\143\x6f\x72\144\151\x6e\147\163"; goto G1cxp; G1cxp: $file_dest_path = "\57\x76\x61\x72\57\x6c\151\x62\57\x61\x73\x74\x65\x72\151\x73\153\57\x73\157\x75\156\144\163"; goto gyMNe; JKHBr: } public function setDestinationsCheck($action) { goto vGzJE; WWbXD: goto ixm3E; goto DJlSl; zAwWd: ixm3E: goto iXQN3; t3LDS: if (isset($param)) { goto rrpFw; } goto DdFWk; vGzJE: $db = $this->freepbx->Database(); goto V_MfZ; Kay6z: b37Fj: goto Rgo0g; zg4vD: $sql = "\125\120\x44\101\124\x45\40\151\165\x62\x32\64\x20\x53\x45\x54\x20\x63\x68\x65\x63\153\104\120\x3d\72\x63\x68\x65\x63\153\x44\x50\x20\x57\x48\105\x52\x45\40\151\144\75\60"; goto O2bQh; DdFWk: return false; goto WWbXD; DJlSl: rrpFw: goto zg4vD; Rgo0g: Rghq5: goto t3LDS; O2bQh: $q = $db->prepare($sql); goto mRpnQ; b3geo: return $q->execute(); goto zAwWd; V_MfZ: switch ($action) { case "\145": $param = 1; goto Rghq5; case "\144": $param = 0; goto Rghq5; default: goto Rghq5; } goto Kay6z; mRpnQ: $q->bindParam("\x3a\x63\x68\x65\x63\x6b\104\x50", $param, \PDO::PARAM_STR); goto b3geo; iXQN3: } private function getCustomContexts(&$ext) { goto KE_zh; KE_zh: $className = "\x49\156\x66\x6f\x72\155\x75\x6e\x69\164\x79\134\103\x6f\156\164\145\170\164\x73\x5c\111\156\152\x65\143\x74\x43\x6f\156\164\145\x78\x74\163"; goto A4395; dTma5: $className::make($this->config)->run($ext); goto DaIoX; DaIoX: TbN5u: goto y0e8G; A4395: if (!class_exists($className)) { goto TbN5u; } goto dTma5; y0e8G: } }
