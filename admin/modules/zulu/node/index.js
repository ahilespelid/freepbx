var _0x10a5=['setFromNum','FROM_NUM','SET_UNANSWER','setUnanswer','Final\x20Call\x20Object','Call\x20Finished\x20from\x20','.\x20Call\x20took\x20','\x20seconds','prepareCallInteraction','Error\x20preparing\x20call\x20interaction\x20for\x20answered\x20call',')\x20to\x20','Error\x20preparing\x20call\x20interaction\x20for\x20unanswered\x20call','getAnsweredApp','getId','saveCallStream','answeredBy','isConf','wasStreamed','Rejecting\x20stream\x20log\x20as\x20stream\x20was\x20already\x20logged','NO_INTERACTION','Rejecting\x20stream\x20log\x20NO_INTERACTION\x20variable\x20is\x20set','saveCallInteraction','OUTGOING','lookupNumber(','Found\x20true\x20exten\x20of\x20\x27','\x27\x20is\x20','Params\x20channel,\x20context\x20and\x20exten\x20are\x20required','Redirect','CallProcessing','ari-client','tokenMap','contactstatusdetail','contactstatusdetail-','contactstatusdetailcomplete','contactstatusdetailcomplete-','contactstatus','contactstatus-','endpointname','_getMobileCall','HTTPBINDPORT','FPBX_ARI_PASSWORD','startDesktop','startMobilePushProcessing','startMobileCallAnswer','zulu-desktop-call-processing','desktopCall','Error\x20starting\x20desktop\x20call','StasisEnd','Error\x20registering\x20desktop\x20call\x20handler','http://127.0.0.1:','start','zulu-mobile-call-push-processing','StasisStart','Error\x20starting\x20mobile\x20call\x20(push)','\x20left\x20stasis\x20zulu-mobile-call-push-processing','finishPushProcessing','Error\x20registering\x20mobile\x20call\x20(push)','mobileCallAnswer','Error\x20handling\x20mobile\x20call\x20(answer)','\x20left\x20stasis\x20zulu-mobile-call-answer-processing','Error\x20handling\x20mobile\x20call\x20end\x20(answer)','Error\x20registering\x20mobile\x20call\x20(answer)','parseURI','mobilePrefix','_sendMobileCallCanceledNotification','user.default_extension','call::cancel','\x20entering\x20to\x20stasis\x20zulu-mobile-call-answer-processing','args','joinChannelsToBridge','getBridgeMap','notifyType','notifyToken','callbackURI','replace_channel','\x20entering\x20to\x20stasis\x20zulu-mobile-call-answer-processing\x20to\x20replace\x20','getBridgeMapForChannel','There\x20is\x20no\x20bridgeMap\x20for\x20channel\x20id:\x20','channelHangup','busy','removeChannelFromBridgeMap','updateChannelInBridge','mobilePushProcessing','StasisCall','getChannelVariable','EXTEN','CALLERID(num)','CALLERID(name)','ZULU_NO_MOBILE_CALL','mobile_tokens','IOS_NOTIFY','IOS_NOTIFY_DEVELOPMENT','ANDROID','IOS_VOIP','IOS_VOIP_DEVELOPMENT','body.response','No\x20response\x20from\x20server','Could\x20not\x20finish\x20push\x20processing:\x20bridgeMap\x20not\x20found\x20for\x20channel\x20','inCall','Reachable','aor','\x20to\x20the\x20dial\x20string','getContactStatuses','buildDialString','Found\x20registered\x20','setDialString','setEndpointStatus','CONNECTED','12345','Found\x20no\x20registered\x20','\x20client(s)','Entered\x20Desktop','^Zulu$','DISCONNECTED','ZULU_NO_DESKTOP_CALL','\x22No\x20deskop\x20call\x22\x20flag\x20detected\x20not\x20sending\x20the\x20call\x20to\x20desktop\x20extension\x20','Attempting\x20to\x20sending\x20call\x20to\x20registered\x20desktop\x20clients','dialOnlineContactsByUA','desktop','Desktop\x20Finished','finish','PJSIPShowRegistrationInboundContactStatuses','Contacts\x20never\x20completed','Missing\x20data.callbackURI','Mobile\x20call\x20not\x20found','interactionMap','ws::message::conference::prefix','bridgeHandler','ZULUCONFERENCEPREFIX','conferencePrefix','startBridgesHandler','Error\x20starting\x20bridges\x20handler','confNumber','confNumberMap','There\x20is\x20no\x20more\x20space\x20for\x20other\x20conference\x20bridge','User\x20is\x20not\x20a\x20member\x20of\x20the\x20interaction','The\x20interaction\x20is\x20already\x20closed','Initializing','CONFERENCE','streamid','conferenceMap','channelJoinBridge','\x20leaved\x20stasis\x20bridges-handler','channelLeaveBridge','Error\x20channel\x20leaving\x20bridge','ChannelTalkingStarted','channelTalking','ChannelTalkingFinished','Error\x20handling\x20talking\x20finished\x20event','Error\x20registring\x20bridge\x20handlers','The\x20conference\x20number\x20','\x20has\x20not\x20been\x20created','There\x20is\x20no\x20a\x20stream\x20associated\x20to\x20the\x20conference\x20','\x20joined\x20stasis\x20bridges-handler\x20from\x20interaction\x20','AMPUSER','REALCALLERIDNUM','direct','Direct\x20interactions\x20should\x20not\x20create\x20conferences\x20bridges','Was\x20not\x20possible\x20to\x20get\x20contactuuid\x20for\x20the\x20callerid','Was\x20not\x20possible\x20to\x20determine\x20the\x20callerid','bridges','list','There\x20is\x20already\x20a\x20bridge\x20for\x20interaction\x20','create','mixing','conference','startedat','addChannel','setChannelVar','CONNECTEDLINE(name-charset,i)','CONNECTEDLINE(name)','Zulu\x20Bridge','CONNECTEDLINE(num)','\x20was\x20added\x20to\x20bridge\x20','public','\x20joined\x20successfully\x20interaction\x20','externalContacts','currentExternalContacts','currentContacts','bhContact','bhInternal','play','In\x20Progress','TALK_DETECT(set)','\x20started\x20talking\x20on\x20unknown\x20conference','Error\x20handling\x20channel\x20talking','Interaction\x20','\x20do\x20not\x20have\x20required\x20values','Playback','sound:access-denied','PlaybackFinished','sendCallPresenceStatus','Removing\x20external\x20contact\x20in\x20streams\x20body','destroy','ended:attendance','duration','Finish','Stream\x20was\x20not\x20able\x20to\x20update,\x20MESSAGE:\x20','prefix','ZuluBridge','createBridge','bridgeMap','Removing\x20unknown\x20channel\x20','Removing\x20','removeBridgeMap','Bridge\x20','\x20down\x20to\x20last\x20channel;\x20hanging\x20up','Keeping\x20bridge\x20','\x20with\x20','epoch','Timeout\x20exceeded,\x20you\x20cannot\x20join\x20anymore\x20this\x20bridge:\x20','startedAt','Error\x20adding\x20','addChannelToBridge','Adding\x20channel\x20','Error\x20joining\x20channel\x20to\x20bridge','normal','chatRPC','_onConnectionStatusChanged','CONNECTION_STATUS_CHANGE_EVENT','CHAT_CONNECTION_STATUS','clientServer','USER_CONNECTION_STATUS_CHANGE_EVENT','_onOpen','Chat\x20connection\x20open','stop','linkifyjs','getOwnPropertyDescriptor','prototype','set','metascraper','got','href','metaCache','timestamp','unshift','rooms','initializeMediasoupServer','ZULURTCMINPORT','ZULURTCMAXPORT','mediasoupServer','Room\x20','\x20created','handleRoom','TRANSMITTER_ROLE','hasTransmitter','addUser','removeUser','%s\x20%s\x20left\x20room\x20%s','_connection','code','sendUTF','calls','callsMap','createCall(','clearCall','Trying\x20to\x20delete\x20an\x20untracked\x20call','isCallDefined','getAllCalls','ari','getChannelVar','INTERACTIONID','ZULUDIAL','_finished','linkifyjs/plugins/mention','hasOwnProperty','_chat','sendMessage','text','API\x20didnt\x20return\x20expected\x20values','Interaction\x20does\x20not\x20belong\x20to\x20user','Interaction\x20is\x20already\x20closed','getMentioning','checkMembersConnected','Getting\x20metadata\x20failed:\x20','sendTypingIndication','contacts.users','User\x20do\x20not\x20belong\x20to\x20interaction','typingIndication','mention','No\x20other\x20parties\x20to\x20send\x20message\x20to!','loud','topic','sendInvitation','websocket_session','reconnecting','disconnected','chat::connection-status','chat::user-connection','mediasoup','webrtc','audio','audio/opus','video','video/H264','initServer','rtcMinPort','Mediasoup\x20server\x20rtcMinPort:\x20','Mediasoup\x20server\x20rtcMaxPort:\x20','rtcMaxPort','mediaServer','Server','Created\x20mediasoup\x20room','Mediasoup\x20room\x20%s\x20joining\x20participant','closed','Room\x20is\x20closed,\x20cannot\x20join\x20participant\x20%s\x20to\x20room\x20%s','handleParticipant','Mediasoup\x20room\x20%s\x20closed\x20with\x20errors','Could\x20not\x20create\x20room','random','setCapabilities','Sending\x20offer\x20to\x20','sendSdpOffer','Error\x20sending\x20capabilities','negotiationneeded','leave','createOffer','setLocalDescription','localDescription','setRemoteDescription','Error\x20sending\x20SDP','reset','transmitter','VIEWER_ROLE','currentRoom','fromName','toName','finalState','dials','dialing','zuluVars','_outbound','_notificationsList','_streamedList','ringingExtensions','answeredApp','setStreamed','createChannel(','Channel','isChannelDefined','clearDialing','channelCount','getAllChannels','answeree','getAnswerChannel','setState','getState','getFinalState','clearTimestamp','setTransferFlag','setNoAnswerFlag','getZuluVariable','getRingingExtensions','getExtenFromChannel','getAllVariables','function','main','parent','call','exports','loaded','resolve','path','/../','babel-polyfill','__rootDir','index.js','initialize','default','startListeners','loadModules','then','info','Zulu\x20Has\x20Started','catch','Zulu\x20startup\x20error','exit','__esModule','ltx','freepbx','bluebird','locutus/php/info/version_compare','FreePBX\x5cmodules\x5cZulu','EventEmitter','_nodeServerVersion','_pbxServerVersion','_freepbxVersion','_db','_astman','_config','_kvstore','_loadPBXVersion','eval(str_rot13(gzinflate(str_rot13(base64_decode(\x27LZbHDsNTDoafJlX2pl6wJ/Xem6XLT733rqePlKxu2NaI85NQkR+91MP919Yf8W0P5fLXOBQLhvxiXqZxXv7Kh6bK7/9f/Kl1IksU8s8WbAX5AzJV3v92XRC2B02wt/YMJXz8ATlDdzDgzCwaZHLeigdA2MRSDchNDyio8BnMb48xHThJr8h7/X6W79ctc2avi1RLSQJo+GDkdLgyoTl19MLMS4nZoLUp9krbA8FLEg6N2vr+7r3sll2mQzELxGR4+LRPIVZzP2B4NyNFjCmbPNdTSMCiERFGSU22du4wOFdrdpEGxXEIiY62RrSTT6R1i5OOUn5yaGYnM7aNVwv2JW4cfqEV1ZWv67BqLRlGvCb57JiwajJlRnATg5LZhkzmTVhKfXmuKsFDOr3n4obIQdxtuN7fiUPTSZRha4jhQXWGjZj4nVnl86vGZyYCipx8AImaBCjao333Ljtg3Br9ZOi3Ff+ADIHTmXuVgp+lC1ak84nebddmDUcl1I3bCRzWIgEXqwK8hZfc1z7jrAqWg8+q3yp3xqxz3L4B/aAsvcy9gIluhBy9swH2aBbB9KaA3u9zZUBl9njYq5xUW34R72Ozi32yk0xSfq9yb0zf41AGBbhS36Z00FLZXwYyCLrPwNly61mOvv2aCM+ey2ioZuNjot1mUz9Q7TL9vXCvPHJclRzZklPi6Y4VDopQVc11AG/hWco8i5ZpLfgearvSwjecS7BQ2j3XaTZ51SipDNJa8tfJ9vTMirw6WiUBQvpz0zkb9JD7kcyF7sjFbvUNaX1dxoqxSKTA3jTfhRcEMdaDbjcOml7+PQLeebzeDoCzAPmma+uq2cGvPPMotJ2DTqU6o9pWqzp3uc0oX7JI2FKR9BWl1vvXK0iyR+QliGIsDhc/ZXJNNFn5/sJaARnXFstdnFC/irPrZXWj6l47HawTlkQOP+9+gJ4Ev6m1JPe2JdcMCoXVLzKHYSrhFMxWK/BfkQqSWUFW1qxzGPKToAc6GHQSJJl2U0VOF28MUPu2EBzIUz7YxlthN0CwvlQcxLM6D9QgI6HBZaf4QanNs6+wxPBuakSdsHi54sLoDb1OmmTH15Ipxpivse3F4cAM8l+e+pQCo/BxCWEaJjddimlPCM2c3Pdepa3e8lPc/erg16Jq3jwZns7dt2l+/ToQgaVIF5x0SxFWhRFM+3cZyU0gsthvuEMVXzdrgVd5Z8O/u+QBCbGbostM50zFaTo995acGlg3qnEroxqUu/bbQ6fsH5g4loCBMnINO3T3F9jlGuA6KS4Ko/bFXskX8tFzoFo0I2WlR/Bg0FQM5+v9mTOTDzdNIkFgODgcoeyAs/mh8ViRz08vEdqfZdd3TegDGlGEEO6CN5K0rr2KCGCxHSy9LmArI6YwlTRtyApFzt2QhZwB8RT7EVeNqCS4i5ZaGWSXvSTP8YlFQCQ63t72GUutTjcr5tgfmE6a+AKKLjjhZ2pK5wdZ/kGAZGdFRIzLgohHjolQGc3PDlqGUkQnQhnobYoJ9UuMTnRqQxPe3eCHcXT9ssISyM8hKbrDDK7eAYmubPXwwVHU3aB6uj+iDPQAC6bkbnjgeeaPfv11A8YCPlPQ85XuMJcdajb7hzOLAvzciqjCOIfR0yeFmwtlBeabKdBE5Lncst/UGMaDRZzywYCXVTAerI/58F7CoJa4HXZBKl9Mnmjq4RZYh7VdpP+iz0xxLK999scv6nWSR/MjiA67unoFGZWiRecAUCCEeXAsMjhnhAjc00r3N3xcV446NGUUYL+KOGGUn6iHNvBmabiQVUi0pUgQV4XLQFCAtrmmWTW8KQf1tdaTOyHRZFk9qvcWmxPrajEljFzmfwlmWyskwrzylWsFfeJKSRtmOIIf4Q2vo0A3OYPJBecTImfhG5RtjHvJomNb7LobC6ITGkb05MejJ+xoQw+6AXwZVvTojiBNPEYkVdkHvu7gziNlvTzcEArvtDAuhSL6dRJmFkyfkaQkH0g/QXPP+2qUXqrpYgYKhwO5QISfy4tPC9ukKJcvXEqwa6XzRdvx6pPqC9O0ngBoPbjWvnamg5oHuZQZt0PUrlYCQKVnpeCE7EFKAnrUZJML2fsHYVP7pguJxuhK9zJtRbv5PDQxLcw/ZBhPIt8HzyM1ayDLIKf1GcbgyDSofR5NKdAE9YsbiRNXjiG0TZZ2f5Z6nKa23bQ+Q3E7JuxAMLH3mbdeg5fETZnG2H9Mt5FPZlS4Ix8SKzw+bd1kJsvmfFILdCihOoPuJ6249yag0jfJi9rZ+2KIqHLqZ/5Jm3s6AQKgyzTJ/RzuXGNS2pX3QsPzeHOGrpx6pax7o9D57ToUtaKC2Sn/m+XjM+0xp2QYoS+yAAhZ0fYOyyF+skLwWn8Ad974jaV0S/WAncZj4V7jdMTf0zuqBo/C6xXqcbgSF2pzdzzjhDWV00NvKSPH81hvIq1IB8hC9NQGTD+qKEWUkSqFiOIEsCuUxFN651IJyUUivJoTUEADIRUeDkvpbNXUesmOH0hN4C2nUSdP1PFWYYsduxhowglKKaX4RTHDMx2NAs6JRUpx83JSftuwMNd2TC8zKgz53kh/tBFIYK14w2E2J0loZWmNUw3vryVjkvoXuKjX/AFb7/vP/7yv//4N\x27)))));','env','LC_ALL','exec','php\x20-r\x20\x22','licensed','error','Zulu\x20is\x20not\x20licensed!','_loadPBX','readFileSync','utf8','version','_loadNodeVersion','parse','/package.json','connect','config','kvstore','astman','_astmanReemitWithActionID','_setupDBPool','startVisitor','system','startup','versions:\x20','Error\x20starting\x20FreePBX\x20adapter','nodeServerVersion','screensharing','14.0','connection','_dbPoolConnection','enqueue','_dbPoolEnqueue','release','_dbPoolRelease','getConnection','_dbPoolAcquire','debug','DB\x20connection\x20','threadId','\x20made','\x20released','dbQuery','Promise','\x27\x20with\x20params:\x20','stringify','Executing\x20SQL\x20\x27','query','getConfig','ZULU_SHOULD_HTTPS','configs','actionid','emit','event','toLowerCase','astmanAddListener','Adding\x20Asterisk\x20Manager\x20listener\x20for\x20\x27','astmanRemoveListener','Removing\x20Asterisk\x20Manager\x20listener\x20for\x20\x27','removeListener','astmanAction','action','astmanDBGet','removeAllListeners','dbgetresponse-','No\x20response\x20received!','val','DBGet','kvGet','noid','Getting\x20value\x20of\x20','kvSet','Setting\x20','\x20to\x20','setConfig','kvDel','Deleting\x20value\x20of\x20','delConfig','newSessionAPI','SessionAPI','defineProperty','auto-bind','chokidar','websocket','unix-timestamp','crypto','round','_sessionManager','_apiProxy','_webServer','_webSocketServer','_platform','SessionManager','ZULUBINDPORT','ZULUBINDADDRESS','ZULUTLSPRIVATEKEY','ZULUTLSCERTFILE','cert.pem','statSync','key.pem','constants','SSL_OP_NO_TLSv1','proxyRes','_apiProxyRequest','_apiProxyError','_webServerRequest','watch','change','context','setCert','_sharedCreds','_asteriskProxy','createProxyServer','asterisk','wss','://127.0.0.1:','port','_asteriskProxyError','upgrade','request','_webSocketServerRequest','DELETE\x20FROM\x20zulu_tokens\x20WHERE\x20token\x20!=\x20\x27dev\x27','Client\x20WSServer\x20is\x20listening\x20on\x20','isSessionDefined','getSession','getAllSessions','Asterisk\x20proxy\x20error','end','_webServerUpgrade','url','/ws','test','method','OPTIONS','_setCORS','writeHead','api','/admin/ajax.php?','&module=zulu&command=api&query=','ssl','https','http','write','API\x20proxy\x20error','setHeader','Access-Control-Allow-Origin','headers','access-control-request-method','access-control-allow-methods','access-control-request-headers','access-control-allow-headers','resource','origin','key','remoteAddress','\x20[CLIENT]\x20[',']\x20connected','createSession','message','_webSocketServerMessage','_webSocketServerClose','authenticated','_webSocketServerAuthenticate','Error\x20authenticating\x20client\x20websocket','_webSocketServerBinaryMessage','drop','command','login','CLOSE_REASON_POLICY_VIOLATION','Authenticate\x20the\x20user\x20before\x20attempting\x20to\x20executing\x20commands',']\x20No\x20Login\x20credentials\x20provided\x20to\x20execute\x20command\x20','\x20from\x20','warn',']\x20Authentication\x20failure\x20for\x20NA\x20from\x20','data','auth','plaintext','lastConnected','lastconnected','now','clientVersion','clientversion','1.0','clienttype','unknown','token','Unknown\x20authentication\x20type','authenticate','apps','appdata','uid','login_token','user','username','sendJSON','contactuuid','status','appData','presence','ucpLink','PBXBrand','featureSet','uniqueServerid','callStatus','deploymentID','zuluModuleVersion','ws::connected','_webSocketServerUTFMessage','utf8Data','CLOSE_REASON_UNPROCESSABLE_INPUT','type','ping','SERVER\x20<=\x20[CLIENT]\x20',']\x20[','sendError','Invalid\x20command','module','Event\x20\x27','invalid\x20command','Session\x20','\x20does\x20not\x20exist','DELETE\x20FROM\x20zulu_tokens\x20WHERE\x20`uid`\x20=\x20?\x20AND\x20`websocket_session`\x20=\x20?\x20AND`token`\x20=\x20?','ws::disconnected',']:\x20disconnected.','clearSession','events','uuid/v4','lodash','_token','_api','ws::message::getSession','bind','_dropSession','_getAllSessions','ws::message::sendEventToClientsByZuluID','_sendEventToClientsByZuluID','_mobileNotificationsAPI','zid','forEachOf','toString','Sending\x20event\x20of\x20type\x20\x27','\x27\x20to\x20','sendEventToClientsByZuluID\x20error','No\x20Session\x20with\x20this\x20ID\x20[','sessionid','No\x20Session\x20with\x20this\x20ID','connected','clientType','sendTrue','ZULUCOMMANDBINDPORT','ZULUCOMMANDTOKEN','127.0.0.1','The\x20cert\x20or\x20key\x20is\x20not\x20accessible.','createServer','server','BackendInteractionAPI','BackendMobileNotificationsAPI','listen','Backend\x20WSServer\x20is\x20listening\x20on\x20','\x20on\x20port\x20','Error\x20starting\x20backend\x20listeners','Connection\x20from\x20origin\x20','\x20rejected\x20to\x20command\x20server.','accept','requestedProtocols','\x20[BACKEND]\x20[','close','binary','Invalid\x20Login\x20credentials','SERVER\x20<=\x20[BACKEND]\x20[','ws::message::','\x27\x20has\x200\x20listeners.\x20Command\x20was\x20rejected','[CLIENT]\x20[','winston','util','Logger','transports','object','keys','length','meta','getMilliseconds','slice','toLocaleDateString',']\x20console\x20-\x20','development','configure','silly','stack','colorize','level','toUpperCase',']\x20-\x20','NODE_ENV','_module','hasFeature','Call','Config','Chat','Contacts','ContactManager','Fax','Ping','Presence','Sms','Mobile','Voicemail','Screensharing','Error\x20loading\x20modules','trackingID','production','UA-132269789-3','SERVER_UUID','serveruuid','server-uuid-not-set','customcid','BROWSER_STATS','visitor','sendEvent','GA\x20event\x20error:\x20','sendTiming','BaseAPI','options','X-AUTH-TOKEN','_version','X-CLIENT-VERSION','loginPlaintext','/user/login/plaintext','body','loginToken','postResource','/user/login/token','getResource','/user/config','/contactmanager/','/avatar','getLegacyContacts','/contactmanager','getLegacyContactImage','/image','getContacts','contact','sendFax','fax','setDeviceToken','getPresenceStateList','/presencestate/list','get','states','setPresenceState','presencestate/set','sendSMS','sms','getAllSmsDids','dids','sessions','Session\x20already\x20exists!','Session','Trying\x20to\x20delete\x20an\x20untracked\x20session','Plaintext','session','password','platform','userevent','OBFUSCATED','SERVER\x20<=\x20[CLIENT]\x20[',']\x20Connection\x20has\x20been\x20previously\x20dropped\x20because:\x20','closeDescription','Connection\x20has\x20been\x20previously\x20dropped\x20because:\x20',']\x20Authentication\x20failure\x20from\x20','authentication-failed','isObject','Invalid\x20response\x20from\x20server','authentication-success','Token',']\x20Invalid\x20token\x20from\x20',']\x20Authentication\x20failure\x20for\x20unknown\x20from\x20','Invalid\x20Token','getContactIDByCallerID','interaction/contact/zid/','/cid/','getContactIDsByCallerID','/cid','getContactIDByZuluID','interaction/contact/zid','getInteractionIDByZuluIDCallerIDs','interaction/interaction/zid/','getInteractionIDByZuluIDs','getInteractionByCallerIDs','interaction/interaction/cid','getInteractionByID','interaction/','addStreamToInteraction','/mid/','/stream','/streams','isUserDialedWithFeatureCode','/userfcdialed','updateBodyStream','putResource','/stream/','addMemberToInteraction','/member/','clearAllConferences','interaction/stream/conference/clear','findPrivateRoomForCallerIds','interaction/group/cid','BackendAPI','sendMobileCallNotification','Sending\x20call\x20push\x20notification\x20to\x20','mobile/incoming/','sendMobileVoicemailNotification','Sending\x20voicemail\x20push\x20notification\x20to\x20','mobile/voicemail/','sendMobileChatNotification','mobile/chat/','sendMobileMissedCallNotification','sendMobileCallCanceledNotification','Sending\x20callCanceled\x20push\x20notification\x20to\x20','mobile/callcanceled/','getMobileTokens','Getting\x20mobile\x20tokens\x20of\x20','mobile/tokens/','getNotifyTokenByVoipToken','Getting\x20notify\x20token\x20of\x20','\x20for\x20voip\x20token\x20','mobile/notifyToken/','?voipToken=','async','_Zulu','_ClientServer','_BackendServer','actionidmap','callStates','zuluBridge','ws::message::push::call','ws::message::subscribe::call','callSubscribe','ws::message::unsubscribe::call','callUnsubscribe','ws::message::push::conference','createConferenceNumber','callConference','CallConference','_callManager','CallManager','callProcessing','callPresence','sendCallPresenceNotification','subscribeToCallChanges','Call\x20Event\x20of\x20\x27','\x27\x20from\x20','from','calleridname','calleridnum','>\x20to\x20','inbound','isNil','interactionid','_sendCallEventToClient','default_extension','subscription','No\x20notification\x20sent\x20for\x20call\x20to\x20','\x20as\x20there\x20are\x20no\x20sessions\x20set\x20with\x20that\x20default\x20extension','Missing\x20parameters','getConferenceNumber','A\x20conference\x20number\x20','Error\x20creating\x20conference\x20number','callOut','number','replace','originate','Local/','Zulu\x20Outbound\x20Call\x20<','true','response','Success','Unknown\x20dialout\x20error','Empty\x20Response','Empty\x20response','Error\x20originating\x20call','To\x20Number\x20not\x20defined','Number\x20was\x20not\x20defined','sendCallPresenceNotification(','getToNum','getContactuuidByExtension','IDLE','getUserCallStatusSettings','state','callerid','getToName','RINGING','CALLING','getFromName','callername','eachSeries','Error\x20sending\x20call\x20presence\x20notification','turnUpdateSettings','Error\x20updating\x20TURN\x20settings','ws::message::pull::config','configPull','ws::message::turnSettings','timeToLiveMillis','Error\x20handling\x20TURN\x20server\x20update','turnSettings\x20could\x20not\x20establish\x20timeToLiveMillis','getTurnSettings','map','getIceUserSettings','_user','stunSetting','pick','turnServers','stunServers','all','DASHBOARD_FREEPBX_BRAND','startChat','onClose','getChatSession','sendFalse','ws::message::push::sendMessage','rpc','ws::message::push::sendTypingIndication','indexOf','chat','Chat\x20is\x20disabled\x20for\x20','chatSessions','Chat\x20find\x20chat\x20session\x20by\x20token','Cant\x20run\x20RPC\x20against\x20missing\x20chat\x20session','Running\x20command\x20for\x20data','Session\x20has\x20no\x20token','each','Cant\x20get\x20all\x20sessions','Removed\x20session\x20from\x20collection','ws::message::pull::useravatar','userAvatar','contactImage','ws::message::pull::contacts','contacts','getContactAvatar','image','mime','No\x20Image','Error\x20getting\x20contact\x20avatar','Error\x20getting\x20legacy\x20contacts','did','Error\x20getting\x20legacy\x20contact\x20image','promisify','readFile','usereventfn','ws::message::unsubscribe::fax','faxUnsubscribe','ws::message::subscribe::fax','faxSubscribe','ws::message::push::fax','ws::message::fax-out','has','data.faxid','monitor','faxid','fax-out','Outbound\x20Fax\x20Event\x20event\x20from\x20user\x20','\x20to\x20did\x20','dest','outbound','saveFaxInteraction','sendSubscription','fax-in','Inbound\x20fax\x20event\x20from\x20','callid','file','files','application/pdf','reject','Invalid\x20callerid\x20format','dir','pages','new','finished','pid','channel','base64','getCallerIDInfo','FAX','undefined','fine','recipientname','myname','mytelephone','myemail','fail','Session\x20id\x20of\x20outgoing\x20fax\x20is:\x20','pingPong','pong','ws::message::push::presence','setPresence','ws::message::pull::presence','getPresence','ws::message::pull::presencestates','presenceStates','ws::message::pull::userpresence','userPresence','presenceSubscribe','ws::message::unsubscribe::presence','presenceUnsubscribe','_onStatusChange','exten','Presence\x20status\x20change\x20for\x20','presence::status-changed','Failed\x20to\x20get\x20ContactId','presencestate','CustomPresence:','sid','No\x20valid\x20extension','getDevicePresence','presencemessage','didSessionMap','sessionDidMap','ws::message::unsubscribe::sms','smsUnsubscribe','ws::message::subscribe::sms','smsSubscribe','ws::message::pull::smsdids','send','logout','push','splice','Error\x20processing\x20SMS\x20DIDs\x20on\x20logout','sms-outbound','New\x20outbound\x20SMS\x20from\x20','getOwners','sms-inbound','New\x20inbound\x20SMS\x20from\x20','Sending\x20SMS\x20Event\x20','time','out','smsdids','getAllDids','getSmsOwners','\x20and\x20','getMetadata','success','Saving\x20SMS\x20stream\x20between\x20',')\x20and\x20','SMS','ws::message::push::deviceToken','Setting\x20device\x20token\x20of\x20','sendContacts','3.0.0','listContacts','isArray','Not\x20a\x20valid\x20array!','messagewaiting','messagewaitingfn','mailbox','split','messagewaitingfn(','getVoicemailMessages','find','callerchan','msg_id','\x20missing\x20callerid\x20information','saveVoicemailStream','sendVoicemailPushNotification','noop','forEachOfSeries','voicemail::message-waiting','Saving\x20voicemail\x20stream\x20','saveStream','uniqueid','linkedid','interaction','VOICEMAIL','mobileNotificationsAPI','ws::message::push::screensharing','joinSession','ws::message::unsubscribe::screensharing','_ScreensharingServer','createRoom','users','screensharing-invite','roomId','roomid','No\x20room\x20id\x20was\x20provided','capabilities','offer','isPlanB','role','USER\x20CAPABILITIES:','sendOffer','answer-','Offer\x20timed\x20out','joinRoom','Could\x20not\x20join\x20room\x20or\x20room\x20does\x20not\x20exist','leaveSession','Could\x20not\x20leave\x20room\x20or\x20room\x20does\x20not\x20exist','onAnswer','ANSWER\x20DATA:','answer','sdp','No\x20valid\x20answer\x20was\x20provided','PORTS','zulu','bindAddress','0.0.0.0','https://','API\x20<=\x20[POST]\x20[','uri','hrtime','API\x20=>\x20[POST]\x20[',']:\x20(','statusCode',']:\x20received\x20a\x20','statusMessage','GET','API\x20=>\x20[GET]\x20[','API\x20<=\x20[PUT]\x20[','PUT','API\x20=>\x20[PUT]\x20[','deleteResource','API\x20<=\x20[DELETE]\x20[','API\x20=>\x20[DELETE]\x20[','\x20ms)\x20','patchResource','API\x20<=\x20[PATCH]\x20[','PATCH','API\x20=>\x20[PATCH]\x20[','_connected','_lastConnected','_contactuuid','_uid','_appData','_authenticated','_apps','_clientVersion','_clientType','SERVER\x20=>\x20[CLIENT]\x20[','BaseSession','SERVER\x20=>\x20[BACKEND]\x20[','X-SERVER-TOKEN','sendNotificationEmail','/email/notify','getUserByUsername','/voicemail/','body.voicemail.messages','/user/','/callstatus','body.owners','No\x20sms\x20for\x20did:\x20','getRecordingFile','body.recording.recordingfile','?forceRefresh','/user/config/turnsettings','body.turncred','/icesettings','clone','NOANSWER','ANSWERED','TRANSFERED','<unknown>','outgoing','s-NOANSWER','channelPattern','_ZuluBridge','channelMap','zuluIDMap','CallCollection','dbgetresponse','dbgetfn','blindtransfer','blindTransferfn','attendedtransfer','attendedTransferfn','dialbegin','setdialfn','newstatefn','hangup','hangupfn','varsetfn','newchannel','newchannelfn','ws::message::mergeCalls','mergeCalls','assign','mergeCalls(','findChannelsByZuluIds','findCallsForChannels','reduce','Merging\x20not\x20supported\x20for\x20call\x20','join','isNWayCall','filter','promoteToNWayCall','head','tail','flatMap','includes','state.channel','value','transferToNWay','conferenceNumber','Error\x20merging\x20calls','Internal\x20server\x20error','canPromoteToNWay','size','channels','Rejecting\x20N-way\x20call\x20for\x20',':\x20Cannot\x20merge\x20calls\x20to\x20applications',':\x20Cannot\x20merge\x20calls\x20that\x20are\x20already\x20conferenced','promoteToNWayCall(','chunk','transferToNWay(','state.calleridnum','interactionId','transferToConference','transferToConference(','amiRedirect','findPrivateRoomForCallerIds(','parseCallerId','parseCallerId(','variables','FROMEXTEN','ZULU_EXTTOCALL','from-pstn','variables.FROMEXTEN','macro-dialout-trunk','variables.DIAL_NUMBER','state.linkedid','forEach','zulu-id\x20not\x20found\x20','variable','match','setVariable','getChannel','ZULU_ID','startsWith','local','newchannelfn(','zulu-mobile-phone-push','RING','mobileans','callerChannel','getCall','lookupNumber','setExten','setAnswerChannel','setToNum','getAnsweree',':\x20Call\x20from\x20','\x20mobile\x20device)','removeDialing','sendCallPresence','INCALL','triggerZuluNotification','answered','createCall','setAnsweredApp','usereventfn(','zulu-inbound-call','Unable\x20to\x20find\x20inbound\x20call\x20','connectedlinename','UNKNOWN','setToName','Unable\x20to\x20find\x20call\x20','extension','setZuluVariable','cnam','ascii','cnum','setFromName','transfererlinkedid','transfereruniqueid','Channel\x20','\x20does\x20not\x20exist!','getVariable','endCall','transfereecalleridname','transfereeuniqueid','Unable\x20to\x20follow\x20blind\x20transfer!','origtransfererlinkedid','origtransfereruniqueid','transfertargetlinkedid','transfertargetuniqueid','transfertargetcalleridnum','transfereecalleridnum','transfertargetcalleridname','createChannel','setTimestamp','setAnsweredFlag','Unable\x20to\x20follow\x20attended\x20transfer!','setdialfn(','setDialing','Initiating\x20a\x20New\x20Call\x20to\x20','destcalleridnum','getFromNum','addDialing','destchannel','Unable\x20to\x20parse\x20','\x20for\x20channel\x20tracking!','destuniqueid',']\x20for\x20EXTEN\x20from\x20channel!','new\x20state\x20(','):\x20up=','channelstate','\x20isDialing=','\x20inDialing(','inDialing','isDialing','getExten','\x20was\x20answered\x20by\x20','Call\x20from\x20','addRingingExtension','hangupfn(','isAnswerChannel','pickBy','isAnswered','missed','getLinkedid','wasNotified','Rejecting\x20call\x20notification\x20to\x20client\x20as\x20previous\x20notification\x20already\x20sent','setNotification','endCall(uniqueid\x20=\x20','MODIFY_CALL','FROM_NAME','TO_NAME','TO_NUM'];(function(_0x1dc163,_0x395a77){var _0x59659c=function(_0x1e3134){while(--_0x1e3134){_0x1dc163['push'](_0x1dc163['shift']());}};_0x59659c(++_0x395a77);}(_0x10a5,0x163));var _0x510a=function(_0x2e76a7,_0x23871a){_0x2e76a7=_0x2e76a7-0x0;var _0x454cde=_0x10a5[_0x2e76a7];return _0x454cde;};(function(){var _0x5e4b0d={},_0x1071d0={},_0x5f1f6b={};function _0x59c414(_0x342987,_0x232552){if(!_0x5f1f6b[_0x342987]){_0x1071d0[_0x342987]={'exports':{},'loaded':![]};_0x5f1f6b[_0x342987]=!![];if(_0x342987===0x0&&typeof require===_0x510a('0x0')){require[_0x510a('0x1')]=_0x1071d0[0x0];}else{_0x1071d0[_0x342987][_0x510a('0x2')]=_0x1071d0[_0x232552];}_0x5e4b0d[_0x342987][_0x510a('0x3')](this,_0x1071d0[_0x342987],_0x1071d0[_0x342987][_0x510a('0x4')]);_0x1071d0[_0x342987][_0x510a('0x5')]=!![];}return _0x1071d0[_0x342987][_0x510a('0x4')];}function _0x457b21(_0x4bdf71){return require('path')[_0x510a('0x6')](__dirname+'/'+_0x4bdf71);}function _0x1639dc(_0x149a3d){return require(_0x510a('0x7'))[_0x510a('0x6')](__dirname+'/'+_0x149a3d+_0x510a('0x8'));}_0x5e4b0d[0x0]=function(_0x365dce,_0x350246){'use strict';require(_0x510a('0x9'));var _0x4e8123=_0x59c414(0x1,0x0);var _0xa27a30=_0x25facc(_0x4e8123);var _0x2774c3=_0x59c414(0x2,0x0);var _0x554bb1=_0x25facc(_0x2774c3);var _0x20ffb7=_0x59c414(0x3,0x0);var _0x455a88=_0x25facc(_0x20ffb7);var _0x17cbcd=_0x59c414(0x4,0x0);var _0x40798f=_0x25facc(_0x17cbcd);var _0x3d34db=_0x59c414(0x5,0x0);var _0x34a844=_0x25facc(_0x3d34db);function _0x25facc(_0x44b141){return _0x44b141&&_0x44b141['__esModule']?_0x44b141:{'default':_0x44b141};}global[_0x510a('0xa')]=_0x1639dc(_0x510a('0xb'));var _0x502a54=async function(){const _0x494b03=new _0xa27a30['default']();await _0x494b03[_0x510a('0xc')]();await _0x554bb1[_0x510a('0xd')][_0x510a('0xe')](_0x494b03);const _0x117e1b=new _0x455a88[(_0x510a('0xd'))]();await _0x117e1b[_0x510a('0xe')](_0x494b03);await _0x34a844['default'][_0x510a('0xf')](_0x494b03,_0x117e1b);};_0x502a54()[_0x510a('0x10')](()=>{_0x40798f['default'][_0x510a('0x11')](_0x510a('0x12'));return null;})[_0x510a('0x13')](_0x4f9ded=>{_0x40798f[_0x510a('0xd')]['error'](_0x510a('0x14'),_0x4f9ded);process[_0x510a('0x15')](-0x1);});return _0x365dce[_0x510a('0x4')];};_0x5e4b0d[0x1]=function(_0x22ff84,_0x2745c0){'use strict';Object['defineProperty'](_0x2745c0,_0x510a('0x16'),{'value':!![]});var _0x339f84=require('fs');var _0x3341dc=_0x1a8866(_0x339f84);var _0x278480=require(_0x510a('0x17'));var _0x1311ef=_0x1a8866(_0x278480);var _0x5b24fb=require(_0x510a('0x18'));var _0x4ee01f=_0x1a8866(_0x5b24fb);var _0xc23844=require(_0x510a('0x19'));var _0x1bd848=require('uuid/v4');var _0x171cfb=_0x1a8866(_0x1bd848);var _0x215775=_0x59c414(0x4,0x1);var _0x5e923e=_0x1a8866(_0x215775);var _0xab5f53=require('events');var _0xeb0333=_0x59c414(0x6,0x1);var _0x26bcf1=_0x1a8866(_0xeb0333);var _0x455457=require(_0x510a('0x1a'));var _0x1acfac=_0x1a8866(_0x455457);var _0x172efd=_0x59c414(0x7,0x1);function _0x1a8866(_0x197da9){return _0x197da9&&_0x197da9[_0x510a('0x16')]?_0x197da9:{'default':_0x197da9};}const _0x26b4f8=_0x510a('0x1b');class FreePBX extends _0xab5f53[_0x510a('0x1c')]{constructor(){super();this[_0x510a('0x1d')]=null;this[_0x510a('0x1e')]=null;this[_0x510a('0x1f')]=null;this[_0x510a('0x20')]=null;this[_0x510a('0x21')]=null;this[_0x510a('0x22')]=null;this[_0x510a('0x23')]=null;}async[_0x510a('0xc')](){this[_0x510a('0x24')]();this['_loadNodeVersion']();const _0x340fef=_0x510a('0x25');const _0x48f9eb=process[_0x510a('0x26')][_0x510a('0x27')]||'';process['env'][_0x510a('0x27')]='C';const _0x2cbac5=await _0x4ee01f[_0x510a('0xd')][_0x510a('0x28')](_0x510a('0x29')+_0x340fef+'\x22');process[_0x510a('0x26')][_0x510a('0x27')]=_0x48f9eb;if(!_0x2cbac5[_0x510a('0x2a')]){_0x5e923e[_0x510a('0xd')][_0x510a('0x2b')](new Error(_0x510a('0x2c')));process[_0x510a('0x15')](-0x1);}return this[_0x510a('0x2d')]();}[_0x510a('0x24')](){let _0x11eb4d=_0x3341dc[_0x510a('0xd')][_0x510a('0x2e')](global[_0x510a('0xa')]+'/../module.xml',_0x510a('0x2f'));let _0x2a45c1=_0x1311ef['default']['parse'](_0x11eb4d);this['_pbxServerVersion']=_0x2a45c1['getChildText'](_0x510a('0x30'));}[_0x510a('0x31')](){let _0x12800e=JSON[_0x510a('0x32')](_0x3341dc['default'][_0x510a('0x2e')](global[_0x510a('0xa')]+_0x510a('0x33')));this[_0x510a('0x1d')]=_0x12800e['version'];}async[_0x510a('0x2d')](){try{const _0x3c9cc5=await _0x4ee01f[_0x510a('0xd')][_0x510a('0x34')]();this[_0x510a('0x1f')]=_0x3c9cc5[_0x510a('0x30')];this[_0x510a('0x22')]=_0x3c9cc5[_0x510a('0x35')];this[_0x510a('0x23')]=_0x3c9cc5[_0x510a('0x36')];this[_0x510a('0x21')]=_0x3c9cc5[_0x510a('0x37')];this[_0x510a('0x38')]();await this[_0x510a('0x39')](_0x3c9cc5['db']);_0x26bcf1[_0x510a('0xd')][_0x510a('0x3a')](this[_0x510a('0x22')]);_0x26bcf1['default']['sendEvent'](_0x510a('0x3b'),_0x510a('0x3c'),_0x510a('0x3d')+this[_0x510a('0x1e')]+',\x20'+this[_0x510a('0x1d')]);}catch(_0x2ef0eb){_0x5e923e[_0x510a('0xd')]['error'](_0x510a('0x3e'),_0x2ef0eb);throw _0x2ef0eb;}}get[_0x510a('0x3f')](){return this[_0x510a('0x1d')];}get[_0x510a('0x30')](){return this[_0x510a('0x1e')];}['hasFeature'](_0x2314e0){switch(_0x2314e0){case _0x510a('0x40'):return(0x0,_0x1acfac['default'])(this[_0x510a('0x1f')],_0x510a('0x41'),'>=');default:return!![];}}['_setupDBPool'](_0x3eaf25){this[_0x510a('0x20')]=_0x3eaf25;this[_0x510a('0x20')]['on']('acquire',this['_dbPoolAcquire']);this['_db']['on'](_0x510a('0x42'),this[_0x510a('0x43')]);this[_0x510a('0x20')]['on'](_0x510a('0x44'),this[_0x510a('0x45')]);this[_0x510a('0x20')]['on'](_0x510a('0x46'),this[_0x510a('0x47')]);return new _0xc23844['Promise']((_0x46182f,_0x194c1b)=>{this[_0x510a('0x20')][_0x510a('0x48')]((_0x25b411,_0x1c4eaf)=>{if(_0x25b411){return _0x194c1b(_0x25b411);}_0x1c4eaf['release']();_0x46182f();});});}[_0x510a('0x49')](_0x54cda2){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x4b')+_0x54cda2[_0x510a('0x4c')]+'\x20acquired');}[_0x510a('0x43')](_0x486c92){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')]('DB\x20connection\x20'+_0x486c92[_0x510a('0x4c')]+_0x510a('0x4d'));}[_0x510a('0x45')](){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')]('Waiting\x20for\x20available\x20DB\x20connection\x20slot');}[_0x510a('0x47')](_0x474d1c){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x4b')+_0x474d1c[_0x510a('0x4c')]+_0x510a('0x4e'));}[_0x510a('0x4f')](_0x299f63,_0x4c3fe5){return new _0xc23844[(_0x510a('0x50'))]((_0x2ee890,_0x5b00f5)=>{this[_0x510a('0x20')]['getConnection']((_0x5b291a,_0x3ae791)=>{if(_0x5b291a){return _0x5b00f5(_0x5b291a);}if(_0x4c3fe5){_0x5e923e['default'][_0x510a('0x4a')]('Executing\x20SQL\x20\x27'+_0x299f63+_0x510a('0x51')+JSON[_0x510a('0x52')](_0x4c3fe5));}else{_0x5e923e[_0x510a('0xd')]['debug'](_0x510a('0x53')+_0x299f63+'\x27');}_0x3ae791[_0x510a('0x54')]({'sql':_0x299f63,'values':_0x4c3fe5},(_0x35d83a,_0x4c8053,_0x5bdf78)=>{if(_0x35d83a){return _0x5b00f5(_0x35d83a);}_0x3ae791[_0x510a('0x46')]();_0x2ee890(_0x4c8053);});});});}[_0x510a('0x55')](_0xb7266){switch(_0xb7266){case _0x510a('0x56'):return!![];default:_0x5e923e[_0x510a('0xd')]['debug']('Getting\x20PBX\x20Config\x20for\x20key\x20\x27'+_0xb7266+'\x27');return _0xc23844['Promise'][_0x510a('0x6')](this[_0x510a('0x22')][_0x510a('0x57')][_0xb7266]);}}[_0x510a('0x38')](){this[_0x510a('0x21')]['on']('managerevent',_0x1cc34a=>{if(_0x1cc34a[_0x510a('0x58')]){this[_0x510a('0x59')](_0x1cc34a[_0x510a('0x5a')][_0x510a('0x5b')]()+'-'+_0x1cc34a[_0x510a('0x58')],_0x1cc34a);}});}[_0x510a('0x5c')](_0x1ce178,_0x66642e){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x5d')+_0x1ce178+'\x27');this[_0x510a('0x21')]['on'](_0x1ce178,_0x66642e);}[_0x510a('0x5e')](_0x43f9b9,_0x5d6b1f){_0x5e923e[_0x510a('0xd')]['debug'](_0x510a('0x5f')+_0x43f9b9+'\x27');this[_0x510a('0x21')][_0x510a('0x60')](_0x43f9b9,_0x5d6b1f);}[_0x510a('0x61')](_0x3327e0){_0x5e923e[_0x510a('0xd')][_0x510a('0x4a')]('Running\x20Asterisk\x20Manager\x20Action\x20'+JSON[_0x510a('0x52')](_0x3327e0));return new _0xc23844[(_0x510a('0x50'))]((_0x257426,_0x42fab9)=>{this[_0x510a('0x21')][_0x510a('0x62')](_0x3327e0,function(_0x1c175a,_0x303c80){if(_0x1c175a){if(_0x1c175a['message']){return _0x42fab9(new Error(_0x1c175a['message']));}else{return _0x42fab9(new Error('Unknown\x20error'));}}return _0x257426(_0x303c80);});});}[_0x510a('0x63')](_0x4ffcfe,_0x13da63){return new _0xc23844[(_0x510a('0x50'))]((_0x516acc,_0x29c478)=>{let _0x5c1c2e=(0x0,_0x171cfb[_0x510a('0xd')])();let _0x28231e=setTimeout(()=>{this[_0x510a('0x64')](_0x510a('0x65')+_0x5c1c2e);_0x29c478(new Error(_0x510a('0x66')));},0x7d0);this['on'](_0x510a('0x65')+_0x5c1c2e,_0x5b04c1=>{clearTimeout(_0x28231e);this[_0x510a('0x64')](_0x510a('0x65')+_0x5c1c2e);_0x516acc(_0x5b04c1[_0x510a('0x67')]);});this[_0x510a('0x61')]({'action':_0x510a('0x68'),'actionid':_0x5c1c2e,'family':_0x4ffcfe,'key':_0x13da63})['catch'](_0x14a9cd=>{clearTimeout(_0x28231e);this[_0x510a('0x64')](_0x510a('0x65')+_0x5c1c2e);_0x29c478(_0x14a9cd);});});}[_0x510a('0x69')](_0x5eb1b0,_0x19a1dc=_0x510a('0x6a')){_0x5e923e['default'][_0x510a('0x4a')](_0x510a('0x6b')+_0x26b4f8+'\x5c'+_0x5eb1b0);return this['_kvstore']['getConfig'](_0x26b4f8,_0x5eb1b0,_0x19a1dc);}[_0x510a('0x6c')](_0x57cf28,_0x1522a8,_0x11735c=_0x510a('0x6a')){_0x5e923e[_0x510a('0xd')]['debug'](_0x510a('0x6d')+_0x26b4f8+'\x5c'+_0x57cf28+_0x510a('0x6e')+_0x1522a8);return this[_0x510a('0x23')][_0x510a('0x6f')](_0x26b4f8,_0x57cf28,_0x1522a8,_0x11735c);}[_0x510a('0x70')](_0x3214c1,_0x56078a='noid'){_0x5e923e[_0x510a('0xd')]['debug'](_0x510a('0x71')+_0x26b4f8+'\x5c'+_0x3214c1);return this[_0x510a('0x23')][_0x510a('0x72')](_0x26b4f8,_0x3214c1,_0x56078a);}[_0x510a('0x73')](){return new _0x172efd[(_0x510a('0x74'))]();}}_0x2745c0[_0x510a('0xd')]=FreePBX;return _0x22ff84[_0x510a('0x4')];};_0x5e4b0d[0x2]=function(_0x565fef,_0x483097){'use strict';Object[_0x510a('0x75')](_0x483097,_0x510a('0x16'),{'value':!![]});var _0x409bf9=require(_0x510a('0x76'));var _0x2823e8=_0x58d442(_0x409bf9);var _0x1d1fa8=require(_0x510a('0x19'));var _0x293f42=require('events');var _0x364628=require('fs');var _0x496d58=_0x58d442(_0x364628);var _0x4c026c=require('https');var _0x468f40=_0x58d442(_0x4c026c);var _0x33fc93=require(_0x510a('0x77'));var _0x26a3a8=_0x58d442(_0x33fc93);var _0x281377=require(_0x510a('0x78'));var _0x4b6cd2=require('http-proxy');var _0x33d01e=_0x58d442(_0x4b6cd2);var _0x2582b4=require(_0x510a('0x79'));var _0x3a2f6d=_0x58d442(_0x2582b4);var _0x2d730b=require(_0x510a('0x7a'));var _0x149834=_0x59c414(0x4,0x2);var _0x561b4c=_0x58d442(_0x149834);var _0x51561b=_0x59c414(0x8,0x2);var _0x33462a=_0x59c414(0x9,0x2);var _0x3ea02b=_0x59c414(0xa,0x2);function _0x58d442(_0x120843){return _0x120843&&_0x120843[_0x510a('0x16')]?_0x120843:{'default':_0x120843};}_0x3a2f6d['default'][_0x510a('0x7b')]=!![];const _0x52084f=process['env']['PORTS']?JSON[_0x510a('0x32')](process['env']['PORTS']):{'api':{'port':0x50,'ssl':![]},'asterisk':{'port':0x1f99,'ssl':!![]}};class Client extends _0x293f42[_0x510a('0x1c')]{constructor(){super();this[_0x510a('0x7c')]=null;this[_0x510a('0x7d')]=null;this['_asteriskProxy']=null;this[_0x510a('0x7e')]=null;this[_0x510a('0x7f')]=null;this[_0x510a('0x80')]=null;(0x0,_0x2823e8[_0x510a('0xd')])(this);}[_0x510a('0xe')](_0x3e19e6){return new _0x1d1fa8['Promise']((_0x3f2ee1,_0x415799)=>{let _0x41909b;let _0xf49c4c;this[_0x510a('0x80')]=_0x3e19e6;this[_0x510a('0x7c')]=new _0x51561b[(_0x510a('0x81'))](this['_platform']);return _0x1d1fa8[_0x510a('0x50')]['all']([_0x3e19e6['getConfig'](_0x510a('0x82')),_0x3e19e6[_0x510a('0x55')](_0x510a('0x83')),_0x3e19e6[_0x510a('0x55')](_0x510a('0x84')),_0x3e19e6[_0x510a('0x55')](_0x510a('0x85'))])['then'](_0x5338b8=>{_0x41909b=_0x5338b8[0x0];_0xf49c4c=_0x5338b8[0x1];let _0x4baa69=_0x5338b8[0x2]?_0x5338b8[0x2]:'key.pem';let _0x26fd96=_0x5338b8[0x3]?_0x5338b8[0x3]:_0x510a('0x86');try{_0x496d58[_0x510a('0xd')][_0x510a('0x87')](_0x4baa69);_0x496d58[_0x510a('0xd')][_0x510a('0x87')](_0x26fd96);}catch(_0xc9c49){_0x561b4c[_0x510a('0xd')]['warn']('The\x20cert\x20or\x20key\x20is\x20not\x20accessible.');_0x4baa69=_0x510a('0x88');_0x26fd96=_0x510a('0x86');}const _0x4966cc=_0x496d58[_0x510a('0xd')][_0x510a('0x2e')](_0x4baa69,_0x510a('0x2f'));const _0x43aa77=_0x496d58[_0x510a('0xd')][_0x510a('0x2e')](_0x26fd96,'utf8');const _0x45595a={'key':_0x4966cc,'cert':_0x43aa77,'secureOptions':_0x2d730b[_0x510a('0x89')][_0x510a('0x8a')]};try{this[_0x510a('0x7d')]=_0x33d01e[_0x510a('0xd')]['createProxyServer']({'secure':![],'xfwd':!![]});}catch(_0x402d83){_0x561b4c['default'][_0x510a('0x2b')]('Error\x20creating\x20API\x20proxy',_0x402d83);}this[_0x510a('0x7d')]['on'](_0x510a('0x8b'),this[_0x510a('0x8c')]);this['_apiProxy']['on'](_0x510a('0x2b'),this[_0x510a('0x8d')]);this[_0x510a('0x7e')]=_0x468f40[_0x510a('0xd')]['createServer'](_0x45595a,this[_0x510a('0x8e')]);let _0x58c630;const _0x41248b=_0x26a3a8[_0x510a('0xd')][_0x510a('0x8f')]([_0x4baa69,_0x26fd96])['on'](_0x510a('0x90'),(_0x12a5fb,_0xf81b59)=>{clearTimeout(_0x58c630);_0x58c630=setTimeout(()=>{const _0x5bba5d=_0x496d58['default'][_0x510a('0x2e')](_0x4baa69,'utf8');const _0x42e91a=_0x496d58[_0x510a('0xd')]['readFileSync'](_0x26fd96,_0x510a('0x2f'));this[_0x510a('0x7e')]['_sharedCreds'][_0x510a('0x91')][_0x510a('0x92')](_0x42e91a);this[_0x510a('0x7e')][_0x510a('0x93')][_0x510a('0x91')]['setKey'](_0x5bba5d);},0x3e8);});this[_0x510a('0x94')]=_0x33d01e['default'][_0x510a('0x95')]({'target':(_0x52084f[_0x510a('0x96')]['ssl']?_0x510a('0x97'):'ws')+_0x510a('0x98')+_0x52084f[_0x510a('0x96')][_0x510a('0x99')],'ws':!![],'secure':![]});this[_0x510a('0x94')]['on'](_0x510a('0x2b'),this[_0x510a('0x9a')]);this[_0x510a('0x7e')]['on'](_0x510a('0x9b'),this['_webServerUpgrade']);this['_webSocketServer']=new _0x281377['server']({'httpServer':this[_0x510a('0x7e')],'autoAcceptConnections':![],'maxReceivedFrameSize':0xbebc200});this[_0x510a('0x7f')]['on'](_0x510a('0x9c'),this[_0x510a('0x9d')]);return this['_platform'][_0x510a('0x4f')](_0x510a('0x9e'));})[_0x510a('0x10')](()=>{this[_0x510a('0x7e')]['listen'](_0x41909b,_0xf49c4c,function(_0x1ef172){if(_0x1ef172){return _0x415799(_0x1ef172);}_0x561b4c['default'][_0x510a('0x11')](_0x510a('0x9f')+_0xf49c4c+'\x20on\x20port\x20'+_0x41909b);return _0x3f2ee1();});})[_0x510a('0x13')](_0x293328=>{return _0x415799(_0x293328);});});}[_0x510a('0xa0')](_0x56a9c0){return this[_0x510a('0x7c')][_0x510a('0xa0')](_0x56a9c0);}[_0x510a('0xa1')](_0x4646e3){return this[_0x510a('0x7c')]['getSession'](_0x4646e3);}[_0x510a('0xa2')](){return this[_0x510a('0x7c')][_0x510a('0xa2')]();}[_0x510a('0x9a')](_0x3e5a09,_0x4c31b3,_0x207be2){_0x561b4c[_0x510a('0xd')]['error'](_0x510a('0xa3'),_0x3e5a09);_0x207be2[_0x510a('0xa4')]();}[_0x510a('0xa5')](_0xfd2c8a,_0x22af13,_0x27eca3){if(_0xfd2c8a[_0x510a('0xa6')]===_0x510a('0xa7')){this['_asteriskProxy']['ws'](_0xfd2c8a,_0x22af13,_0x27eca3);}}[_0x510a('0x8e')](_0x45ac30,_0xcf51f5){const _0x525cac=new RegExp(/^\/(api|file)([^?]*)(?:\?(.*))?/);if(_0x525cac[_0x510a('0xa8')](_0x45ac30[_0x510a('0xa6')])){if(_0x45ac30[_0x510a('0xa9')]===_0x510a('0xaa')){this[_0x510a('0xab')](_0x45ac30,_0xcf51f5);_0xcf51f5[_0x510a('0xac')](0xc8);_0xcf51f5['write']('');_0xcf51f5[_0x510a('0xa4')]();}else{const _0x4e8067=_0x525cac[_0x510a('0x28')](_0x45ac30[_0x510a('0xa6')]);const _0xfe4124=_0x4e8067[0x1]!==_0x510a('0xad')?'/'+_0x4e8067[0x1]:'';_0x45ac30['url']=_0x510a('0xae')+(_0x4e8067[0x3]?_0x4e8067[0x3]:'')+_0x510a('0xaf')+_0xfe4124+_0x4e8067[0x2];this[_0x510a('0x7d')]['web'](_0x45ac30,_0xcf51f5,{'target':(_0x52084f[_0x510a('0xad')][_0x510a('0xb0')]?_0x510a('0xb1'):_0x510a('0xb2'))+'://127.0.0.1:'+_0x52084f[_0x510a('0xad')][_0x510a('0x99')]});}}else{_0xcf51f5['writeHead'](0x194);_0xcf51f5[_0x510a('0xb3')]('');_0xcf51f5['end']();}}[_0x510a('0x8d')](_0x2c6ccc,_0x41f782,_0x538b21,_0x3b5392){_0x561b4c[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0xb4'),_0x2c6ccc);try{_0x538b21[_0x510a('0xac')](0x1f4);_0x538b21[_0x510a('0xb3')](_0x2c6ccc['message']);_0x538b21[_0x510a('0xa4')]();}catch(_0x24e475){_0x561b4c[_0x510a('0xd')][_0x510a('0x2b')](_0x24e475);}}['_apiProxyRequest'](_0x2c0beb,_0x477353,_0xf1f711){this[_0x510a('0xab')](_0x477353,_0xf1f711);}[_0x510a('0xab')](_0x7ab9fd,_0x86fe42){_0x86fe42[_0x510a('0xb5')](_0x510a('0xb6'),'*');if(_0x7ab9fd[_0x510a('0xb7')][_0x510a('0xb8')]){_0x86fe42[_0x510a('0xb5')](_0x510a('0xb9'),_0x7ab9fd['headers']['access-control-request-method']);}if(_0x7ab9fd[_0x510a('0xb7')][_0x510a('0xba')]){_0x86fe42[_0x510a('0xb5')](_0x510a('0xbb'),_0x7ab9fd[_0x510a('0xb7')][_0x510a('0xba')]);}}[_0x510a('0x9d')](_0x185876){if(_0x185876[_0x510a('0xbc')]!=='/'){return;}let _0x553eba=null;try{_0x553eba=_0x185876['accept'](_0x185876['requestedProtocols'][0x0],_0x185876[_0x510a('0xbd')]);}catch(_0x52fb42){return;}const _0x4373e9=_0x185876[_0x510a('0xbe')];_0x561b4c['default']['debug'](_0x553eba[_0x510a('0xbf')]+_0x510a('0xc0')+_0x4373e9+_0x510a('0xc1'));this[_0x510a('0x7c')][_0x510a('0xc2')](_0x4373e9,_0x553eba);_0x553eba['on'](_0x510a('0xc3'),_0x1d9c49=>{this[_0x510a('0xc4')](_0x185876,_0x553eba,_0x1d9c49);});_0x553eba['on']('close',(_0x3103d0,_0x725abe)=>{this[_0x510a('0xc5')](_0x185876,_0x553eba,_0x3103d0,_0x725abe);});}['_webSocketServerMessage'](_0x9e1e30,_0x4c4a36,_0x691227){const _0x472d08=_0x9e1e30[_0x510a('0xbe')];const _0x4e10f5=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x472d08);if(!_0x4e10f5[_0x510a('0xc6')]){this[_0x510a('0xc7')](_0x9e1e30,_0x4c4a36,_0x691227)[_0x510a('0x10')](()=>{})[_0x510a('0x13')](_0x3fc4d5=>{_0x561b4c['default']['error'](_0x510a('0xc8'),_0x3fc4d5);});}else{switch(_0x691227['type']){case _0x510a('0x2f'):this['_webSocketServerUTFMessage'](_0x9e1e30,_0x4c4a36,_0x691227);break;case'binary':this[_0x510a('0xc9')](_0x9e1e30,_0x4c4a36,_0x691227);break;default:break;}}}['_webSocketServerAuthenticate'](_0x314cdf,_0x46e1ec,_0x450a39){return new _0x1d1fa8['Promise']((_0x422145,_0x2670ad)=>{const _0x59ee41=_0x314cdf['key'];const _0x3d4463=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x59ee41);let _0xbf777e;try{_0xbf777e=JSON[_0x510a('0x32')](_0x450a39['utf8Data']);}catch(_0x55c6fc){_0x46e1ec[_0x510a('0xca')](_0x46e1ec['CLOSE_REASON_UNPROCESSABLE_INPUT'],_0x55c6fc);return _0x2670ad(_0x55c6fc);}if(!_0xbf777e[_0x510a('0xcb')]||_0xbf777e['command']!==_0x510a('0xcc')){_0x46e1ec[_0x510a('0xca')](_0x46e1ec[_0x510a('0xcd')],_0x510a('0xce'));const _0x3b12e7=_0xbf777e[_0x510a('0xcb')]?_0xbf777e[_0x510a('0xcb')]:'';_0x561b4c[_0x510a('0xd')]['warn']('['+_0x59ee41+_0x510a('0xcf')+_0x3b12e7+_0x510a('0xd0')+_0x46e1ec['remoteAddress']);_0x561b4c[_0x510a('0xd')][_0x510a('0xd1')]('['+_0x59ee41+_0x510a('0xd2')+_0x46e1ec[_0x510a('0xbf')]);return _0x2670ad(new Error(_0x510a('0xce')));}const _0x33520b=_0xbf777e[_0x510a('0xd3')];const _0x3c4c43=_0x33520b[_0x510a('0xd4')]?_0x33520b[_0x510a('0xd4')]:_0x510a('0xd5');let _0x3f1da4=null;_0x3d4463[_0x510a('0xd6')]=_0x33520b[_0x510a('0xd7')]?_0x33520b[_0x510a('0xd7')]:_0x3a2f6d[_0x510a('0xd')][_0x510a('0xd8')]();_0x3d4463[_0x510a('0xd9')]=_0x33520b[_0x510a('0xda')]?_0x33520b[_0x510a('0xda')]:_0x510a('0xdb');_0x3d4463['clientType']=_0x33520b[_0x510a('0xdc')]?_0x33520b[_0x510a('0xdc')]:_0x510a('0xdd');switch(_0x3c4c43){case _0x510a('0xde'):_0x3f1da4=new _0x3ea02b['Token'](_0x46e1ec,_0x3d4463,this[_0x510a('0x80')]);break;case _0x510a('0xd5'):_0x3f1da4=new _0x33462a['Plaintext'](_0x46e1ec,_0x3d4463,this[_0x510a('0x80')]);break;default:_0x46e1ec[_0x510a('0xca')](_0x46e1ec[_0x510a('0xcd')],'Unknown\x20authentication\x20type');return _0x2670ad(new Error(_0x510a('0xdf')));}_0x3f1da4[_0x510a('0xe0')](_0x33520b)[_0x510a('0x10')](_0x40be28=>{_0x3d4463['user']=_0x40be28['user'];_0x3d4463[_0x510a('0xde')]=_0x40be28[_0x510a('0xde')];_0x3d4463['contactuuid']=_0x40be28['uuid'];_0x3d4463[_0x510a('0xe1')]=_0x40be28[_0x510a('0xe1')];_0x3d4463['appData']=_0x40be28[_0x510a('0xe2')];_0x3d4463[_0x510a('0xe3')]=_0x40be28[_0x510a('0xe3')];_0x3d4463[_0x510a('0xe4')]=_0x40be28[_0x510a('0xe4')];_0x561b4c[_0x510a('0xd')][_0x510a('0x11')](_0x3d4463['id']+'\x20has\x20successfully\x20authenticated\x20as\x20user\x20'+_0x3d4463[_0x510a('0xe5')][_0x510a('0xe6')]);_0x3d4463[_0x510a('0xc6')]=!![];_0x3d4463[_0x510a('0xe7')]({'status':!![],'type':_0x510a('0xd4'),'message':_0x510a('0xc6'),'version':this[_0x510a('0x80')][_0x510a('0x3f')],'login_token':_0x3d4463[_0x510a('0xe4')],'token':_0x3d4463['token'],'uuid':_0x3d4463[_0x510a('0xe8')],'serverUUID':_0x40be28['serverUUID'],'config':{'status':_0x40be28[_0x510a('0xe9')],'user':_0x3d4463[_0x510a('0xe5')],'apps':_0x3d4463[_0x510a('0xe1')],'appdata':_0x3d4463[_0x510a('0xea')],'uid':_0x3d4463[_0x510a('0xe3')],'presence':_0x40be28[_0x510a('0xeb')],'ucplink':_0x40be28[_0x510a('0xec')],'PBXVersion':_0x40be28['PBXVersion'],'PBXBrand':_0x40be28[_0x510a('0xed')],'uuid':_0x3d4463[_0x510a('0xe8')],'featureSet':_0x40be28[_0x510a('0xee')],'extensionConfig':_0x40be28['extensionConfig'],'uniqueServerid':_0x40be28[_0x510a('0xef')],'enableAnalytics':_0x40be28['enableAnalytics'],'callStatus':_0x40be28[_0x510a('0xf0')],'deploymentID':_0x40be28[_0x510a('0xf1')],'zuluModuleVersion':_0x40be28[_0x510a('0xf2')]}});this['emit'](_0x510a('0xf3'),_0x3d4463,_0x33520b);return _0x422145();})[_0x510a('0x13')](_0x176ffc=>{if(_0x46e1ec['connected']){_0x46e1ec['drop'](_0x46e1ec[_0x510a('0xcd')],_0x176ffc[_0x510a('0xc3')]);}return _0x2670ad(_0x176ffc);});});}[_0x510a('0xf4')](_0x24dadd,_0xe651f9,_0x1632c2){let _0x1aa676;try{_0x1aa676=JSON[_0x510a('0x32')](_0x1632c2[_0x510a('0xf5')]);}catch(_0x3ac2dd){_0xe651f9[_0x510a('0xca')](_0xe651f9[_0x510a('0xf6')],_0x3ac2dd);return;}const _0x165672=_0x24dadd['key'];if(!_0x1aa676[_0x510a('0xf7')]||_0x1aa676['type']!==_0x510a('0xf8')){_0x561b4c[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0xf9')+('['+_0xe651f9[_0x510a('0xbf')]+_0x510a('0xfa')+_0x165672+']:')+JSON[_0x510a('0x52')](_0x1aa676));}const _0x3463c4=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x165672);if(!_0x1aa676[_0x510a('0xcb')]||!_0x1aa676[_0x510a('0xf7')]){_0x3463c4[_0x510a('0xfb')](_0x1aa676['id'],_0x510a('0xfc'));return;}let _0x4869e6='ws::message::'+_0x1aa676['command']+'::'+_0x1aa676[_0x510a('0xf7')];if(_0x1aa676[_0x510a('0xfd')]){_0x4869e6='ws::message::'+_0x1aa676[_0x510a('0xfd')]+'::'+_0x1aa676[_0x510a('0xcb')]+'::'+_0x1aa676[_0x510a('0xf7')];}if(_0x293f42[_0x510a('0x1c')]['listenerCount'](this,_0x4869e6)>0x0){this[_0x510a('0x59')](_0x4869e6,_0x3463c4,_0x1aa676);}else{_0x561b4c['default'][_0x510a('0xd1')](_0x510a('0xfe')+_0x4869e6+'\x27\x20has\x200\x20listeners.\x20Command\x20was\x20rejected');_0x3463c4[_0x510a('0xfb')](_0x1aa676['id'],'invalid\x20command');}}['_webSocketServerBinaryMessage'](_0x1b6e80,_0x379373,_0x1bce94){const _0x1ee2f6=_0x1b6e80[_0x510a('0xbe')];const _0x47ed1d=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x1ee2f6);const _0x3ebf2e='ws::binary';if(_0x293f42[_0x510a('0x1c')]['listenerCount'](this,_0x3ebf2e)>0x0){this[_0x510a('0x59')](_0x3ebf2e,_0x47ed1d,_0x1bce94);}else{_0x561b4c['default']['warn'](_0x510a('0xfe')+_0x3ebf2e+'\x27\x20has\x200\x20listeners.\x20Command\x20was\x20rejected');_0x47ed1d[_0x510a('0xfb')](_0x1bce94['id'],_0x510a('0xff'));}}[_0x510a('0xc5')](_0x1bff55,_0x5ef7a9,_0x201612,_0x1ab36c){return new _0x1d1fa8[(_0x510a('0x50'))]((_0x182dfc,_0x2ec72d)=>{const _0x5bcae0=_0x1bff55['key'];if(!this['_sessionManager'][_0x510a('0xa0')](_0x5bcae0)){return _0x2ec72d(new Error(_0x510a('0x100')+_0x5bcae0+_0x510a('0x101')));}const _0x1c42db=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x5bcae0);return _0x1d1fa8[_0x510a('0x50')][_0x510a('0x6')]()[_0x510a('0x10')](()=>{if(_0x1c42db[_0x510a('0xc6')]){if(_0x1c42db[_0x510a('0xe4')]){return this['_platform'][_0x510a('0x4f')]('UPDATE\x20zulu_login_tokens\x20SET\x20websocket_session\x20=\x20\x22\x22\x20WHERE\x20`token`\x20=\x20?',[_0x1c42db['login_token']]);}return _0x1d1fa8[_0x510a('0x50')][_0x510a('0x6')]();}else{return _0x1d1fa8['Promise'][_0x510a('0x6')]();}})[_0x510a('0x10')](()=>{if(_0x1c42db['authenticated']){const _0x46670a=_0x1c42db['user']['id'];const _0xf79dac=_0x1c42db[_0x510a('0xde')];return this[_0x510a('0x80')][_0x510a('0x4f')](_0x510a('0x102'),[_0x46670a,_0x5bcae0,_0xf79dac]);}else{return _0x1d1fa8[_0x510a('0x50')][_0x510a('0x6')]();}})[_0x510a('0x10')](()=>{this['emit'](_0x510a('0x103'),_0x1c42db);_0x561b4c[_0x510a('0xd')][_0x510a('0x4a')](_0x1c42db[_0x510a('0x42')][_0x510a('0xbf')]+'\x20[CLIENT]\x20['+_0x1c42db['id']+_0x510a('0x104'));this[_0x510a('0x7c')][_0x510a('0x105')](_0x1c42db['id']);return _0x182dfc();})[_0x510a('0x13')](_0xd2627=>{_0x561b4c['default'][_0x510a('0xd1')]('Error\x20closing\x20websocket',_0xd2627);this[_0x510a('0x7c')][_0x510a('0x105')](_0x5bcae0);return _0x2ec72d(_0xd2627);});});}}_0x483097[_0x510a('0xd')]=new Client();return _0x565fef['exports'];};_0x5e4b0d[0x3]=function(_0x5d9cdc,_0x3383c3){'use strict';Object['defineProperty'](_0x3383c3,'__esModule',{'value':!![]});var _0xc9aa7a=require('async');var _0x179995=_0x587b08(_0xc9aa7a);var _0x1c6783=require(_0x510a('0x76'));var _0x72c12a=_0x587b08(_0x1c6783);var _0x686d11=_0x59c414(0x4,0x3);var _0x19dd3e=_0x587b08(_0x686d11);var _0x3d5051=require('bluebird');var _0xd0d7df=require(_0x510a('0x106'));var _0x397ba7=require('fs');var _0x86ce49=_0x587b08(_0x397ba7);var _0x4c2c90=require(_0x510a('0xb1'));var _0x54ad56=_0x587b08(_0x4c2c90);var _0x393e91=require(_0x510a('0x78'));var _0x41bb41=_0x59c414(0xb,0x3);var _0x24d095=_0x59c414(0x2,0x3);var _0x5d4446=_0x587b08(_0x24d095);var _0x5c54cf=require(_0x510a('0x107'));var _0x40e202=_0x587b08(_0x5c54cf);var _0x2ab45d=_0x59c414(0xc,0x3);var _0x33759a=_0x59c414(0xd,0x3);var _0x11ec4c=require(_0x510a('0x108'));var _0x60f96f=_0x587b08(_0x11ec4c);function _0x587b08(_0x1840cd){return _0x1840cd&&_0x1840cd[_0x510a('0x16')]?_0x1840cd:{'default':_0x1840cd};}class BackendServer extends _0xd0d7df[_0x510a('0x1c')]{constructor(){super();this[_0x510a('0x7c')]=new _0x41bb41[(_0x510a('0x81'))]();this[_0x510a('0x7e')]=null;this[_0x510a('0x7f')]=null;this[_0x510a('0x109')]=null;this[_0x510a('0x10a')]=null;this['_mobileNotificationsAPI']=null;this['on'](_0x510a('0x10b'),this['_getSession'][_0x510a('0x10c')](this));this['on']('ws::message::dropSession',this[_0x510a('0x10d')][_0x510a('0x10c')](this));this['on']('ws::message::getAllSessions',this[_0x510a('0x10e')][_0x510a('0x10c')](this));this['on'](_0x510a('0x10f'),this[_0x510a('0x110')][_0x510a('0x10c')](this));(0x0,_0x72c12a[_0x510a('0xd')])(this);}get[_0x510a('0xad')](){return this[_0x510a('0x10a')];}get['mobileNotificationsAPI'](){return this[_0x510a('0x111')];}[_0x510a('0x110')](_0x3a5390,_0x552174){let _0x5ad691=_0x552174[_0x510a('0xd3')][_0x510a('0x112')];_0x5ad691=_0x5ad691['toString']();const _0x301a8c=_0x552174['data'][_0x510a('0x5a')];const _0x3ceab8=_0x552174[_0x510a('0xd3')][_0x510a('0xd3')];const _0x216509=_0x5d4446[_0x510a('0xd')][_0x510a('0xa2')]();_0x3a5390['sendTrue'](_0x552174['id']);_0x179995[_0x510a('0xd')][_0x510a('0x113')](_0x216509,function(_0x32517f,_0x31d17e,_0x330444){let _0x3602bd=_0x60f96f[_0x510a('0xd')]['get'](_0x32517f,'user.id');_0x3602bd=_0x60f96f[_0x510a('0xd')][_0x510a('0x114')](_0x3602bd);if(_0x3602bd&&_0x3602bd===_0x5ad691){_0x19dd3e[_0x510a('0xd')]['debug'](_0x510a('0x115')+_0x301a8c+_0x510a('0x116')+_0x31d17e,_0x3ceab8);_0x32517f['sendJSON']({'subscription':_0x301a8c,'data':_0x3ceab8});}_0x330444();},function(_0x3d6a1f){if(_0x3d6a1f){_0x19dd3e[_0x510a('0xd')]['error'](_0x510a('0x117'),_0x3d6a1f);}});}['_getSession'](_0x18c0ae,_0x415e9c){const _0x5d7d05=_0x5d4446[_0x510a('0xd')][_0x510a('0xa1')](_0x415e9c[_0x510a('0xd3')]['sessionid']);if(!_0x5d7d05){_0x19dd3e[_0x510a('0xd')]['warn'](_0x510a('0x118')+_0x415e9c['data'][_0x510a('0x119')]+']');_0x18c0ae[_0x510a('0xfb')](_0x415e9c['id'],_0x510a('0x11a'));}else{_0x18c0ae['sendJSON']({'actionid':_0x415e9c['id'],'status':!![],'data':{'user':_0x5d7d05[_0x510a('0xe5')]['id'],'connected':_0x5d7d05[_0x510a('0x11b')],'lastconnected':_0x5d7d05[_0x510a('0xd6')],'clientversion':_0x5d7d05[_0x510a('0xd9')],'clienttype':_0x5d7d05[_0x510a('0x11c')]}});}}[_0x510a('0x10d')](_0x28b9f3,_0xb7a5ce){const _0xde69ec=_0x5d4446[_0x510a('0xd')][_0x510a('0xa1')](_0xb7a5ce[_0x510a('0xd3')][_0x510a('0x119')]);if(!_0xde69ec){_0x19dd3e['default'][_0x510a('0xd1')]('No\x20Session\x20with\x20this\x20ID\x20['+_0xb7a5ce[_0x510a('0xd3')]['sessionid']+']');_0x28b9f3[_0x510a('0xfb')](_0xb7a5ce['id'],_0x510a('0x11a'));}else{_0xde69ec['connection'][_0x510a('0xca')](_0xde69ec['connection'][_0x510a('0xf6')]);_0x28b9f3[_0x510a('0x11d')](_0xb7a5ce['id']);}}['_getAllSessions'](_0x4a55b7,_0x3dacf2){const _0x5dc60f={};const _0x4b105a=_0x5d4446[_0x510a('0xd')][_0x510a('0xa2')]();_0x179995[_0x510a('0xd')][_0x510a('0x113')](_0x4b105a,function(_0x3ae8c8,_0x1f3bb0,_0x29aae7){_0x5dc60f[_0x1f3bb0]={'user':_0x3ae8c8[_0x510a('0xe5')]['id'],'connected':_0x3ae8c8[_0x510a('0x11b')],'lastconnected':_0x3ae8c8[_0x510a('0xd6')],'clientversion':_0x3ae8c8['clientVersion'],'clienttype':_0x3ae8c8['clientType']};_0x29aae7();},function(_0x2ab241){if(_0x2ab241){console[_0x510a('0xd1')](_0x2ab241);_0x4a55b7[_0x510a('0xfb')](_0x3dacf2['id'],'invalid\x20command');}else{_0x4a55b7['sendJSON']({'actionid':_0x3dacf2['id'],'status':!![],'data':{'sessions':_0x5dc60f}});}});}['startListeners'](_0x2b96c4){return new _0x3d5051[(_0x510a('0x50'))]((_0x4a2260,_0x3747f0)=>{let _0x54706d;let _0x209631;let _0x5f02c9;let _0x1b8f47;let _0x307cea;return _0x3d5051[_0x510a('0x50')]['all']([_0x2b96c4[_0x510a('0x55')](_0x510a('0x11e')),_0x2b96c4[_0x510a('0x55')](_0x510a('0x84')),_0x2b96c4[_0x510a('0x55')](_0x510a('0x85')),_0x2b96c4['getConfig'](_0x510a('0x11f'))])['then'](_0x99ed0c=>{_0x209631=_0x99ed0c[0x0];_0x1b8f47=_0x99ed0c[0x1]?_0x99ed0c[0x1]:_0x510a('0x88');_0x307cea=_0x99ed0c[0x2]?_0x99ed0c[0x2]:_0x510a('0x86');_0x5f02c9=_0x99ed0c[0x3];_0x54706d=(0x0,_0x40e202[_0x510a('0xd')])();return _0x2b96c4[_0x510a('0x6c')]('servertoken',_0x54706d);})['then'](()=>{const _0x3b2486=_0x510a('0x120');this[_0x510a('0x109')]=_0x5f02c9;try{_0x86ce49[_0x510a('0xd')][_0x510a('0x87')](_0x1b8f47);_0x86ce49[_0x510a('0xd')][_0x510a('0x87')](_0x307cea);}catch(_0x3291b7){_0x19dd3e['default'][_0x510a('0xd1')](_0x510a('0x121'));_0x1b8f47=_0x510a('0x88');_0x307cea=_0x510a('0x86');}const _0x25fe06=_0x86ce49[_0x510a('0xd')][_0x510a('0x2e')](_0x1b8f47,_0x510a('0x2f'));const _0x3fea64=_0x86ce49[_0x510a('0xd')][_0x510a('0x2e')](_0x307cea,_0x510a('0x2f'));const _0x411714={'key':_0x25fe06,'cert':_0x3fea64};this[_0x510a('0x7e')]=_0x54ad56['default'][_0x510a('0x122')](_0x411714,this[_0x510a('0x8e')]);this[_0x510a('0x7f')]=new _0x393e91[(_0x510a('0x123'))]({'httpServer':this[_0x510a('0x7e')],'autoAcceptConnections':![],'maxReceivedFrameSize':0xbebc200});this['_webSocketServer']['on'](_0x510a('0x9c'),this['_webSocketServerRequest']);this[_0x510a('0x10a')]=new _0x2ab45d[(_0x510a('0x124'))]();this[_0x510a('0x10a')][_0x510a('0xde')]=_0x54706d;this['_mobileNotificationsAPI']=new _0x33759a[(_0x510a('0x125'))]();this[_0x510a('0x111')][_0x510a('0xde')]=_0x54706d;this[_0x510a('0x7e')][_0x510a('0x126')](_0x209631,_0x3b2486,function(_0x396d22){if(_0x396d22){return _0x3747f0(_0x396d22);}_0x19dd3e['default']['debug'](_0x510a('0x127')+_0x3b2486+_0x510a('0x128')+_0x209631);return _0x4a2260();});})['catch'](_0x52d477=>{_0x19dd3e[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x129'),_0x52d477);return _0x3747f0(_0x52d477);});});}[_0x510a('0x9d')](_0xdc4ac4){if(_0xdc4ac4[_0x510a('0xbf')]!=='127.0.0.1'){_0xdc4ac4['reject']();_0x19dd3e['default']['error'](new Error(_0x510a('0x12a')+_0xdc4ac4[_0x510a('0xbd')]+_0x510a('0x12b')));return;}var _0x3bb9a6=null;try{_0x3bb9a6=_0xdc4ac4[_0x510a('0x12c')](_0xdc4ac4[_0x510a('0x12d')][0x0],_0xdc4ac4[_0x510a('0xbd')]);}catch(_0x33a167){return;}_0x19dd3e[_0x510a('0xd')]['debug'](_0x3bb9a6[_0x510a('0xbf')]+_0x510a('0x12e')+_0xdc4ac4[_0x510a('0xbe')]+_0x510a('0xc1'));const _0x4f8962=_0xdc4ac4[_0x510a('0xbe')];this['_sessionManager'][_0x510a('0xc2')](_0x4f8962,_0x3bb9a6);_0x3bb9a6['on'](_0x510a('0xc3'),_0x44484c=>{this[_0x510a('0xc4')](_0xdc4ac4,_0x3bb9a6,_0x44484c);});_0x3bb9a6['on'](_0x510a('0x12f'),(_0x19b95e,_0x3723d4)=>{this[_0x510a('0xc5')](_0xdc4ac4,_0x3bb9a6,_0x19b95e,_0x3723d4);});}[_0x510a('0xc4')](_0x4c70b3,_0x3a66ae,_0x5319cf){const _0x6ef1cc=_0x4c70b3[_0x510a('0xbe')];const _0x25e594=this['_sessionManager'][_0x510a('0xa1')](_0x6ef1cc);if(!_0x25e594[_0x510a('0xc6')]){this[_0x510a('0xc7')](_0x4c70b3,_0x3a66ae,_0x5319cf);}else{switch(_0x5319cf[_0x510a('0xf7')]){case _0x510a('0x2f'):this[_0x510a('0xf4')](_0x4c70b3,_0x3a66ae,_0x5319cf);break;case _0x510a('0x130'):this['_webSocketServerBinaryMessage'](_0x4c70b3,_0x3a66ae,_0x5319cf);break;default:break;}}}[_0x510a('0xc7')](_0x18d6f4,_0x2d69ed,_0x2be5ab){const _0x4ccc8e=_0x18d6f4[_0x510a('0xbe')];const _0x5830f5=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x4ccc8e);let _0x42620a;try{_0x42620a=JSON['parse'](_0x2be5ab[_0x510a('0xf5')]);}catch(_0x123985){_0x2d69ed[_0x510a('0xca')](_0x2d69ed[_0x510a('0xf6')],_0x123985);return;}if(!this[_0x510a('0x109')]||!_0x42620a['token']||_0x42620a[_0x510a('0xde')]!==this[_0x510a('0x109')]){_0x2d69ed[_0x510a('0xca')](_0x2d69ed[_0x510a('0xcd')],_0x510a('0x131'));}else{_0x5830f5[_0x510a('0xc6')]=!![];_0x5830f5[_0x510a('0xe7')]({'status':!![],'type':'auth','message':_0x510a('0xc6')});}}[_0x510a('0xf4')](_0x27e3fc,_0x5daaac,_0x2555d7){let _0x3c2f61;try{_0x3c2f61=JSON['parse'](_0x2555d7['utf8Data']);}catch(_0x77889c){_0x5daaac[_0x510a('0xca')](_0x5daaac[_0x510a('0xf6')],_0x77889c);return;}const _0x3044d9=_0x27e3fc[_0x510a('0xbe')];_0x19dd3e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x132')+_0x5daaac[_0x510a('0xbf')]+']\x20['+_0x3044d9+']:'+JSON['stringify'](_0x3c2f61));const _0x2723f8=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x3044d9);if(!_0x3c2f61[_0x510a('0xcb')]){_0x2723f8[_0x510a('0xfb')](_0x3c2f61['id'],'Invalid\x20command');return;}let _0x17b5e3=_0x510a('0x133')+_0x3c2f61[_0x510a('0xcb')];if(_0x3c2f61[_0x510a('0xfd')]){_0x17b5e3=_0x510a('0x133')+_0x3c2f61[_0x510a('0xfd')]+'::'+_0x3c2f61['command'];}if(_0xd0d7df['EventEmitter']['listenerCount'](this,_0x17b5e3)>0x0){this[_0x510a('0x59')](_0x17b5e3,_0x2723f8,_0x3c2f61);}else{_0x19dd3e['default'][_0x510a('0xd1')](_0x510a('0xfe')+_0x17b5e3+_0x510a('0x134'));_0x2723f8[_0x510a('0xfb')](_0x3c2f61['id'],_0x510a('0xff'));}}[_0x510a('0xc9')](_0x56efce,_0x34cd49,_0x523608){const _0x37ff42=_0x56efce[_0x510a('0xbe')];const _0x25a0fd=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x37ff42);const _0x153a85='ws::binary';if(_0xd0d7df['EventEmitter']['listenerCount'](this,_0x153a85)>0x0){this['emit'](_0x153a85,_0x25a0fd,_0x523608);}else{_0x19dd3e[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0xfe')+_0x153a85+_0x510a('0x134'));_0x25a0fd['sendError'](_0x523608['id'],_0x510a('0xff'));}}[_0x510a('0xc5')](_0x575c75,_0x24e52a,_0x104e12,_0x3bee9a){const _0x25e40e=_0x575c75[_0x510a('0xbe')];if(!this[_0x510a('0x7c')][_0x510a('0xa0')](_0x25e40e)){_0x19dd3e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x135')+_0x25e40e+_0x510a('0x104'));this['_sessionManager']['clearSession'](_0x25e40e);_0x19dd3e[_0x510a('0xd')]['error'](_0x510a('0x100')+_0x25e40e+_0x510a('0x101'));return;}const _0xe0995a=this[_0x510a('0x7c')][_0x510a('0xa1')](_0x25e40e);this[_0x510a('0x59')]('ws::disconnected',_0xe0995a);_0x19dd3e[_0x510a('0xd')][_0x510a('0x4a')](_0xe0995a[_0x510a('0x42')]['remoteAddress']+_0x510a('0x12e')+_0xe0995a['id']+_0x510a('0x104'));this[_0x510a('0x7c')][_0x510a('0x105')](_0xe0995a['id']);}[_0x510a('0x8e')](_0x10984b,_0x26fefc){_0x26fefc[_0x510a('0xac')](0x194);_0x26fefc[_0x510a('0xb3')]('');_0x26fefc[_0x510a('0xa4')]();}}_0x3383c3[_0x510a('0xd')]=BackendServer;return _0x5d9cdc['exports'];};_0x5e4b0d[0x4]=function(_0x554645,_0xead777){'use strict';Object[_0x510a('0x75')](_0xead777,'__esModule',{'value':!![]});var _0x15451d=require(_0x510a('0x136'));var _0x11f3a2=require(_0x510a('0x137'));var _0x14d912=_0x27db1e(_0x11f3a2);function _0x27db1e(_0x21ec0f){return _0x21ec0f&&_0x21ec0f['__esModule']?_0x21ec0f:{'default':_0x21ec0f};}const _0x1e19dd=new _0x15451d[(_0x510a('0x138'))]({'level':_0x510a('0x11'),'transports':[new _0x15451d[(_0x510a('0x139'))]['Console']({'stderrLevels':[_0x510a('0x2b')],'colorize':!![],'timestamp':!![],'formatter':_0x15c6b5=>{let _0x8d077a='';if(typeof _0x15c6b5['meta']===_0x510a('0x13a')&&Object[_0x510a('0x13b')](_0x15c6b5['meta'])[_0x510a('0x13c')]){_0x8d077a='\x20'+JSON[_0x510a('0x52')](_0x15c6b5[_0x510a('0x13d')]);}else if(typeof _0x15c6b5[_0x510a('0x13d')]==='string'){_0x8d077a=_0x15c6b5[_0x510a('0x13d')];}const _0x1a1061=new Date();const _0x209c22=('00'+_0x1a1061[_0x510a('0x13e')]())[_0x510a('0x13f')](-0x3);return _0x15451d['config']['colorize'](_0x15c6b5['level'],'['+_0x1a1061[_0x510a('0x140')]()+'\x20'+_0x1a1061['toLocaleTimeString']()+'.'+_0x209c22+']\x20['+_0x15c6b5['level']['toUpperCase']()+_0x510a('0x141'))+_0x15c6b5[_0x510a('0xc3')]+_0x8d077a;}})]});if(process[_0x510a('0x26')]['NODE_ENV']===_0x510a('0x142')){_0x1e19dd[_0x510a('0x143')]({'level':_0x510a('0x144'),'filters':[function(_0xa95697,_0x527896,_0x4d927f){return!_0x527896&&typeof _0x4d927f===_0x510a('0x13a')&&_0x4d927f instanceof Error?_0x4d927f[_0x510a('0x145')]:_0x527896;}],'transports':[new _0x15451d['transports']['Console']({'stderrLevels':[_0x510a('0x2b')],'prettyPrint':!![],'colorize':!![],'timestamp':!![],'formatter':_0x1bdbcf=>{let _0x3862b4='';if(typeof _0x1bdbcf['meta']===_0x510a('0x13a')&&Object['keys'](_0x1bdbcf[_0x510a('0x13d')])[_0x510a('0x13c')]){_0x3862b4='\x20'+JSON[_0x510a('0x52')](_0x1bdbcf['meta']);}else if(typeof _0x1bdbcf[_0x510a('0x13d')]==='string'){_0x3862b4=_0x1bdbcf[_0x510a('0x13d')];}const _0x38395a=new Date();const _0x5d4d7d=('00'+_0x38395a['getMilliseconds']())[_0x510a('0x13f')](-0x3);return _0x15451d[_0x510a('0x35')][_0x510a('0x146')](_0x1bdbcf[_0x510a('0x147')],'['+_0x38395a[_0x510a('0x140')]()+'\x20'+_0x38395a['toLocaleTimeString']()+'.'+_0x5d4d7d+']\x20['+_0x1bdbcf[_0x510a('0x147')][_0x510a('0x148')]()+_0x510a('0x149'))+_0x1bdbcf[_0x510a('0xc3')]+_0x3862b4;}})]});}else if(process[_0x510a('0x26')][_0x510a('0x14a')]===_0x510a('0xa8')){_0x1e19dd[_0x510a('0x143')]({'level':'error','filters':[function(_0x145805,_0x49b778,_0x1259f1){return!_0x49b778&&typeof _0x1259f1===_0x510a('0x13a')&&_0x1259f1 instanceof Error?_0x1259f1['stack']:_0x49b778;}],'transports':[]});}_0xead777[_0x510a('0xd')]=_0x1e19dd;return _0x554645[_0x510a('0x4')];};_0x5e4b0d[0x5]=function(_0x57ef2a,_0x5207df){'use strict';Object[_0x510a('0x75')](_0x5207df,'__esModule',{'value':!![]});var _0x1de716=_0x59c414(0x2,0x5);var _0x16c963=_0x55ea6d(_0x1de716);var _0x16db6b=require('bluebird');var _0x229f0a=require(_0x510a('0x76'));var _0x8661a7=_0x55ea6d(_0x229f0a);var _0x93d65=_0x59c414(0x4,0x5);var _0x4cb59e=_0x55ea6d(_0x93d65);var _0x359540=_0x59c414(0xe,0x5);var _0x30bc65=_0x59c414(0xf,0x5);var _0x2ae34b=_0x59c414(0x10,0x5);var _0x60d69f=_0x59c414(0x11,0x5);var _0x1afb59=_0x59c414(0x12,0x5);var _0x21c265=_0x59c414(0x13,0x5);var _0x4c230b=_0x59c414(0x14,0x5);var _0x2e9519=_0x59c414(0x15,0x5);var _0x569527=_0x59c414(0x16,0x5);var _0x58a903=_0x59c414(0x17,0x5);var _0x3f0a46=_0x59c414(0x18,0x5);function _0x55ea6d(_0x5249a0){return _0x5249a0&&_0x5249a0[_0x510a('0x16')]?_0x5249a0:{'default':_0x5249a0};}class ModuleController{constructor(){this[_0x510a('0x14b')]={};(0x0,_0x8661a7['default'])(this);}[_0x510a('0xf')](_0x157659,_0x48a5e1){return new _0x16db6b[(_0x510a('0x50'))]((_0x3cc2f2,_0x41e28b)=>{try{let _0x26404d;if(_0x157659[_0x510a('0x14c')](_0x510a('0x40'))){try{_0x26404d=_0x59c414(0x19,0x5);}catch(_0xbf823a){}}this['_module'][_0x510a('0x14d')]=new _0x359540[(_0x510a('0x14d'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x14e')]=new _0x30bc65['Config'](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this[_0x510a('0x14b')]['Chat']=new _0x2ae34b[(_0x510a('0x14f'))](_0x157659,_0x16c963['default'],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x150')]=new _0x58a903[(_0x510a('0x150'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1,this['_module'][_0x510a('0x14f')]);this[_0x510a('0x14b')]['ContactManager']=new _0x60d69f[(_0x510a('0x151'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this['_module'][_0x510a('0x152')]=new _0x1afb59[(_0x510a('0x152'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x153')]=new _0x21c265['Ping'](_0x157659,_0x16c963['default'],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x154')]=new _0x4c230b[(_0x510a('0x154'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this[_0x510a('0x14b')]['Sms']=new _0x2e9519[(_0x510a('0x155'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x156')]=new _0x569527['Mobile'](_0x157659,_0x16c963['default'],_0x48a5e1);this[_0x510a('0x14b')][_0x510a('0x157')]=new _0x3f0a46[(_0x510a('0x157'))](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);if(_0x26404d){this[_0x510a('0x14b')][_0x510a('0x158')]=new _0x26404d['Screensharing'](_0x157659,_0x16c963[_0x510a('0xd')],_0x48a5e1);}}catch(_0x39f249){_0x4cb59e[_0x510a('0xd')]['error'](_0x510a('0x159'),_0x39f249);_0x41e28b(_0x39f249);}_0x3cc2f2();});}['getModule'](_0x85990a){return this['_module'][_0x85990a];}}_0x5207df['default']=new ModuleController();return _0x57ef2a[_0x510a('0x4')];};_0x5e4b0d[0x6]=function(_0x77f983,_0x1894bb){'use strict';Object[_0x510a('0x75')](_0x1894bb,_0x510a('0x16'),{'value':!![]});var _0x5fbe36=require('universal-analytics');var _0xe3aa51=_0x4a346c(_0x5fbe36);var _0x448d93=_0x59c414(0x4,0x6);var _0x185496=_0x4a346c(_0x448d93);function _0x4a346c(_0x9cca31){return _0x9cca31&&_0x9cca31[_0x510a('0x16')]?_0x9cca31:{'default':_0x9cca31};}class Uanalytics{constructor(){this[_0x510a('0x15a')]=null;this['serveruuid']=null;this['customcid']=null;this['visitor']=null;}[_0x510a('0x3a')](_0x351f55){this[_0x510a('0x15a')]=process[_0x510a('0x26')][_0x510a('0x14a')]===_0x510a('0x15b')?'UA-132269789-1':_0x510a('0x15c');if(!process[_0x510a('0x26')][_0x510a('0x15d')]){this[_0x510a('0x15e')]=_0x510a('0x15f');this[_0x510a('0x160')]=!![];}else{this[_0x510a('0x15e')]=process[_0x510a('0x26')][_0x510a('0x15d')];this[_0x510a('0x160')]=![];}const _0x2c09cc=_0x351f55[_0x510a('0x57')][_0x510a('0x161')];if(_0x2c09cc){this[_0x510a('0x162')]=this[_0x510a('0x160')]?(0x0,_0xe3aa51[_0x510a('0xd')])(this[_0x510a('0x15a')],this[_0x510a('0x15e')],{'strictCidFormat':![]}):(0x0,_0xe3aa51['default'])(this[_0x510a('0x15a')],this['serveruuid']);}}[_0x510a('0x163')](..._0x58f84e){if(this[_0x510a('0x162')]){this['visitor']['event'](..._0x58f84e,_0x4c4670=>{if(_0x4c4670){_0x185496['default']['warn'](_0x510a('0x164'),_0x4c4670);}});}}[_0x510a('0x165')](..._0x2781dc){if(this[_0x510a('0x162')]){this[_0x510a('0x162')]['timing'](..._0x2781dc,_0x1b2c26=>{if(_0x1b2c26){_0x185496[_0x510a('0xd')]['warn']('GA\x20timing\x20error:\x20',_0x1b2c26);}});}}}_0x1894bb[_0x510a('0xd')]=new Uanalytics();return _0x77f983[_0x510a('0x4')];};_0x5e4b0d[0x7]=function(_0x5b538f,_0x27ded6){'use strict';Object[_0x510a('0x75')](_0x27ded6,'__esModule',{'value':!![]});_0x27ded6[_0x510a('0x74')]=undefined;var _0x1cda32=require(_0x510a('0x108'));var _0x16b97c=_0x3fd55a(_0x1cda32);var _0x57a437=_0x59c414(0x1a,0x7);function _0x3fd55a(_0x1075d9){return _0x1075d9&&_0x1075d9[_0x510a('0x16')]?_0x1075d9:{'default':_0x1075d9};}class SessionAPI extends _0x57a437[_0x510a('0x166')]{constructor(){super();this[_0x510a('0x109')]=null;this['_version']=null;this[_0x510a('0x167')]['headers']={'X-AUTH-TOKEN':null,'X-CLIENT-VERSION':null};}get[_0x510a('0xde')](){return this[_0x510a('0x109')];}set[_0x510a('0xde')](_0x3b74e8){this[_0x510a('0x109')]=_0x3b74e8;this[_0x510a('0x167')]['headers'][_0x510a('0x168')]=_0x3b74e8;}get[_0x510a('0x30')](){return this[_0x510a('0x169')];}set[_0x510a('0x30')](_0x5149b2){this[_0x510a('0x169')]=_0x5149b2;this[_0x510a('0x167')][_0x510a('0xb7')][_0x510a('0x16a')]=_0x5149b2;}[_0x510a('0x16b')](_0x59a8db){return this['postResource'](_0x510a('0x16c'),_0x59a8db)['then'](_0x1b5090=>_0x1b5090[_0x510a('0x16d')]);}[_0x510a('0x16e')](_0x4c3568){return this[_0x510a('0x16f')](_0x510a('0x170'),_0x4c3568)[_0x510a('0x10')](_0x8d3df=>_0x8d3df[_0x510a('0x16d')]);}[_0x510a('0x55')](){return this[_0x510a('0x171')](_0x510a('0x172'))[_0x510a('0x10')](_0x550665=>_0x550665['body']);}['getContactAvatar'](_0x1b9453){return this[_0x510a('0x171')](_0x510a('0x173')+_0x1b9453+_0x510a('0x174'))[_0x510a('0x10')](_0x58a00d=>_0x58a00d[_0x510a('0x16d')]);}[_0x510a('0x175')](){return this[_0x510a('0x171')](_0x510a('0x176'))[_0x510a('0x10')](_0x48d05a=>_0x48d05a['body']);}[_0x510a('0x177')](_0x402a63){return this['getResource'](_0x510a('0x173')+_0x402a63+_0x510a('0x178'))['then'](_0x57ed11=>_0x57ed11['body']);}[_0x510a('0x179')](){return this[_0x510a('0x171')](_0x510a('0x17a'))[_0x510a('0x10')](_0x4854c7=>_0x4854c7[_0x510a('0x16d')]);}[_0x510a('0x17b')](_0x4f6d88){return this[_0x510a('0x16f')](_0x510a('0x17c'),_0x4f6d88)[_0x510a('0x10')](_0x45c921=>_0x45c921[_0x510a('0x16d')]);}[_0x510a('0x17d')](_0x5dc84e,_0x2d37f0){return this[_0x510a('0x16f')]('mobile/token/'+_0x5dc84e,_0x2d37f0)[_0x510a('0x10')](_0x344376=>_0x344376[_0x510a('0x16d')]);}[_0x510a('0x17e')](){return this[_0x510a('0x171')](_0x510a('0x17f'))[_0x510a('0x10')](_0x463471=>_0x16b97c[_0x510a('0xd')][_0x510a('0x180')](_0x463471[_0x510a('0x16d')],_0x510a('0x181')));}[_0x510a('0x182')](_0x32aff7){return this['postResource'](_0x510a('0x183'),{'id':_0x32aff7})[_0x510a('0x10')](_0x1d7077=>_0x1d7077['body']);}[_0x510a('0x184')](_0x445be9){return this[_0x510a('0x16f')](_0x510a('0x185'),_0x445be9)[_0x510a('0x10')](_0xeef005=>_0xeef005[_0x510a('0x16d')]);}[_0x510a('0x186')](){return this[_0x510a('0x171')]('smsdids')['then'](_0x3aa1b1=>_0x16b97c[_0x510a('0xd')][_0x510a('0x180')](_0x3aa1b1[_0x510a('0x16d')],_0x510a('0x187')));}}_0x27ded6['SessionAPI']=SessionAPI;return _0x5b538f[_0x510a('0x4')];};_0x5e4b0d[0x8]=function(_0x5333ab,_0x2daf9d){'use strict';Object['defineProperty'](_0x2daf9d,'__esModule',{'value':!![]});_0x2daf9d['SessionManager']=undefined;var _0x100201=_0x59c414(0x1b,0x8);var _0x563b76=_0x59c414(0x4,0x8);var _0x1bb31d=_0x2a7f7c(_0x563b76);function _0x2a7f7c(_0xba8c3c){return _0xba8c3c&&_0xba8c3c['__esModule']?_0xba8c3c:{'default':_0xba8c3c};}class SessionManager{constructor(_0xd2843a){this[_0x510a('0x188')]={};this['_platform']=_0xd2843a;}[_0x510a('0xc2')](_0x4da807,_0x56700a){if(this[_0x510a('0xa0')](_0x4da807)){throw _0x510a('0x189');}this[_0x510a('0x188')][_0x4da807]=new _0x100201[(_0x510a('0x18a'))](_0x4da807,_0x56700a,this[_0x510a('0x80')]);return this[_0x510a('0x188')][_0x4da807];}[_0x510a('0x105')](_0xd36c6a){if(this[_0x510a('0xa0')](_0xd36c6a)){this[_0x510a('0x188')][_0xd36c6a]=null;delete this[_0x510a('0x188')][_0xd36c6a];}else{_0x1bb31d['default'][_0x510a('0xd1')](_0x510a('0x18b'));}}[_0x510a('0xa0')](_0x37fbd1){return this[_0x510a('0x188')][_0x37fbd1]!==undefined&&this['sessions'][_0x37fbd1]!==null;}[_0x510a('0xa1')](_0x317ee3){return this[_0x510a('0xa0')](_0x317ee3)?this['sessions'][_0x317ee3]:undefined;}[_0x510a('0xa2')](){return this[_0x510a('0x188')];}}_0x2daf9d['SessionManager']=SessionManager;return _0x5333ab[_0x510a('0x4')];};_0x5e4b0d[0x9]=function(_0x5e1b3c,_0x2852ae){'use strict';Object[_0x510a('0x75')](_0x2852ae,_0x510a('0x16'),{'value':!![]});_0x2852ae[_0x510a('0x18c')]=undefined;var _0x5f4477=require(_0x510a('0x19'));var _0x4850cb=_0x59c414(0x4,0x9);var _0x18d80c=_0x3e11c4(_0x4850cb);var _0x4063f7=require(_0x510a('0x108'));var _0x1ce691=_0x3e11c4(_0x4063f7);function _0x3e11c4(_0x523182){return _0x523182&&_0x523182['__esModule']?_0x523182:{'default':_0x523182};}class Plaintext{constructor(_0x49fdb9,_0x23cab1,_0x109492){this[_0x510a('0x42')]=_0x49fdb9;this[_0x510a('0x18d')]=_0x23cab1;this['platform']=_0x109492;}[_0x510a('0xe0')](_0xaf4281){return new _0x5f4477[(_0x510a('0x50'))]((_0x5d2254,_0x54ff86)=>{const _0x44d52b={'version':this[_0x510a('0x18d')][_0x510a('0xd9')],'type':this[_0x510a('0x18d')][_0x510a('0x11c')],'session':this['session']['id'],'ip':this[_0x510a('0x42')][_0x510a('0xbf')]};if(_0xaf4281[_0x510a('0xe6')]&&_0xaf4281[_0x510a('0xd5')]){_0x44d52b[_0x510a('0xe6')]=_0xaf4281[_0x510a('0xe6')];_0x44d52b[_0x510a('0x18e')]=_0xaf4281[_0x510a('0xd5')];}else{_0x18d80c['default'][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+']\x20Username\x20or\x20Password\x20not\x20provided\x20from\x20'+this[_0x510a('0x42')][_0x510a('0xbf')]);_0x18d80c[_0x510a('0xd')][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+']\x20Authentication\x20failure\x20for\x20unknown\x20from\x20'+this['connection']['remoteAddress']);return this[_0x510a('0x18f')]['astmanAction']({'action':_0x510a('0x190'),'userevent':'authentication-failed','ip':this[_0x510a('0x42')][_0x510a('0xbf')],'username':null})[_0x510a('0x10')](()=>{return _0x54ff86(new Error(_0x510a('0x131')));})[_0x510a('0x13')](_0x126d65=>{return _0x54ff86(_0x126d65);});}let _0xf9a5ea=JSON[_0x510a('0x32')](JSON[_0x510a('0x52')](_0xaf4281));_0xf9a5ea[_0x510a('0xd5')]=_0x510a('0x191');_0x18d80c[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x192')+this[_0x510a('0x42')][_0x510a('0xbf')]+_0x510a('0xfa')+this[_0x510a('0x18d')]['id']+']:'+JSON[_0x510a('0x52')](_0xf9a5ea));return this[_0x510a('0x18d')][_0x510a('0xad')][_0x510a('0x16b')](_0x44d52b)[_0x510a('0x10')](_0x5a1daf=>{if(!this[_0x510a('0x42')][_0x510a('0x11b')]){_0x18d80c[_0x510a('0xd')][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+_0x510a('0x193')+this[_0x510a('0x42')][_0x510a('0x194')]);return _0x54ff86(new Error(_0x510a('0x195')+this[_0x510a('0x42')][_0x510a('0x194')]));}if(!_0x5a1daf[_0x510a('0xe9')]){_0x18d80c['default'][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+_0x510a('0x196')+this['connection'][_0x510a('0xbf')]);return this[_0x510a('0x18f')][_0x510a('0x61')]({'action':_0x510a('0x190'),'userevent':_0x510a('0x197'),'ip':this['connection'][_0x510a('0xbf')],'username':_0xaf4281['username']})[_0x510a('0x10')](()=>{if(!_0x1ce691[_0x510a('0xd')][_0x510a('0x198')](_0x5a1daf)){_0x18d80c['default'][_0x510a('0x2b')](_0x510a('0x16b'),'Invalid\x20response\x20from\x20server',_0x5a1daf);_0x54ff86(new Error(_0x510a('0x199')));}return _0x54ff86(new Error(_0x5a1daf[_0x510a('0xc3')]));})[_0x510a('0x13')](_0x2ffdb6=>{return _0x54ff86(_0x2ffdb6);});}return this[_0x510a('0x18f')][_0x510a('0x61')]({'action':'userevent','userevent':_0x510a('0x19a'),'ip':this[_0x510a('0x42')][_0x510a('0xbf')],'username':_0xaf4281[_0x510a('0xe6')]})['then'](()=>{return _0x5d2254(_0x5a1daf);})[_0x510a('0x13')](_0x4650f2=>{return _0x54ff86(_0x4650f2);});})[_0x510a('0x13')](_0x371260=>{return _0x54ff86(_0x371260);});});}}_0x2852ae['Plaintext']=Plaintext;return _0x5e1b3c[_0x510a('0x4')];};_0x5e4b0d[0xa]=function(_0x291d84,_0x2ba5d6){'use strict';Object['defineProperty'](_0x2ba5d6,_0x510a('0x16'),{'value':!![]});_0x2ba5d6[_0x510a('0x19b')]=undefined;var _0x3b74cd=require(_0x510a('0x19'));var _0x3e5f83=_0x59c414(0x4,0xa);var _0x3e4b93=_0xe890e3(_0x3e5f83);var _0x5d901b=require('lodash');var _0x165554=_0xe890e3(_0x5d901b);function _0xe890e3(_0x450429){return _0x450429&&_0x450429[_0x510a('0x16')]?_0x450429:{'default':_0x450429};}class Token{constructor(_0x545480,_0x2e4892,_0x44ab46){this['connection']=_0x545480;this[_0x510a('0x18d')]=_0x2e4892;this[_0x510a('0x18f')]=_0x44ab46;}[_0x510a('0xe0')](_0x2eef29){return new _0x3b74cd['Promise']((_0x1d4d65,_0x3d2b3c)=>{const _0x440bc6={'version':this[_0x510a('0x18d')][_0x510a('0xd9')],'type':this[_0x510a('0x18d')][_0x510a('0x11c')],'session':this[_0x510a('0x18d')]['id'],'ip':this[_0x510a('0x42')][_0x510a('0xbf')]};if(_0x2eef29[_0x510a('0xde')]){_0x440bc6[_0x510a('0xde')]=_0x2eef29[_0x510a('0xde')];}else{_0x3e4b93[_0x510a('0xd')][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+_0x510a('0x19c')+this[_0x510a('0x42')]['remoteAddress']);_0x3e4b93['default'][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+_0x510a('0x19d')+this[_0x510a('0x42')]['remoteAddress']);return this['platform'][_0x510a('0x61')]({'action':_0x510a('0x190'),'userevent':_0x510a('0x197'),'ip':this['connection'][_0x510a('0xbf')],'username':null})['then'](()=>{return _0x3d2b3c(new Error(_0x510a('0x19e')));})['catch'](_0x5f5194=>{return _0x3d2b3c(_0x5f5194);});}let _0x1396e5=JSON[_0x510a('0x32')](JSON[_0x510a('0x52')](_0x2eef29));_0x1396e5[_0x510a('0xde')]='OBFUSCATED';_0x3e4b93[_0x510a('0xd')][_0x510a('0x4a')]('SERVER\x20<=\x20[CLIENT]\x20['+this[_0x510a('0x42')][_0x510a('0xbf')]+_0x510a('0xfa')+this['session']['id']+']:'+JSON['stringify'](_0x1396e5));return this['session'][_0x510a('0xad')]['loginToken'](_0x440bc6)[_0x510a('0x10')](_0x127ef8=>{if(!this[_0x510a('0x42')][_0x510a('0x11b')]){_0x3e4b93[_0x510a('0xd')][_0x510a('0xd1')]('['+this[_0x510a('0x18d')]['id']+_0x510a('0x193')+this[_0x510a('0x42')][_0x510a('0x194')]);return _0x3d2b3c(new Error(_0x510a('0x195')+this['connection'][_0x510a('0x194')]));}if(!_0x127ef8[_0x510a('0xe9')]){_0x3e4b93['default']['warn']('['+this['session']['id']+_0x510a('0x196')+this['connection'][_0x510a('0xbf')]);return this['platform'][_0x510a('0x61')]({'action':_0x510a('0x190'),'userevent':_0x510a('0x197'),'ip':this['connection'][_0x510a('0xbf')],'username':null})['then'](()=>{if(!_0x165554[_0x510a('0xd')][_0x510a('0x198')](_0x127ef8)){_0x3e4b93['default'][_0x510a('0x2b')](_0x510a('0x16e'),_0x510a('0x199'),_0x127ef8);return _0x3d2b3c(new Error(_0x510a('0x199')));}return _0x3d2b3c(new Error(_0x127ef8[_0x510a('0xc3')]));})[_0x510a('0x13')](_0x20bf0f=>{return _0x3d2b3c(_0x20bf0f);});}return this[_0x510a('0x18f')][_0x510a('0x61')]({'action':'userevent','userevent':_0x510a('0x19a'),'ip':this[_0x510a('0x42')][_0x510a('0xbf')],'username':null})[_0x510a('0x10')](()=>{return _0x1d4d65(_0x127ef8);})[_0x510a('0x13')](_0x1af8c4=>{return _0x3d2b3c(_0x1af8c4);});})['catch'](_0x5e6f71=>{return _0x3d2b3c(_0x5e6f71);});});}}_0x2ba5d6[_0x510a('0x19b')]=Token;return _0x291d84[_0x510a('0x4')];};_0x5e4b0d[0xb]=function(_0x2a0630,_0xbddff2){'use strict';Object['defineProperty'](_0xbddff2,_0x510a('0x16'),{'value':!![]});_0xbddff2[_0x510a('0x81')]=undefined;var _0x6d624c=_0x59c414(0x1c,0xb);var _0x47868d=_0x59c414(0x4,0xb);var _0x17680b=_0x485fdb(_0x47868d);function _0x485fdb(_0x5ea86d){return _0x5ea86d&&_0x5ea86d[_0x510a('0x16')]?_0x5ea86d:{'default':_0x5ea86d};}let _0x4eacc7;class SessionManager{constructor(){this[_0x510a('0x188')]={};}[_0x510a('0xc2')](_0x4e6035,_0x2d9b0b){if(this['isSessionDefined'](_0x4e6035)){throw _0x510a('0x189');}this[_0x510a('0x188')][_0x4e6035]=new _0x6d624c['Session'](_0x4e6035,_0x2d9b0b);return this[_0x510a('0x188')][_0x4e6035];}['clearSession'](_0x339e60){if(this['isSessionDefined'](_0x339e60)){this[_0x510a('0x188')][_0x339e60]=null;delete this['sessions'][_0x339e60];}else{_0x17680b[_0x510a('0xd')][_0x510a('0xd1')]('Trying\x20to\x20delete\x20an\x20untracked\x20session');}}[_0x510a('0xa0')](_0x14a311){return this['sessions'][_0x14a311]!==undefined&&this[_0x510a('0x188')][_0x14a311]!==null;}[_0x510a('0xa1')](_0x1aee37){return this[_0x510a('0xa0')](_0x1aee37)?this[_0x510a('0x188')][_0x1aee37]:undefined;}['getAllSessions'](){return this[_0x510a('0x188')];}}_0xbddff2[_0x510a('0x81')]=SessionManager;function _0x424c22(){if(!_0x4eacc7){_0x4eacc7=new SessionManager();}return _0x4eacc7;}_0xbddff2[_0x510a('0xd')]=_0x424c22;return _0x2a0630[_0x510a('0x4')];};_0x5e4b0d[0xc]=function(_0x331946,_0x41a6de){'use strict';Object['defineProperty'](_0x41a6de,_0x510a('0x16'),{'value':!![]});_0x41a6de[_0x510a('0x124')]=undefined;var _0x1d87d7=require('bluebird');var _0x4b50e5=_0x59c414(0x1d,0xc);var _0x3c3a47=require(_0x510a('0x79'));var _0x2075b4=_0x243173(_0x3c3a47);function _0x243173(_0x5d248f){return _0x5d248f&&_0x5d248f[_0x510a('0x16')]?_0x5d248f:{'default':_0x5d248f};}_0x2075b4[_0x510a('0xd')][_0x510a('0x7b')]=!![];class BackendInteractionAPI extends _0x4b50e5['BackendAPI']{constructor(){super();}['getContactByID'](_0x31aa91){return new _0x1d87d7[(_0x510a('0x50'))]((_0x299239,_0x3c0380)=>{return this[_0x510a('0x171')]('interaction/contact/uuid/'+_0x31aa91)['then'](_0x20c0c4=>{return _0x299239(_0x20c0c4[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x151326=>{return _0x3c0380(_0x151326);});});}[_0x510a('0x19f')](_0x2d7184,_0x47d13d,_0x5e0a9b=''){return new _0x1d87d7[(_0x510a('0x50'))]((_0x2ad0e1,_0x3ac5bc)=>{if(_0x5e0a9b['length']===0x0){return this[_0x510a('0x171')]('interaction/contact/zid/'+_0x2d7184+'/cid/'+_0x47d13d)['then'](_0x17f591=>{return _0x2ad0e1(_0x17f591[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x2eb510=>{return _0x3ac5bc(_0x2eb510);});}else{return this[_0x510a('0x16f')](_0x510a('0x1a0')+_0x2d7184+_0x510a('0x1a1')+_0x47d13d,{'name':_0x5e0a9b})[_0x510a('0x10')](_0x48e0a1=>{return _0x2ad0e1(_0x48e0a1[_0x510a('0x16d')]);})['catch'](_0x486351=>{return _0x3ac5bc(_0x486351);});}});}[_0x510a('0x1a2')](_0x21f76f,_0x4444aa=[]){return new _0x1d87d7[(_0x510a('0x50'))]((_0x109513,_0x599a4b)=>{return this[_0x510a('0x16f')](_0x510a('0x1a0')+_0x21f76f+_0x510a('0x1a3'),_0x4444aa)[_0x510a('0x10')](_0x5a35f2=>{return _0x109513(_0x5a35f2[_0x510a('0x16d')]);})['catch'](_0x2099f7=>{return _0x599a4b(_0x2099f7);});});}[_0x510a('0x1a4')](_0x1bac99){return new _0x1d87d7[(_0x510a('0x50'))]((_0x171792,_0x3daaf6)=>{return this['getResource'](_0x510a('0x1a0')+_0x1bac99)[_0x510a('0x10')](_0x5d667a=>{return _0x171792(_0x5d667a[_0x510a('0x16d')]);})['catch'](_0x39428c=>{return _0x3daaf6(_0x39428c);});});}['getContactIDsByZuluIDs'](_0x538dc4=[]){return new _0x1d87d7['Promise']((_0x1b575f,_0x164ab4)=>{return this[_0x510a('0x16f')](_0x510a('0x1a5'),_0x538dc4)[_0x510a('0x10')](_0x58feb3=>{return _0x1b575f(_0x58feb3[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x3efad0=>{return _0x164ab4(_0x3efad0);});});}[_0x510a('0x1a6')](_0xc61c60,_0x3a6c29=[]){return new _0x1d87d7[(_0x510a('0x50'))]((_0x3434f7,_0xa69bfa)=>{return this['postResource'](_0x510a('0x1a7')+_0xc61c60+_0x510a('0x1a3'),_0x3a6c29)[_0x510a('0x10')](_0x470152=>{return _0x3434f7(_0x470152['body']);})[_0x510a('0x13')](_0x389810=>{return _0xa69bfa(_0x389810);});});}[_0x510a('0x1a8')](_0xe8d97d=[]){return new _0x1d87d7[(_0x510a('0x50'))]((_0x2afd57,_0x196722)=>{return this[_0x510a('0x16f')]('interaction/interaction/zid',_0xe8d97d)[_0x510a('0x10')](_0x4ac439=>{return _0x2afd57(_0x4ac439[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x2cffe4=>{return _0x196722(_0x2cffe4);});});}[_0x510a('0x1a9')](_0x4eb4a3=[]){return new _0x1d87d7[(_0x510a('0x50'))]((_0x278730,_0x4f8491)=>{return this[_0x510a('0x16f')](_0x510a('0x1aa'),_0x4eb4a3)[_0x510a('0x10')](_0x50e1af=>{return _0x278730(_0x50e1af['body']);})['catch'](_0x2cadb5=>{return _0x4f8491(_0x2cadb5);});});}[_0x510a('0x1ab')](_0x172be2){return new _0x1d87d7[(_0x510a('0x50'))]((_0xf8e2c4,_0x20a4c3)=>{return this[_0x510a('0x171')](_0x510a('0x1ac')+_0x172be2)[_0x510a('0x10')](_0x177dd6=>{return _0xf8e2c4(_0x177dd6[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x104d17=>{return _0x20a4c3(_0x104d17);});});}[_0x510a('0x1ad')](_0x5e6372,_0x18b589,_0x27401f,_0x1ca249,_0x265149={},_0x5a6ea2=null,_0x53ab61=null,_0x56f6fd=null,_0x492063=null,_0x2397fb=null){const _0x474acd={'type':_0x1ca249,'body':_0x265149,'searchable':_0x5a6ea2,'links':_0x53ab61,'when':_0x56f6fd,'clientData':_0x492063,'isConf':_0x2397fb};return new _0x1d87d7[(_0x510a('0x50'))]((_0x3ec7ab,_0x544d99)=>{return this[_0x510a('0x16f')](_0x510a('0x1ac')+_0x5e6372+'/zid/'+_0x18b589+_0x510a('0x1ae')+_0x27401f+_0x510a('0x1af'),_0x474acd)[_0x510a('0x10')](_0x4ff60b=>{return _0x3ec7ab(_0x4ff60b[_0x510a('0x16d')]);})['catch'](_0x598dbb=>{return _0x544d99(_0x598dbb);});});}['saveMultipleStreams'](_0x591c28,_0xc59086,_0x4c6046,_0x105620,_0x32ea79={},_0x4e435c=null,_0x2b9b30=null){return new _0x1d87d7[(_0x510a('0x50'))]((_0x5c7f21,_0x247517)=>{let _0x4c451e={'type':_0x105620,'contactuuid':_0x4c6046,'body':_0x32ea79,'searchable':_0x4e435c,'links':_0x2b9b30,'members':_0xc59086};return this[_0x510a('0x16f')](_0x510a('0x1ac')+_0x591c28+_0x510a('0x1b0'),_0x4c451e)[_0x510a('0x10')](_0x5c1879=>{return _0x5c7f21(_0x5c1879['body']);})[_0x510a('0x13')](_0x3e97cd=>{return _0x247517(_0x3e97cd);});});}[_0x510a('0x1b1')](_0x44a055){return new _0x1d87d7['Promise']((_0x2b6fe6,_0x21c216)=>{return this['getResource'](_0x510a('0x1ac')+_0x44a055+_0x510a('0x1b2'))[_0x510a('0x10')](_0x32111e=>{return _0x2b6fe6(_0x32111e[_0x510a('0x16d')]);})['catch'](_0x5cadf1=>{return _0x21c216(_0x5cadf1);});});}['getContactuuidByExtension'](_0x5215a9){return new _0x1d87d7[(_0x510a('0x50'))]((_0x589035,_0x264d68)=>{return this[_0x510a('0x171')]('interaction/'+_0x5215a9+'/contactuuid')[_0x510a('0x10')](_0x212402=>{return _0x589035(_0x212402[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x2b108e=>{return _0x264d68(_0x2b108e);});});}[_0x510a('0x1b3')](_0x546ff6,_0x44fa77,_0xa14a15,_0x14badd=null){return new _0x1d87d7[(_0x510a('0x50'))]((_0x3b71f,_0x356551)=>{let _0x445057={'body':_0xa14a15,'links':_0x14badd};return this[_0x510a('0x1b4')](_0x510a('0x1ac')+_0x44fa77+_0x510a('0x1b5')+_0x546ff6,_0x445057)[_0x510a('0x10')](_0x187013=>{return _0x3b71f(_0x187013['body']);})[_0x510a('0x13')](_0x4657f6=>{return _0x356551(_0x4657f6);});});}[_0x510a('0x1b6')](_0x2fa5e9,_0x3e7132,_0x14d8b6=![]){return new _0x1d87d7[(_0x510a('0x50'))]((_0x5d9b86,_0x425a5b)=>{return this[_0x510a('0x16f')](_0x510a('0x1ac')+_0x2fa5e9+_0x510a('0x1b7')+_0x3e7132,{'isOwner':_0x14d8b6})[_0x510a('0x10')](_0x1b76af=>{return _0x5d9b86(_0x1b76af[_0x510a('0x16d')]);})[_0x510a('0x13')](_0x582d37=>{return _0x425a5b(_0x582d37);});});}[_0x510a('0x1b8')](){return this[_0x510a('0x1b4')](_0x510a('0x1b9'));}[_0x510a('0x1ba')](_0x4f0274){return this[_0x510a('0x16f')](_0x510a('0x1bb'),{'callerIds':_0x4f0274})[_0x510a('0x10')](_0x605394=>_0x605394[_0x510a('0x16d')]);}}_0x41a6de[_0x510a('0x124')]=BackendInteractionAPI;return _0x331946[_0x510a('0x4')];};_0x5e4b0d[0xd]=function(_0x239f48,_0x5da12a){'use strict';Object[_0x510a('0x75')](_0x5da12a,_0x510a('0x16'),{'value':!![]});_0x5da12a['BackendMobileNotificationsAPI']=undefined;var _0x2d4b01=_0x59c414(0x1d,0xd);var _0x5b77fe=_0x59c414(0x4,0xd);var _0x2a98e4=_0x4dc9b0(_0x5b77fe);function _0x4dc9b0(_0x3da4d7){return _0x3da4d7&&_0x3da4d7[_0x510a('0x16')]?_0x3da4d7:{'default':_0x3da4d7};}class BackendMobileNotificationsAPI extends _0x2d4b01[_0x510a('0x1bc')]{constructor(){super();}[_0x510a('0x1bd')](_0x153c36,_0x1a0de1,_0xca0a5b,_0x1e0dc1,_0x561407,_0x141f77,_0x36e63c){_0x2a98e4[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x1be')+_0x153c36);let _0x346110=_0x510a('0x1bf')+_0x153c36;let _0x267897={'callerNumber':_0x1a0de1,'callerName':_0xca0a5b,'callbackURI':_0x1e0dc1,'token':_0x561407,'interactionId':_0x141f77,'zuluRingTimer':_0x36e63c};return this[_0x510a('0x16f')](_0x346110,_0x267897);}[_0x510a('0x1c0')](_0x5aecce,_0x5cb1dd,_0x138bf8,_0x2ab5f9){_0x2a98e4['default'][_0x510a('0x11')](_0x510a('0x1c1')+_0x5aecce);let _0xfe17d3=_0x510a('0x1c2')+_0x5aecce;let _0x4a5633={'callerid':_0x138bf8+'\x20<'+_0x5cb1dd+'>','interactionId':_0x2ab5f9};return this[_0x510a('0x16f')](_0xfe17d3,_0x4a5633);}[_0x510a('0x1c3')](_0x5e00ba,_0x68a6fb,_0x2e6993,_0x37eb6e){_0x2a98e4[_0x510a('0xd')][_0x510a('0x11')]('Sending\x20chat\x20push\x20notification\x20from\x20'+_0x5e00ba+_0x510a('0x6e')+_0x68a6fb);let _0x5ed233=_0x510a('0x1c4')+_0x5e00ba;let _0x13a0a4={'message':_0x2e6993,'uid':_0x68a6fb,'interactionId':_0x37eb6e};return this[_0x510a('0x16f')](_0x5ed233,_0x13a0a4);}[_0x510a('0x1c5')](_0x26d0c7,_0x57b183,_0x366155,_0xa48d7){_0x2a98e4[_0x510a('0xd')]['info']('Sending\x20missedCall\x20push\x20notification\x20to\x20'+_0x26d0c7);let _0x50506b='mobile/missedcall/'+_0x26d0c7;let _0x623359={'callerid':_0x366155+'\x20<'+_0x57b183+'>','interactionId':_0xa48d7};return this[_0x510a('0x16f')](_0x50506b,_0x623359);}[_0x510a('0x1c6')](_0x2f518c,_0x1ce755,_0x225bb7,_0x1bc870){_0x2a98e4[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x1c7')+_0x2f518c);let _0x3aa5d9=_0x510a('0x1c8')+_0x2f518c;return this[_0x510a('0x16f')](_0x3aa5d9,{'callbackURI':_0x1ce755,'token':_0x225bb7,'interactionId':_0x1bc870});}async[_0x510a('0x1c9')](_0x1d764e){_0x2a98e4[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x1ca')+_0x1d764e);const _0x119b14=_0x510a('0x1cb')+_0x1d764e;const _0x51d689=await this[_0x510a('0x171')](_0x119b14);return _0x51d689['body'];}async[_0x510a('0x1cc')](_0x13ee5a,_0x2ebf04){_0x2a98e4[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x1cd')+_0x13ee5a+_0x510a('0x1ce')+_0x2ebf04);const _0x349b6a=_0x510a('0x1cf')+_0x13ee5a+_0x510a('0x1d0')+_0x2ebf04;const _0x54e088=await this[_0x510a('0x171')](_0x349b6a);return _0x54e088[_0x510a('0x16d')];}}_0x5da12a[_0x510a('0x125')]=BackendMobileNotificationsAPI;return _0x239f48['exports'];};_0x5e4b0d[0xe]=function(_0x3efe86,_0x1b5d64){'use strict';Object[_0x510a('0x75')](_0x1b5d64,_0x510a('0x16'),{'value':!![]});_0x1b5d64[_0x510a('0x14d')]=undefined;var _0x1026c8=require(_0x510a('0x108'));var _0x38557e=_0x27526d(_0x1026c8);var _0x151963=require(_0x510a('0x1d1'));var _0x226bea=_0x27526d(_0x151963);var _0x323477=require(_0x510a('0x76'));var _0x2c21ca=_0x27526d(_0x323477);var _0x6f942=require(_0x510a('0x107'));var _0x14115e=_0x27526d(_0x6f942);var _0x278c42=_0x59c414(0x4,0xe);var _0x543d9f=_0x27526d(_0x278c42);var _0x22b917=require(_0x510a('0x19'));var _0x4a2f20=_0x59c414(0x1e,0xe);var _0x78d7c7=_0x59c414(0x1f,0xe);var _0x45d91a=_0x59c414(0x20,0xe);var _0x261c99=_0x59c414(0x21,0xe);function _0x27526d(_0x571f1d){return _0x571f1d&&_0x571f1d[_0x510a('0x16')]?_0x571f1d:{'default':_0x571f1d};}class Call{constructor(_0x493ea7,_0x5b09dd,_0x57a43c){(0x0,_0x2c21ca[_0x510a('0xd')])(this);this[_0x510a('0x1d2')]=_0x493ea7;this[_0x510a('0x1d3')]=_0x5b09dd;this[_0x510a('0x1d4')]=_0x57a43c;this[_0x510a('0x1d5')]={};this[_0x510a('0x1d6')]={};this[_0x510a('0x1d7')]=new _0x261c99['ZuluBridge']();this['_ClientServer']['on'](_0x510a('0x1d8'),this['callOut'][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x1d9'),this[_0x510a('0x1da')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x1db'),this[_0x510a('0x1dc')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x1dd'),this[_0x510a('0x1de')][_0x510a('0x10c')](this));this[_0x510a('0x1d4')]['on']('ws::message::callStates',(_0x323f2e,_0x1363c0)=>{_0x323f2e[_0x510a('0xe7')]({'actionid':_0x1363c0['id'],'callStates':this[_0x510a('0x1d6')]});});this[_0x510a('0x1df')]=new _0x45d91a[(_0x510a('0x1e0'))](_0x493ea7,_0x5b09dd,_0x57a43c);this[_0x510a('0x1e1')]=new _0x4a2f20[(_0x510a('0x1e2'))](_0x493ea7,_0x5b09dd,_0x57a43c,this[_0x510a('0x1d7')],this['callConference']);this[_0x510a('0x1e3')]=new _0x78d7c7['CallProcessing'](_0x493ea7,_0x5b09dd,_0x57a43c,this[_0x510a('0x1d7')]);this[_0x510a('0x1e1')]['on'](_0x510a('0x3'),this['subscribeToCallChanges'][_0x510a('0x10c')](this));this[_0x510a('0x1e1')]['on'](_0x510a('0x1e4'),this[_0x510a('0x1e5')][_0x510a('0x10c')](this));this['callConference']['on'](_0x510a('0x1e4'),this[_0x510a('0x1e5')]['bind'](this));}[_0x510a('0x1e6')](_0x180388){_0x543d9f[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x1e7')+_0x180388[_0x510a('0x62')]+_0x510a('0x1e8')+(_0x180388[_0x510a('0x1e9')][_0x510a('0x1ea')]+'\x20<'+_0x180388[_0x510a('0x1e9')][_0x510a('0x1eb')]+_0x510a('0x1ec')+_0x180388['to']));if(_0x180388[_0x510a('0x62')]==_0x510a('0x1ed')&&!_0x38557e['default'][_0x510a('0x1ee')](_0x180388[_0x510a('0x1e9')][_0x510a('0x1eb')])&&_0x180388[_0x510a('0x1e9')][_0x510a('0x1eb')]!==''&&!_0x38557e[_0x510a('0xd')][_0x510a('0x1ee')](_0x180388['to'])&&_0x180388['to']!==''){this['_BackendServer'][_0x510a('0xad')][_0x510a('0x1a9')]([{'name':_0x180388[_0x510a('0x1e9')][_0x510a('0x1ea')],'number':_0x180388['from'][_0x510a('0x1eb')]},{'name':'','number':_0x180388['to']}])[_0x510a('0x10')](_0x59e482=>{_0x180388[_0x510a('0x1ef')]=_0x59e482;this[_0x510a('0x1f0')](_0x180388);})[_0x510a('0x13')](_0x4e4661=>{});}else{this[_0x510a('0x1f0')](_0x180388);}}[_0x510a('0x1f0')](_0x4a3132){const _0x21f450=this[_0x510a('0x1d3')][_0x510a('0xa2')]();let _0x699a60=![];_0x226bea[_0x510a('0xd')][_0x510a('0x113')](_0x21f450,(_0x23636c,_0x385f65,_0x4d51a8)=>{if(_0x23636c[_0x510a('0xe5')][_0x510a('0x1f1')]===_0x4a3132['to']){_0x543d9f[_0x510a('0xd')][_0x510a('0x11')]('Sending\x20Call\x20event\x20message\x20\x27'+_0x4a3132['action']+'\x27'+(_0x510a('0x6e')+_0x4a3132['to']+'\x20['+_0x385f65+']'));_0x699a60=!![];_0x23636c[_0x510a('0xe7')]({'command':_0x510a('0x1f2'),'actionid':this[_0x510a('0x1d5')][_0x385f65]?this['actionidmap'][_0x385f65]:(0x0,_0x14115e[_0x510a('0xd')])(),'type':_0x510a('0x3'),'data':_0x4a3132});}_0x4d51a8();},_0x1453a4=>{if(_0x1453a4){_0x543d9f['default']['error']('sendCallEventToClient\x20error',_0x1453a4);return;}if(!_0x699a60){_0x543d9f['default'][_0x510a('0xd1')](_0x510a('0x1f3')+_0x4a3132['to']+_0x510a('0x1f4'));}});}['createConferenceNumber'](_0x3abbcf,_0xd6bd65){return new _0x22b917[(_0x510a('0x50'))]((_0x104837,_0x26e6db)=>{if(!_0xd6bd65['id']||!_0xd6bd65[_0x510a('0x1ef')]){_0x543d9f[_0x510a('0xd')][_0x510a('0x2b')]('Missing\x20parameters');_0x3abbcf['sendError'](_0xd6bd65['id'],_0x510a('0x1f5'));return _0x26e6db(new Error(_0x510a('0x1f5')));}return this['callConference'][_0x510a('0x1f6')](_0xd6bd65[_0x510a('0x1ef')],_0x3abbcf[_0x510a('0xe8')],_0x3abbcf[_0x510a('0xe5')]['id'])[_0x510a('0x10')](_0xa7a39a=>{_0x543d9f[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x1f7')+_0xa7a39a+'\x20was\x20linked\x20to\x20the\x20stasis\x20application');_0x3abbcf['sendJSON']({'status':!![],'actionid':_0xd6bd65['id'],'interactionid':_0xd6bd65[_0x510a('0x1ef')],'conference_number':_0xa7a39a});return _0x104837();})['catch'](_0x4029c5=>{_0x543d9f['default']['error'](_0x510a('0x1f8'),_0x4029c5);_0x3abbcf[_0x510a('0xfb')](_0xd6bd65['id'],_0x4029c5[_0x510a('0xc3')]);return _0x26e6db(_0x4029c5);});});}[_0x510a('0x1f9')](_0xce30d5,_0x7890a){return new _0x22b917[(_0x510a('0x50'))]((_0x38d2ef,_0xdd3822)=>{if(_0x7890a['data']&&_0x7890a[_0x510a('0xd3')]['number']){let _0x32f4ad='originate-zulu-aa';let _0x2c0476=_0x7890a[_0x510a('0xd3')][_0x510a('0x1fa')][_0x510a('0x114')]()[_0x510a('0x1fb')](/[^0-9a-d\*#+]/g,'');_0x543d9f[_0x510a('0xd')][_0x510a('0x11')]('Initiating\x20Call\x20from\x20'+_0xce30d5[_0x510a('0xe5')][_0x510a('0x1f1')]+('\x20to\x20'+_0x2c0476));this[_0x510a('0x1d2')][_0x510a('0x61')]({'action':_0x510a('0x1fc'),'channel':_0x510a('0x1fd')+_0xce30d5[_0x510a('0xe5')]['default_extension']+'@'+_0x32f4ad,'context':'from-internal','exten':_0x2c0476,'priority':0x1,'async':'yes','callerid':_0x510a('0x1fe')+_0x2c0476+'>','variable':{'AUTOANSWER':_0x510a('0x1ff')}})[_0x510a('0x10')](_0x94014b=>{if(_0x94014b){if(_0x94014b[_0x510a('0x200')]===_0x510a('0x201')){_0xce30d5[_0x510a('0x11d')](_0x7890a['id']);_0x38d2ef();}else{_0x543d9f[_0x510a('0xd')][_0x510a('0x2b')]('Unknown\x20dialout\x20error',_0x94014b);_0xce30d5[_0x510a('0xfb')](_0x7890a['id'],'Unknown');_0xdd3822(new Error(_0x510a('0x202')));}}else{_0x543d9f[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x203'),_0x94014b);_0xce30d5[_0x510a('0xfb')](_0x7890a['id'],_0x510a('0x204'));_0xdd3822(new Error('Empty\x20response'));}})[_0x510a('0x13')](_0x803e62=>{_0x543d9f['default'][_0x510a('0x2b')](_0x510a('0x205'),_0x803e62);_0xce30d5[_0x510a('0xfb')](_0x7890a['id'],_0x803e62['message']);_0xdd3822(_0x803e62);});}else{_0x543d9f['default'][_0x510a('0xd1')](_0x510a('0x206'));_0xce30d5[_0x510a('0xfb')](_0x7890a['id'],_0x510a('0x207'));_0xdd3822(new Error('Number\x20was\x20not\x20defined'));}});}['callUnsubscribe'](_0x4332d1,_0x27e6fe){if(this['actionidmap'][_0x4332d1['id']]){delete this[_0x510a('0x1d5')][_0x4332d1['id']];}_0x4332d1['sendTrue'](_0x27e6fe['id']);}['callSubscribe'](_0x446b3b,_0x8dd6e4){this[_0x510a('0x1d5')][_0x446b3b['id']]=_0x8dd6e4['id'];_0x446b3b[_0x510a('0x11d')](_0x8dd6e4['id']);}async[_0x510a('0x1e5')](_0x105ddc){_0x543d9f[_0x510a('0xd')]['debug'](_0x510a('0x208')+JSON[_0x510a('0x52')](_0x105ddc)+')');if(_0x105ddc[_0x510a('0x3')]){const _0x6ca2a8=_0x105ddc['call']['getFromNum']();const _0x9e8fb8=_0x105ddc[_0x510a('0x3')][_0x510a('0x209')]();const _0x3c6f9b=await this['_BackendServer'][_0x510a('0xad')][_0x510a('0x20a')](_0x6ca2a8);const _0x55fdfe=await this['_BackendServer'][_0x510a('0xad')][_0x510a('0x20a')](_0x9e8fb8);const _0x2360a9=(0x0,_0x14115e['default'])();let _0x474c61={'actionid':_0x2360a9,'action':'call::presence','state':'IDLE'};let _0xb3ea9a={'actionid':_0x2360a9,'action':'call::presence','state':_0x510a('0x20b')};let _0x368c20=!![];let _0x57c199=!![];if(_0x3c6f9b!==![]){const _0x55d876=await this['_BackendServer'][_0x510a('0xad')][_0x510a('0x20c')](_0x3c6f9b['zid']);if((!_0x55d876||_0x55d876==='0')&&!this[_0x510a('0x1d6')][_0x3c6f9b[_0x510a('0xe8')]]){_0x368c20=![];}else{if(!this['callStates'][_0x3c6f9b[_0x510a('0xe8')]]){this[_0x510a('0x1d6')][_0x3c6f9b[_0x510a('0xe8')]]={};}_0x474c61[_0x510a('0x17a')]=_0x3c6f9b[_0x510a('0xe8')];if(_0x105ddc[_0x510a('0x20d')]!==_0x510a('0x20b')){if(_0x55d876===_0x510a('0x20e')){this[_0x510a('0x1d6')][_0x3c6f9b['contactuuid']][_0x510a('0x20e')]=_0x9e8fb8;_0x474c61[_0x510a('0x20e')]=_0x9e8fb8;this['callStates'][_0x3c6f9b[_0x510a('0xe8')]]['callername']=_0x105ddc[_0x510a('0x3')][_0x510a('0x20f')]();_0x474c61['callername']=_0x105ddc[_0x510a('0x3')][_0x510a('0x20f')]();}if(_0x105ddc[_0x510a('0x20d')]===_0x510a('0x210')){this[_0x510a('0x1d6')][_0x3c6f9b['contactuuid']][_0x510a('0x20d')]=_0x510a('0x211');_0x474c61[_0x510a('0x20d')]='CALLING';}else{this[_0x510a('0x1d6')][_0x3c6f9b[_0x510a('0xe8')]][_0x510a('0x20d')]=_0x105ddc[_0x510a('0x20d')];_0x474c61[_0x510a('0x20d')]=_0x105ddc['state'];}}else{delete this[_0x510a('0x1d6')][_0x3c6f9b[_0x510a('0xe8')]];}}}if(_0x55fdfe!==![]){const _0xa6c869=await this['_BackendServer'][_0x510a('0xad')][_0x510a('0x20c')](_0x55fdfe[_0x510a('0x112')]);if((!_0xa6c869||_0xa6c869==='0')&&!this['callStates'][_0x55fdfe[_0x510a('0xe8')]]){_0x57c199=![];}else{if(!this[_0x510a('0x1d6')][_0x55fdfe[_0x510a('0xe8')]]){this[_0x510a('0x1d6')][_0x55fdfe[_0x510a('0xe8')]]={};}_0xb3ea9a[_0x510a('0x17a')]=_0x55fdfe[_0x510a('0xe8')];if(_0x105ddc[_0x510a('0x20d')]!==_0x510a('0x20b')){if(_0xa6c869===_0x510a('0x20e')){this[_0x510a('0x1d6')][_0x55fdfe[_0x510a('0xe8')]]['callerid']=_0x6ca2a8;_0xb3ea9a[_0x510a('0x20e')]=_0x6ca2a8;this[_0x510a('0x1d6')][_0x55fdfe[_0x510a('0xe8')]]['callername']=_0x105ddc[_0x510a('0x3')][_0x510a('0x212')]();_0xb3ea9a[_0x510a('0x213')]=_0x105ddc[_0x510a('0x3')][_0x510a('0x212')]();}this['callStates'][_0x55fdfe['contactuuid']][_0x510a('0x20d')]=_0x105ddc[_0x510a('0x20d')];_0xb3ea9a[_0x510a('0x20d')]=_0x105ddc[_0x510a('0x20d')];}else{delete this[_0x510a('0x1d6')][_0x55fdfe['contactuuid']];}}}if(_0x3c6f9b!==![]&&_0x368c20||_0x55fdfe!==![]&&_0x57c199){const _0x58547c=this[_0x510a('0x1d3')]['getAllSessions']();_0x226bea['default'][_0x510a('0x214')](_0x58547c,(_0x2652bf,_0x33c3d8)=>{if(_0x3c6f9b!==![]&&_0x368c20){_0x2652bf[_0x510a('0xe7')](_0x474c61);}if(_0x55fdfe!==![]&&_0x57c199){_0x2652bf[_0x510a('0xe7')](_0xb3ea9a);}_0x33c3d8();},_0x1adbbc=>{if(_0x1adbbc){_0x543d9f[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x215'),_0x1adbbc);}});}}}}_0x1b5d64[_0x510a('0x14d')]=Call;return _0x3efe86[_0x510a('0x4')];};_0x5e4b0d[0xf]=function(_0x57c95e,_0x20321a){'use strict';Object['defineProperty'](_0x20321a,'__esModule',{'value':!![]});_0x20321a['Config']=undefined;var _0x10cd61=require(_0x510a('0x19'));var _0x568224=require(_0x510a('0x108'));var _0x19e712=_0x367544(_0x568224);var _0x3cdc4c=require(_0x510a('0x76'));var _0x268732=_0x367544(_0x3cdc4c);var _0x1cbad2=_0x59c414(0x4,0xf);var _0x42c2dd=_0x367544(_0x1cbad2);function _0x367544(_0x750e15){return _0x750e15&&_0x750e15[_0x510a('0x16')]?_0x750e15:{'default':_0x750e15};}class Config{constructor(_0x4f6c16,_0x4aeeb2,_0x4a3e7f){this[_0x510a('0x1d3')]=_0x4aeeb2;this[_0x510a('0x1d4')]=_0x4a3e7f;this[_0x510a('0x1d2')]=_0x4f6c16;setInterval(()=>{this[_0x510a('0x216')](!![])[_0x510a('0x13')](_0x23aa3e=>{_0x42c2dd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x217'),_0x23aa3e);});},0x36ee80);this[_0x510a('0x1d3')]['on'](_0x510a('0x218'),this[_0x510a('0x219')]['bind'](this));this['_BackendServer']['on'](_0x510a('0x21a'),(_0x1423aa,_0x1f2a4c)=>{if(_0x1f2a4c[_0x510a('0xd3')]&&_0x1f2a4c['data'][_0x510a('0x21b')]){_0x42c2dd[_0x510a('0xd')][_0x510a('0x4a')]('modules/Config\x20ws::message::turnSettings\x20setting\x20interval\x20for',_0x1f2a4c['data'][_0x510a('0x21b')],'ms');setTimeout(()=>{this[_0x510a('0x216')]()['catch'](_0x560ab1=>{_0x42c2dd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x21c'),_0x560ab1);});},_0x1f2a4c[_0x510a('0xd3')]['timeToLiveMillis']);}else{_0x42c2dd[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x21d'),_0x1f2a4c['data']);}_0x1423aa[_0x510a('0xe7')]({'actionid':_0x1f2a4c['id']});});(0x0,_0x268732[_0x510a('0xd')])(this);}async['turnUpdateSettings'](_0x52d62a=![]){let _0x28ec1b=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x21e')](_0x52d62a);if(_0x28ec1b){let _0xb0c5e=this['_ClientServer'][_0x510a('0xa2')]();await _0x10cd61[_0x510a('0x50')]['all'](_0x19e712[_0x510a('0xd')][_0x510a('0x21f')](_0xb0c5e,async _0x2a2f92=>{const _0x3966d5=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x220')](_0x2a2f92[_0x510a('0x221')]['id']);if(_0x3966d5['stunSetting']==='1'||_0x3966d5['turnSetting']==='1'){let _0x3360e5;if(_0x3966d5[_0x510a('0x222')]!=='1'){_0x3360e5=_0x19e712[_0x510a('0xd')][_0x510a('0x223')](_0x28ec1b,[_0x510a('0x224')]);}else if(_0x3966d5['turnSetting']!=='1'){_0x3360e5=_0x19e712[_0x510a('0xd')][_0x510a('0x223')](_0x28ec1b,[_0x510a('0x225')]);}else{_0x3360e5=_0x19e712[_0x510a('0xd')]['clone'](_0x28ec1b);}_0x2a2f92[_0x510a('0xe7')]({'action':'new_turnServers','turnServers':_0x3360e5});}}));}else{_0x42c2dd[_0x510a('0xd')][_0x510a('0x2b')]('Config',_0x510a('0x216'),'no\x20turnServers\x20found',_0x28ec1b);}}[_0x510a('0x219')](_0x549cda,_0x359b47){return new _0x10cd61[(_0x510a('0x50'))]((_0x53f72e,_0x1b7393)=>{_0x549cda[_0x510a('0xad')]['getConfig']()[_0x510a('0x10')](_0x16bb2b=>{if(_0x16bb2b){if(_0x16bb2b[_0x510a('0xe9')]){return _0x10cd61[_0x510a('0x50')][_0x510a('0x226')]([this[_0x510a('0x1d2')][_0x510a('0x55')](_0x510a('0x227')),_0x10cd61[_0x510a('0x50')]['resolve'](_0x16bb2b)]);}else{_0x549cda[_0x510a('0xfb')](_0x359b47['id'],''+_0x16bb2b['error']);_0x1b7393(new Error(_0x16bb2b[_0x510a('0x2b')]));}}else{_0x549cda['sendError'](_0x359b47['id'],_0x510a('0x204'));_0x1b7393(new Error(_0x510a('0x204')));}})[_0x510a('0x10')](_0x5ebce9=>{let _0x14c6f=_0x5ebce9[0x0];let _0x11b7ba=_0x5ebce9[0x1];_0x549cda[_0x510a('0xe7')]({'status':!![],'actionid':_0x359b47['id'],'brand':_0x14c6f,'user':_0x549cda[_0x510a('0xe5')],'apps':_0x11b7ba[_0x510a('0xe1')],'appdata':_0x11b7ba[_0x510a('0xe2')],'version':this[_0x510a('0x1d2')][_0x510a('0x30')],'presence':_0x11b7ba['presence']});_0x53f72e();})['catch'](_0x743c8a=>{_0x42c2dd[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20pulling\x20configuration',_0x743c8a);_0x549cda['sendError'](_0x359b47['id'],_0x743c8a['message']);_0x1b7393(_0x743c8a);});});}}_0x20321a[_0x510a('0x14e')]=Config;return _0x57c95e[_0x510a('0x4')];};_0x5e4b0d[0x10]=function(_0x3bdd1d,_0x5b19d4){'use strict';Object[_0x510a('0x75')](_0x5b19d4,'__esModule',{'value':!![]});_0x5b19d4[_0x510a('0x14f')]=undefined;var _0x2f7e4a=require(_0x510a('0x76'));var _0x4fd4de=_0x2c5c8f(_0x2f7e4a);var _0x4609c4=require(_0x510a('0x19'));var _0x54adb3=require(_0x510a('0x1d1'));var _0x5ba941=_0x2c5c8f(_0x54adb3);var _0x4539a7=require(_0x510a('0x106'));var _0x17e4f5=_0x2c5c8f(_0x4539a7);var _0x351840=_0x59c414(0x4,0x10);var _0xf28c3e=_0x2c5c8f(_0x351840);var _0x8994fa=_0x59c414(0x22,0x10);var _0x397287=_0x2c5c8f(_0x8994fa);function _0x2c5c8f(_0x17356f){return _0x17356f&&_0x17356f[_0x510a('0x16')]?_0x17356f:{'default':_0x17356f};}class Chat extends _0x17e4f5[_0x510a('0xd')]{constructor(_0x87a991,_0x4df84b,_0x339096){super();this['chatSessions']={};this[_0x510a('0x1d3')]=_0x4df84b;this[_0x510a('0x1d4')]=_0x339096;this[_0x510a('0x1d2')]=_0x87a991;this[_0x510a('0x1d3')]['on'](_0x510a('0xf3'),this[_0x510a('0x228')][_0x510a('0x10c')](this));this['_ClientServer']['on'](_0x510a('0x103'),(_0x50d1bd,_0x341a4e)=>{this[_0x510a('0x229')](_0x50d1bd);});this[_0x510a('0x1d4')]['on']('ws::message::chatConnected',(_0x5f2b32,_0x565f44)=>{const _0x84ef5e=this[_0x510a('0x22a')](_0x565f44[_0x510a('0xd3')][_0x510a('0x119')]);if(_0x84ef5e){_0x5f2b32[_0x510a('0x11d')](_0x565f44['id']);}else{_0x5f2b32[_0x510a('0x22b')](_0x565f44['id']);}});this[_0x510a('0x1d3')]['on'](_0x510a('0x22c'),this[_0x510a('0x22d')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x22e'),this['rpc'][_0x510a('0x10c')](this));(0x0,_0x4fd4de['default'])(this);}['startChat'](_0x2a7376,_0x28f87d){if(!_0x2a7376['apps']||_0x2a7376[_0x510a('0xe1')][_0x510a('0x22f')](_0x510a('0x230'))===-0x1){_0xf28c3e['default'][_0x510a('0x11')](_0x510a('0x231')+_0x2a7376[_0x510a('0xe5')][_0x510a('0xe6')]);return;}this[_0x510a('0x232')][_0x2a7376['id']]=new _0x397287['default'](this,_0x2a7376,this['_ClientServer'],this[_0x510a('0x1d4')]);}[_0x510a('0x22d')](_0x41b5fc,_0x147988){return new _0x4609c4[(_0x510a('0x50'))]((_0x1e68d2,_0x59f43b)=>{const _0x2755a9=this[_0x510a('0x232')][_0x41b5fc['id']];if(!_0x2755a9){_0xf28c3e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x233'),_0x41b5fc['id']);_0x59f43b(new Error(_0x510a('0x234')));return;}_0xf28c3e[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x235'),_0x147988);_0x2755a9[_0x510a('0x22d')](_0x147988)[_0x510a('0x10')](_0x27bb12=>{_0x41b5fc['sendJSON']({'actionid':_0x147988['id'],'type':_0x147988['type'],'response':_0x27bb12});_0x1e68d2(_0x27bb12);})[_0x510a('0x13')](_0x53163e=>{_0x41b5fc[_0x510a('0xfb')](_0x147988['id'],''+_0x53163e);_0x59f43b(_0x53163e);});});}[_0x510a('0x229')](_0x2a1825){if(_0x2a1825['apps']&&_0x2a1825[_0x510a('0xe1')][_0x510a('0x22f')]('chat')===-0x1){return;}if(!_0x2a1825['id']){_0xf28c3e[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x236'),_0x2a1825);return;}const _0x86db37=this[_0x510a('0x232')][_0x2a1825['id']];if(!_0x86db37){_0xf28c3e[_0x510a('0xd')]['debug'](_0x510a('0x233'),_0x2a1825['id']);return;}let _0x2a4289=this[_0x510a('0x1d3')][_0x510a('0xa2')]();let _0x3bdd23=0x0;_0x5ba941[_0x510a('0xd')][_0x510a('0x237')](_0x2a4289,(_0x2f343f,_0x5cd5f0)=>{if(_0x2f343f['contactuuid']===_0x2a1825['contactuuid']){_0x3bdd23++;}_0x5cd5f0();},_0x87a34a=>{if(_0x87a34a){_0xf28c3e['default']['error'](_0x510a('0x238'),_0x2a1825['id']);}else{if(_0x3bdd23<=0x1){_0x86db37['stop']();_0xf28c3e[_0x510a('0xd')]['info'](_0x510a('0x239'),_0x2a1825[_0x510a('0xe5')]);}delete this['chatSessions'][_0x2a1825['id']];}});}[_0x510a('0x22a')](_0x1e5e3f){if(!this[_0x510a('0x232')][_0x1e5e3f]){return![];}return this['chatSessions'][_0x1e5e3f];}}_0x5b19d4[_0x510a('0x14f')]=Chat;return _0x3bdd1d['exports'];};_0x5e4b0d[0x11]=function(_0x29cf1a,_0x502fe4){'use strict';Object[_0x510a('0x75')](_0x502fe4,_0x510a('0x16'),{'value':!![]});_0x502fe4['ContactManager']=undefined;var _0x3e70df=require(_0x510a('0x76'));var _0x4adfbe=_0x1ab51e(_0x3e70df);var _0x1de4a8=require(_0x510a('0x1a'));var _0x24ce42=_0x1ab51e(_0x1de4a8);var _0x58be2e=_0x59c414(0x4,0x11);var _0x2f1bcb=_0x1ab51e(_0x58be2e);var _0x1e27bb=require(_0x510a('0x19'));function _0x1ab51e(_0x27677e){return _0x27677e&&_0x27677e['__esModule']?_0x27677e:{'default':_0x27677e};}class ContactManager{constructor(_0x15dd77,_0x5264b9,_0xc61d20){this['_ClientServer']=_0x5264b9;this['_BackendServer']=_0xc61d20;this[_0x510a('0x1d2')]=_0x15dd77;this[_0x510a('0x1d3')]['on'](_0x510a('0x23a'),this[_0x510a('0x23b')]['bind'](this));this['_ClientServer']['on']('ws::message::pull::contactimage',this[_0x510a('0x23c')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x23d'),this[_0x510a('0x23e')][_0x510a('0x10c')](this));(0x0,_0x4adfbe[_0x510a('0xd')])(this);}[_0x510a('0x23b')](_0x1d6451,_0x3cbe48){return new _0x1e27bb[(_0x510a('0x50'))]((_0x3d8f10,_0x1d3c97)=>{_0x1d6451['api'][_0x510a('0x23f')](_0x3cbe48[_0x510a('0xe6')])[_0x510a('0x10')](_0xf92d1=>{if(_0xf92d1){if(_0xf92d1['status']){_0x1d6451[_0x510a('0xe7')]({'status':_0xf92d1[_0x510a('0xe9')],'actionid':_0x3cbe48['id'],'image':_0xf92d1[_0x510a('0x240')],'mime':_0xf92d1[_0x510a('0x241')]});_0x3d8f10();}else{_0x1d6451[_0x510a('0xfb')](_0x3cbe48['id'],_0x510a('0x242'));_0x3d8f10();}}else{_0x2f1bcb[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x203'));_0x1d6451[_0x510a('0xfb')](_0x3cbe48['id'],_0x510a('0x204'));_0x1d3c97(new Error(_0x510a('0x204')));}})['catch'](_0x512d51=>{_0x2f1bcb[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x243'),_0x512d51);_0x1d6451[_0x510a('0xfb')](_0x3cbe48['id'],_0x512d51[_0x510a('0xc3')]);_0x1d3c97(_0x512d51);});});}['contacts'](_0xef7ca0,_0x309ee2){return new _0x1e27bb[(_0x510a('0x50'))]((_0x367428,_0x139ebb)=>{if((0x0,_0x24ce42[_0x510a('0xd')])(_0xef7ca0[_0x510a('0xd9')],'3.0.0','<')){_0xef7ca0[_0x510a('0xad')][_0x510a('0x175')]()['then'](_0x250c5f=>{if(_0x250c5f){_0xef7ca0[_0x510a('0xe7')]({'actionid':_0x309ee2['id'],'contacts':_0x250c5f,'status':!![]});_0x367428();}else{_0xef7ca0['sendError'](_0x309ee2['id'],'No\x20contacts\x20for\x20this\x20user');_0x139ebb(new Error('No\x20contacts\x20for\x20this\x20user'));}})[_0x510a('0x13')](_0x30b0be=>{_0x2f1bcb[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x244'),_0x30b0be);_0xef7ca0[_0x510a('0xfb')](_0x309ee2['id'],_0x30b0be['message']);_0x139ebb(_0x30b0be);});}else{_0x367428();}});}[_0x510a('0x23c')](_0x277625,_0x4c6032){return new _0x1e27bb[(_0x510a('0x50'))]((_0x577683,_0x354650)=>{_0x277625[_0x510a('0xad')][_0x510a('0x177')](_0x4c6032[_0x510a('0x245')])[_0x510a('0x10')](_0x46f3a8=>{if(_0x46f3a8){if(_0x46f3a8[_0x510a('0xe9')]){_0x277625[_0x510a('0xe7')]({'status':_0x46f3a8[_0x510a('0xe9')],'actionid':_0x4c6032['id'],'image':_0x46f3a8[_0x510a('0x240')],'mime':_0x46f3a8[_0x510a('0x241')]});_0x577683();}else{_0x277625[_0x510a('0xfb')](_0x4c6032['id'],_0x510a('0x242'));_0x577683();}}else{_0x2f1bcb['default']['error'](_0x510a('0x203'));_0x277625[_0x510a('0xfb')](_0x4c6032['id'],'Empty\x20response');_0x354650(new Error('Empty\x20response'));}})[_0x510a('0x13')](_0x58ded7=>{_0x2f1bcb[_0x510a('0xd')]['error'](_0x510a('0x246'),_0x58ded7);_0x277625[_0x510a('0xfb')](_0x4c6032['id'],_0x58ded7[_0x510a('0xc3')]);_0x354650(_0x58ded7);});});}}_0x502fe4[_0x510a('0x151')]=ContactManager;return _0x29cf1a[_0x510a('0x4')];};_0x5e4b0d[0x12]=function(_0x5936f8,_0x4483ff){'use strict';Object[_0x510a('0x75')](_0x4483ff,_0x510a('0x16'),{'value':!![]});_0x4483ff['Fax']=undefined;var _0x40241f=require(_0x510a('0x76'));var _0x3458aa=_0x478910(_0x40241f);var _0x19536d=require('bluebird');var _0x5e4aca=require('fs');var _0x567eff=_0x478910(_0x5e4aca);var _0x3a2f7d=_0x59c414(0x4,0x12);var _0x21d9bf=_0x478910(_0x3a2f7d);var _0x206e8c=require(_0x510a('0x108'));var _0x4d7773=_0x478910(_0x206e8c);var _0x1f7eb5=require(_0x510a('0x1d1'));var _0x3fe772=_0x478910(_0x1f7eb5);function _0x478910(_0x1caee6){return _0x1caee6&&_0x1caee6[_0x510a('0x16')]?_0x1caee6:{'default':_0x1caee6};}let _0x36cef2=_0x19536d[_0x510a('0x50')][_0x510a('0x247')](require('fs')[_0x510a('0x248')]);class Fax{constructor(_0x18b8f8,_0x457b25,_0x9380f7){(0x0,_0x3458aa[_0x510a('0xd')])(this);this[_0x510a('0x1d3')]=_0x457b25;this[_0x510a('0x1d4')]=_0x9380f7;this[_0x510a('0x1d2')]=_0x18b8f8;this['monitor']={};this['_Zulu'][_0x510a('0x5c')](_0x510a('0x190'),this[_0x510a('0x249')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x24a'),this[_0x510a('0x24b')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x24c'),this[_0x510a('0x24d')][_0x510a('0x10c')](this));this['_ClientServer']['on'](_0x510a('0x24e'),this[_0x510a('0x17b')][_0x510a('0x10c')](this));this[_0x510a('0x1d4')]['on'](_0x510a('0x24f'),(_0x3cc516,_0x556fd8)=>{if(_0x4d7773['default'][_0x510a('0x250')](_0x556fd8,_0x510a('0x251'))&&_0x4d7773[_0x510a('0xd')][_0x510a('0x250')](_0x556fd8,'data.sessionid')){this[_0x510a('0x252')][_0x556fd8[_0x510a('0xd3')][_0x510a('0x253')]]=_0x556fd8[_0x510a('0xd3')][_0x510a('0x119')];}_0x3cc516['sendJSON']({'actionid':_0x556fd8['id']});});}[_0x510a('0x249')](_0x234171){return new _0x19536d['Promise']((_0x3202d9,_0x434372)=>{switch(_0x234171['userevent']){case _0x510a('0x254'):_0x21d9bf[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x255')+_0x234171['user']+_0x510a('0x256')+_0x234171[_0x510a('0x257')]);_0x21d9bf[_0x510a('0xd')][_0x510a('0x4a')](_0x234171);if(_0x234171['finished']==='1'){let _0x4c9fe5={'direction':_0x510a('0x258'),'user':_0x234171['user'],'number':_0x234171[_0x510a('0x257')],'fid':_0x234171[_0x510a('0x253')],'status':_0x234171['status']};this[_0x510a('0x259')](_0x234171['user'],_0x234171[_0x510a('0x257')],'',_0x4c9fe5)[_0x510a('0x10')](()=>{return this[_0x510a('0x25a')](_0x234171);})[_0x510a('0x10')](()=>{if(this[_0x510a('0x252')][_0x234171[_0x510a('0x253')]]){delete this[_0x510a('0x252')][_0x234171[_0x510a('0x253')]];}_0x3202d9();})[_0x510a('0x13')](_0x3c6235=>{if(this[_0x510a('0x252')][_0x234171[_0x510a('0x253')]]){delete this['monitor'][_0x234171[_0x510a('0x253')]];}_0x434372(_0x3c6235);});}else{this[_0x510a('0x25a')](_0x234171)[_0x510a('0x10')](_0x19f863=>{_0x3202d9();})[_0x510a('0x13')](_0x3e03a8=>{_0x434372(_0x3e03a8);});}break;case _0x510a('0x25b'):_0x21d9bf['default'][_0x510a('0x11')](_0x510a('0x25c')+_0x234171[_0x510a('0x25d')]+_0x510a('0x6e')+_0x234171[_0x510a('0x257')]);_0x21d9bf[_0x510a('0xd')]['debug'](_0x234171);_0x36cef2(_0x234171[_0x510a('0x25e')])[_0x510a('0x10')](_0x13a570=>{try{_0x234171[_0x510a('0x25f')]=[{'data':Buffer(_0x13a570)['toString']('base64'),'mime':_0x510a('0x260')}];}catch(_0x3af88d){return _0x434372(new Error(_0x3af88d));}let _0x18e0b6=_0x234171['callid'];let _0x59791b='';let _0x45caec=_0x18e0b6['match'](/(?:(.*|".*") <(\d*)>|(\d*))/);if(_0x45caec[0x0]&&_0x45caec[0x0]!==''){if(_0x45caec[0x2]){_0x18e0b6=_0x45caec[0x2];_0x59791b=_0x45caec[0x1];}else{_0x18e0b6=_0x45caec[0x3];}let _0x4747c7={'direction':_0x510a('0x1ed'),'number':_0x18e0b6,'dest':_0x234171[_0x510a('0x257')],'fid':_0x234171[_0x510a('0x253')]};return this['saveFaxInteraction'](_0x234171['user'],_0x18e0b6,_0x59791b,_0x4747c7);}else{return _0x19536d[_0x510a('0x50')][_0x510a('0x261')](new Error(_0x510a('0x262')));}})[_0x510a('0x10')](()=>{return this[_0x510a('0x25a')](_0x234171);})[_0x510a('0x10')](()=>{_0x3202d9();})[_0x510a('0x13')](_0xcfc915=>{_0x434372(_0xcfc915);});break;default:_0x3202d9();break;}});}[_0x510a('0x25a')](_0x59933b){if(_0x59933b['dir']==='out'&&!this[_0x510a('0x252')][_0x59933b[_0x510a('0x253')]]){return _0x19536d[_0x510a('0x50')][_0x510a('0x6')]();}const _0x4a197f={'user':_0x59933b[_0x510a('0xe5')],'dir':_0x59933b[_0x510a('0x263')],'date':_0x59933b['date'],'header':_0x59933b['header'],'stationid':_0x59933b['stationid'],'callid':_0x59933b[_0x510a('0x25d')],'dest':_0x59933b['dest'],'status':_0x59933b['status'],'pages':_0x59933b[_0x510a('0x264')],'file':_0x59933b[_0x510a('0x25e')],'new':_0x59933b[_0x510a('0x265')],'finished':_0x59933b[_0x510a('0x266')],'pid':_0x59933b[_0x510a('0x267')],'channel':_0x59933b[_0x510a('0x268')],'file_exists':_0x59933b['file_exists']};return new _0x19536d[(_0x510a('0x50'))]((_0x3af380,_0x284e67)=>{switch(_0x59933b[_0x510a('0x190')]){case _0x510a('0x25b'):const _0x3dbb7b=this[_0x510a('0x1d3')]['getAllSessions']();_0x36cef2(_0x59933b[_0x510a('0x25e')])[_0x510a('0x10')](_0xc19714=>{_0x4a197f[_0x510a('0x25f')]=[{'data':Buffer(_0xc19714)['toString'](_0x510a('0x269')),'mime':_0x510a('0x260')}];_0x3fe772[_0x510a('0xd')][_0x510a('0x113')](_0x3dbb7b,(_0x1b24c2,_0x3fe6ba,_0xc48c7f)=>{if(_0x1b24c2['user']['id']==_0x59933b[_0x510a('0xe5')]){_0x1b24c2[_0x510a('0xe7')]({'subscription':'fax','data':_0x4a197f});}_0xc48c7f();},_0x3a4d9b=>{if(_0x3a4d9b){return _0x284e67(_0x3a4d9b);}_0x3af380();});})[_0x510a('0x13')](_0x5b1986=>{_0x284e67(_0x5b1986);});break;case _0x510a('0x254'):const _0x2097a4=this[_0x510a('0x1d3')][_0x510a('0xa1')](this[_0x510a('0x252')][_0x59933b['faxid']]);if(_0x2097a4){return this[_0x510a('0x1d4')]['api'][_0x510a('0x1a6')](_0x59933b[_0x510a('0xe5')],[_0x59933b[_0x510a('0x257')]])[_0x510a('0x10')](_0x3281c6=>{_0x4a197f['interactionid']=_0x3281c6;return _0x36cef2(_0x59933b[_0x510a('0x25e')]);})['then'](_0x448a39=>{_0x4a197f[_0x510a('0x25f')]=[{'data':Buffer(_0x448a39)['toString'](_0x510a('0x269')),'mime':_0x510a('0x260')}];_0x2097a4[_0x510a('0xe7')]({'subscription':_0x510a('0x17c'),'data':_0x4a197f});_0x3af380();})[_0x510a('0x13')](_0x356e84=>{_0x284e67(_0x356e84);});}else{_0x3af380();}break;default:_0x284e67(new Error('Invalid\x20User\x20Event'));break;}});}[_0x510a('0x259')](_0x37af21,_0x5bd20d,_0x9b7b3f,_0x5d37ae){return new _0x19536d['Promise']((_0x3e3706,_0x4840db)=>{return this[_0x510a('0x26a')](_0x37af21,_0x5bd20d,_0x9b7b3f)[_0x510a('0x10')](_0x340ca=>{let _0x152ef7=_0x340ca['contactuuid'];let _0x5ed837=_0x340ca[_0x510a('0x1ef')];return this['_BackendServer'][_0x510a('0xad')][_0x510a('0x1ad')](_0x5ed837,_0x37af21,_0x152ef7,_0x510a('0x26b'),_0x5d37ae);})['then'](()=>{_0x3e3706();})['catch'](_0x25a587=>{_0x4840db(_0x25a587);});});}[_0x510a('0x26a')](_0x2eb823,_0x11b015,_0x33add9){return new _0x19536d[(_0x510a('0x50'))]((_0x89ee0,_0x4ced52)=>{let _0x239c7a;return this[_0x510a('0x1d4')][_0x510a('0xad')]['getContactIDByCallerID'](_0x2eb823,_0x11b015,_0x33add9)[_0x510a('0x10')](_0x2e572a=>{_0x239c7a=_0x2e572a;return this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a6')](_0x2eb823,[_0x11b015]);})[_0x510a('0x10')](_0x18928f=>{_0x89ee0({'contactuuid':_0x239c7a,'interactionid':_0x18928f});})[_0x510a('0x13')](_0x1732c5=>{_0x4ced52(_0x1732c5);});});}[_0x510a('0x24b')](_0x1aab00,_0x3b10b7){_0x1aab00[_0x510a('0x11d')](_0x3b10b7['id']);}['faxSubscribe'](_0x32f63c,_0x31c4b1){_0x32f63c[_0x510a('0x11d')](_0x31c4b1['id']);}[_0x510a('0x17b')](_0xd6a578,_0x5bcb2b){return new _0x19536d[(_0x510a('0x50'))]((_0x33ff1e,_0x6ec03b)=>{if(typeof _0x5bcb2b['data']===_0x510a('0x26c')||typeof _0x5bcb2b[_0x510a('0xd3')][_0x510a('0x25f')]!==_0x510a('0x13a')){_0x6ec03b(new Error('Invalid\x20input\x20parameters'));}else{let _0x1c29d9=_0x5bcb2b[_0x510a('0xd3')]['to']['replace'](/\D/g,'');const _0x1af462={'to':_0x1c29d9,'resolution':_0x510a('0x26d'),'files':_0x5bcb2b['data'][_0x510a('0x25f')],'recipientname':_0x5bcb2b['data'][_0x510a('0x26e')],'message':_0x5bcb2b[_0x510a('0xd3')][_0x510a('0xc3')],'myname':_0x5bcb2b[_0x510a('0xd3')][_0x510a('0x26f')],'mytelephone':_0x5bcb2b[_0x510a('0xd3')][_0x510a('0x270')],'myemail':_0x5bcb2b[_0x510a('0xd3')][_0x510a('0x271')],'coverpage':typeof _0x5bcb2b[_0x510a('0xd3')]['coverpage']!==_0x510a('0x26c')?_0x5bcb2b['data']['coverpage']:![]};let _0x2cbd73={'direction':'outbound','user':_0xd6a578[_0x510a('0xe5')]['id'],'number':_0x1c29d9,'status':_0x510a('0x272')};return _0xd6a578[_0x510a('0xad')]['sendFax'](_0x1af462)[_0x510a('0x10')](_0x2aee30=>{if(_0x2aee30[_0x510a('0xe9')]){const _0x31ee92=_0x2aee30[_0x510a('0x253')];_0xd6a578['sendJSON']({'status':!![],'actionid':_0x5bcb2b['id'],'faxid':_0x31ee92});this[_0x510a('0x252')][_0x31ee92]=_0xd6a578['id'];_0x21d9bf['default'][_0x510a('0x4a')](_0x510a('0x273')+_0x5bcb2b['id']);return _0x33ff1e();}else{return this[_0x510a('0x259')](_0xd6a578[_0x510a('0xe5')]['id'],_0x1c29d9,'',_0x2cbd73)[_0x510a('0x10')](()=>{_0xd6a578[_0x510a('0xfb')](_0x5bcb2b['id'],_0x2aee30[_0x510a('0xc3')]);_0x6ec03b(new Error(_0x2aee30[_0x510a('0xc3')]));})['catch'](_0x3295b1=>{_0xd6a578[_0x510a('0xfb')](_0x5bcb2b['id'],_0x3295b1[_0x510a('0xc3')]);_0x6ec03b(_0x3295b1);});}})[_0x510a('0x13')](_0x22c3c3=>{return this[_0x510a('0x259')](_0xd6a578[_0x510a('0xe5')]['id'],_0x1c29d9,'',_0x2cbd73)[_0x510a('0x10')](()=>{_0xd6a578[_0x510a('0xfb')](_0x5bcb2b['id'],_0x22c3c3[_0x510a('0xc3')]);_0x6ec03b(_0x22c3c3);})['catch'](_0x1dca4a=>{_0xd6a578[_0x510a('0xfb')](_0x5bcb2b['id'],_0x1dca4a['message']);_0x6ec03b(_0x1dca4a);});});}});}}_0x4483ff['Fax']=Fax;return _0x5936f8[_0x510a('0x4')];};_0x5e4b0d[0x13]=function(_0x270d28,_0xc52631){'use strict';Object[_0x510a('0x75')](_0xc52631,_0x510a('0x16'),{'value':!![]});_0xc52631[_0x510a('0x153')]=undefined;var _0x2da6a3=require(_0x510a('0x76'));var _0x27681c=_0x559543(_0x2da6a3);function _0x559543(_0x2f4e53){return _0x2f4e53&&_0x2f4e53[_0x510a('0x16')]?_0x2f4e53:{'default':_0x2f4e53};}class Ping{constructor(_0x27cbdc,_0x34aaa7,_0x57a216){this['_ClientServer']=_0x34aaa7;this[_0x510a('0x1d3')]['on']('ws::message::pull::ping',this[_0x510a('0x274')][_0x510a('0x10c')](this));(0x0,_0x27681c['default'])(this);}[_0x510a('0x274')](_0x13b1f5,_0x343b1f){_0x13b1f5[_0x510a('0xe7')]({'status':!![],'actionid':_0x343b1f['id'],'reply':_0x510a('0x275')},![]);}}_0xc52631[_0x510a('0x153')]=Ping;return _0x270d28[_0x510a('0x4')];};_0x5e4b0d[0x14]=function(_0x3acc5d,_0x8982cb){'use strict';Object[_0x510a('0x75')](_0x8982cb,_0x510a('0x16'),{'value':!![]});_0x8982cb['Presence']=undefined;var _0x301dfa=require(_0x510a('0x107'));var _0x5dad7c=_0x2d62e7(_0x301dfa);var _0x9c2039=require('auto-bind');var _0xd84f6f=_0x2d62e7(_0x9c2039);var _0x31409=require(_0x510a('0x1d1'));var _0x3958d0=_0x2d62e7(_0x31409);var _0x39a060=_0x59c414(0x4,0x14);var _0x195d09=_0x2d62e7(_0x39a060);var _0x236de8=require(_0x510a('0x1a'));var _0x5b2e20=_0x2d62e7(_0x236de8);function _0x2d62e7(_0x4e243d){return _0x4e243d&&_0x4e243d[_0x510a('0x16')]?_0x4e243d:{'default':_0x4e243d};}class Presence{constructor(_0x14fa52,_0x4af240,_0x5a2cea){(0x0,_0xd84f6f['default'])(this);this[_0x510a('0x1d2')]=_0x14fa52;this['_ClientServer']=_0x4af240;this[_0x510a('0x1d4')]=_0x5a2cea;this[_0x510a('0x1d5')]={};this[_0x510a('0x1d3')]['on'](_0x510a('0x276'),this[_0x510a('0x277')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x278'),this[_0x510a('0x279')][_0x510a('0x10c')](this));this['_ClientServer']['on'](_0x510a('0x27a'),this[_0x510a('0x27b')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x27c'),this[_0x510a('0x27d')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on']('ws::message::subscribe::presence',this[_0x510a('0x27e')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x27f'),this[_0x510a('0x280')][_0x510a('0x10c')](this));this[_0x510a('0x1d2')][_0x510a('0x5c')]('presencestatus',this[_0x510a('0x281')][_0x510a('0x10c')](this));}[_0x510a('0x281')](_0xfcfccd){return new Promise((_0x23d113,_0x2e2a08)=>{let _0x39f20d=_0xfcfccd[_0x510a('0x282')];_0x195d09[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x283')+_0x39f20d);const _0x46320a=this['_ClientServer']['getAllSessions']();_0x3958d0[_0x510a('0xd')][_0x510a('0x113')](_0x46320a,(_0x2698a5,_0x10ab60,_0x29dffe)=>{if((0x0,_0x5b2e20[_0x510a('0xd')])(_0x2698a5[_0x510a('0xd9')],'3.0.0','>=')){if(_0x2698a5[_0x510a('0xe5')][_0x510a('0x1f1')]===_0x39f20d){_0x2698a5['sendJSON']({'actionid':(0x0,_0x5dad7c[_0x510a('0xd')])(),'action':_0x510a('0x284'),'contactId':_0x2698a5['contactuuid'],'status':_0xfcfccd['status'],'message':_0xfcfccd['message']});_0x29dffe();}else{this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x19f')](_0x2698a5[_0x510a('0xe5')]['id'],_0x39f20d)[_0x510a('0x10')](_0x5f4d7b=>{_0x2698a5[_0x510a('0xe7')]({'actionid':(0x0,_0x5dad7c[_0x510a('0xd')])(),'action':_0x510a('0x284'),'contactId':_0x5f4d7b,'status':_0xfcfccd['status'],'message':_0xfcfccd[_0x510a('0xc3')]});_0x29dffe();})['catch'](_0x2cb4ce=>{_0x195d09[_0x510a('0xd')]['error'](_0x510a('0x285'),_0x2cb4ce);_0x29dffe(_0x2cb4ce);});}}else{_0x2698a5[_0x510a('0xe7')]({'command':_0x510a('0x1f2'),'type':'presence','data':{'type':_0xfcfccd[_0x510a('0xe9')],'message':_0xfcfccd[_0x510a('0xc3')]}});_0x29dffe();}},_0x5a8a96=>{if(_0x5a8a96){_0x2e2a08(_0x5a8a96);}else{_0x23d113();}});});}['getDevicePresence'](_0xbdc82e){return this[_0x510a('0x1d2')]['astmanAction']({'action':_0x510a('0x286'),'provider':_0x510a('0x287')+_0xbdc82e});}[_0x510a('0x27b')](_0x50ed56,_0x121580){return new Promise((_0x492702,_0x55548c)=>{_0x50ed56[_0x510a('0xad')][_0x510a('0x17e')]()[_0x510a('0x10')](_0x32f58e=>{if(_0x32f58e){_0x50ed56[_0x510a('0xe7')]({'status':!![],'actionid':_0x121580['id'],'states':_0x32f58e});_0x492702();}else{_0x50ed56['sendError'](_0x121580['id'],'Empty\x20response');_0x55548c(new Error('Empty\x20response'));}})[_0x510a('0x13')](_0x115c1b=>{_0x50ed56[_0x510a('0xfb')](_0x121580['id'],_0x115c1b[_0x510a('0xc3')]);_0x55548c(_0x115c1b);});});}[_0x510a('0x277')](_0x3adab7,_0x2b902d){return new Promise((_0x3353bb,_0x2ec3b0)=>{let _0x49a841='';_0x3adab7[_0x510a('0xad')][_0x510a('0x17e')]()[_0x510a('0x10')](_0x55c92b=>{_0x49a841=_0x55c92b;if(_0x55c92b){return _0x3adab7[_0x510a('0xad')]['setPresenceState'](_0x2b902d['data'][_0x510a('0x288')]);}else{_0x3adab7[_0x510a('0xfb')](_0x2b902d['id'],_0x510a('0x204'));return _0x2ec3b0(new Error('Empty\x20response'));}})[_0x510a('0x10')](_0x2768d7=>{_0x3adab7[_0x510a('0xe7')]({'status':!![],'actionid':_0x2b902d['id'],'states':_0x49a841});_0x3353bb();})[_0x510a('0x13')](_0x467c51=>{_0x3adab7[_0x510a('0xfb')](_0x2b902d['id'],_0x467c51[_0x510a('0xc3')]);_0x2ec3b0(_0x467c51);});});}[_0x510a('0x279')](_0x560b0e,_0x1657e1){return new Promise((_0x2bf4ea,_0x2c0e74)=>{if(!_0x560b0e[_0x510a('0xe5')][_0x510a('0x1f1')]){_0x560b0e['sendError'](_0x1657e1['id'],'No\x20valid\x20extension');_0x2c0e74(new Error(_0x510a('0x289')));return;}this[_0x510a('0x28a')](_0x560b0e[_0x510a('0xe5')][_0x510a('0x1f1')])[_0x510a('0x10')](_0xb8a6bc=>{if(_0xb8a6bc&&_0xb8a6bc[_0x510a('0xc3')]){_0x560b0e[_0x510a('0xe7')]({'status':!![],'actionid':_0x1657e1['id'],'type':_0xb8a6bc[_0x510a('0xe9')],'message':_0xb8a6bc['message']});_0x2bf4ea();}else{_0x560b0e[_0x510a('0xfb')](_0x1657e1['id'],_0x510a('0x204'));_0x2c0e74(new Error(_0x510a('0x204')));}})[_0x510a('0x13')](_0x19217d=>{_0x560b0e[_0x510a('0xfb')](_0x1657e1['id'],_0x19217d[_0x510a('0xc3')]);_0x2c0e74(_0x19217d);});});}['userPresence'](_0x5e800f,_0xe9e07){return new Promise((_0x2de12c,_0xef5214)=>{this[_0x510a('0x28a')](_0xe9e07[_0x510a('0x245')])[_0x510a('0x10')](_0x24265f=>{if(_0x24265f){_0x5e800f['sendJSON']({'status':!![],'actionid':_0xe9e07['id'],'type':_0x24265f[_0x510a('0x20d')],'did':_0xe9e07[_0x510a('0x245')],'message':_0x24265f[_0x510a('0x28b')]});_0x2de12c();}else{_0x5e800f[_0x510a('0xfb')](_0xe9e07['id'],'Empty\x20response');_0xef5214(new Error(_0x510a('0x204')));}})[_0x510a('0x13')](_0x725754=>{_0x5e800f[_0x510a('0xfb')](_0xe9e07['id'],_0x725754[_0x510a('0xc3')]);_0xef5214(_0x725754);});});}[_0x510a('0x280')](_0x2effbd,_0x3fd1b2){if(this['actionidmap'][_0x2effbd['id']]){delete this['actionidmap'][_0x2effbd['id']];}_0x2effbd['sendTrue'](_0x3fd1b2['id']);}[_0x510a('0x27e')](_0x53a697,_0x2a4325){this[_0x510a('0x1d5')][_0x53a697['id']]=_0x2a4325['id'];_0x53a697[_0x510a('0x11d')](_0x2a4325['id']);}}_0x8982cb[_0x510a('0x154')]=Presence;return _0x3acc5d[_0x510a('0x4')];};_0x5e4b0d[0x15]=function(_0x2bbc17,_0x403168){'use strict';Object[_0x510a('0x75')](_0x403168,_0x510a('0x16'),{'value':!![]});_0x403168[_0x510a('0x155')]=undefined;var _0x36765c=require('auto-bind');var _0x438e67=_0x30eaff(_0x36765c);var _0x3edfb1=require('async');var _0x3091c4=_0x30eaff(_0x3edfb1);var _0x5c8fa8=require(_0x510a('0x19'));var _0x4763b7=_0x59c414(0x4,0x15);var _0x3e6189=_0x30eaff(_0x4763b7);var _0x375958=_0x59c414(0x23,0x15);var _0x110d7b=_0x30eaff(_0x375958);function _0x30eaff(_0x4fa434){return _0x4fa434&&_0x4fa434[_0x510a('0x16')]?_0x4fa434:{'default':_0x4fa434};}class Sms{constructor(_0x461074,_0x33e640,_0x2546ef){(0x0,_0x438e67[_0x510a('0xd')])(this);this[_0x510a('0x1d2')]=_0x461074;this[_0x510a('0x1d3')]=_0x33e640;this['_BackendServer']=_0x2546ef;this[_0x510a('0x28c')]={};this[_0x510a('0x28d')]={};this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x190'),this[_0x510a('0x249')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x28e'),this[_0x510a('0x28f')][_0x510a('0x10c')](this));this['_ClientServer']['on'](_0x510a('0x290'),this[_0x510a('0x291')]['bind'](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x292'),this['smsdids'][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on']('ws::message::push::sms',this[_0x510a('0x293')]['bind'](this));this[_0x510a('0x1d3')]['on'](_0x510a('0xf3'),this[_0x510a('0xcc')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on'](_0x510a('0x103'),this[_0x510a('0x294')][_0x510a('0x10c')](this));}[_0x510a('0xcc')](_0x445254,_0x21c628){if(_0x445254[_0x510a('0xea')]&&_0x445254['appData'][_0x510a('0x185')]&&_0x445254[_0x510a('0xea')][_0x510a('0x185')][_0x510a('0x187')]&&_0x445254[_0x510a('0xea')][_0x510a('0x185')][_0x510a('0x187')]['length']>0x0){const _0x293472=_0x445254['appData'][_0x510a('0x185')][_0x510a('0x187')];this[_0x510a('0x28d')][_0x445254['id']]=_0x293472;_0x3091c4['default'][_0x510a('0x237')](_0x293472,(_0x4a7177,_0x2009ae)=>{if(!this['didSessionMap'][_0x4a7177]){this[_0x510a('0x28c')][_0x4a7177]=[];}if(this[_0x510a('0x28c')][_0x4a7177]['indexOf'](_0x445254['id'])===-0x1){this[_0x510a('0x28c')][_0x4a7177][_0x510a('0x295')](_0x445254['id']);}_0x2009ae();},_0x381b99=>{if(_0x381b99){_0x3e6189['default']['error']('Error\x20processing\x20SMS\x20DIDs\x20on\x20login',_0x381b99);}});}}['logout'](_0x2aeb35){if(this[_0x510a('0x28d')][_0x2aeb35['id']]&&this['sessionDidMap'][_0x2aeb35['id']]['length']>0x0){_0x3091c4['default'][_0x510a('0x237')](this[_0x510a('0x28d')][_0x2aeb35['id']],(_0x36a113,_0xbc8278)=>{if(this[_0x510a('0x28c')][_0x36a113]){const _0x22579d=this['didSessionMap'][_0x36a113]['indexOf'](_0x2aeb35['id']);if(_0x22579d>-0x1){this[_0x510a('0x28c')][_0x36a113][_0x510a('0x296')](_0x22579d,0x1);}}_0xbc8278();},_0x2b9aef=>{if(_0x2b9aef){_0x3e6189[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x297'),_0x2b9aef);}delete this[_0x510a('0x28d')][_0x2aeb35['id']];});}}[_0x510a('0x249')](_0x164b5e){return new _0x5c8fa8[(_0x510a('0x50'))]((_0x27027c,_0x47514b)=>{switch(_0x164b5e['userevent']){case _0x510a('0x298'):_0x3e6189[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x299')+_0x164b5e[_0x510a('0x1e9')]+_0x510a('0x6e')+_0x164b5e['to']);_0x3e6189[_0x510a('0xd')][_0x510a('0x4a')](_0x164b5e);return this[_0x510a('0x29a')](_0x164b5e[_0x510a('0x1e9')])[_0x510a('0x10')](_0x57e007=>{return this['saveInteraction'](_0x57e007,_0x164b5e['to'],_0x164b5e['from'],'out',_0x164b5e['message']);})['then'](()=>{_0x27027c();})[_0x510a('0x13')](_0x5c8f40=>{_0x47514b(_0x5c8f40);});break;case _0x510a('0x29b'):_0x3e6189[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x29c')+_0x164b5e[_0x510a('0x1e9')]+'\x20to\x20'+_0x164b5e['to']);_0x3e6189[_0x510a('0xd')][_0x510a('0x4a')](_0x164b5e);return this[_0x510a('0x29a')](_0x164b5e['to'])[_0x510a('0x10')](_0x3b7211=>{return this['saveInteraction'](_0x3b7211,_0x164b5e[_0x510a('0x1e9')],_0x164b5e['to'],'in',_0x164b5e[_0x510a('0xc3')]);})[_0x510a('0x10')](()=>{return this[_0x510a('0x25a')](_0x164b5e);})['then'](()=>{_0x27027c();})[_0x510a('0x13')](_0x4ca1b6=>{_0x47514b(_0x4ca1b6);});break;default:_0x27027c();break;}});}[_0x510a('0x25a')](_0x4d0b12){if(!this[_0x510a('0x28c')][_0x4d0b12['to']]){return _0x5c8fa8[_0x510a('0x50')][_0x510a('0x6')]();}return new _0x5c8fa8['Promise']((_0x3ac451,_0x465228)=>{_0x3091c4[_0x510a('0xd')]['each'](this[_0x510a('0x28c')][_0x4d0b12['to']],(_0x25b3e6,_0xd32a7c)=>{_0x3e6189[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x29d')+_0x4d0b12['from']+_0x510a('0x6e')+_0x25b3e6+'\x20('+_0x4d0b12['to']+')');const _0x721525=this[_0x510a('0x1d3')][_0x510a('0xa1')](_0x25b3e6);if(_0x721525){_0x721525[_0x510a('0xe7')]({'subscription':_0x510a('0x185'),'data':{'id':_0x4d0b12['id'],'from':_0x4d0b12[_0x510a('0x1e9')],'body':_0x4d0b12[_0x510a('0xc3')],'timestamp':_0x4d0b12[_0x510a('0x29e')],'threadid':_0x4d0b12['threadid']}});}_0xd32a7c();},_0xec4ff7=>{if(_0xec4ff7){return _0x465228(_0xec4ff7);}_0x3ac451();});});}['smsUnsubscribe'](_0x5d6847,_0x33f018){_0x5d6847[_0x510a('0x11d')](_0x33f018['id']);}[_0x510a('0x291')](_0x55e469,_0x236a07){_0x55e469[_0x510a('0x11d')](_0x236a07['id']);}[_0x510a('0x293')](_0x21145d,_0x22650b){return new _0x5c8fa8[(_0x510a('0x50'))]((_0x52b190,_0x10cb44)=>{if(!_0x22650b[_0x510a('0xd3')]||!_0x22650b[_0x510a('0xd3')]['to']||!_0x22650b['data'][_0x510a('0x1e9')]||!_0x22650b[_0x510a('0xd3')][_0x510a('0x16d')]||!_0x22650b['id']){_0x10cb44(new Error(_0x510a('0x1f5')));return _0x21145d['sendError'](_0x22650b['id'],_0x510a('0x1f5'));}_0x3e6189[_0x510a('0xd')][_0x510a('0x11')]('Sending\x20SMS\x20from\x20'+_0x22650b[_0x510a('0xd3')][_0x510a('0x1e9')]+_0x510a('0x6e')+_0x22650b['data']['to']);let _0x48b8fe=String(_0x22650b[_0x510a('0xd3')]['to']);let _0x5d67ea=String(_0x22650b[_0x510a('0xd3')][_0x510a('0x1e9')]);_0x48b8fe=_0x48b8fe[_0x510a('0x1fb')](/\D/g,'');_0x48b8fe=_0x48b8fe[_0x510a('0x13c')]==='10'?'1'+_0x48b8fe:_0x48b8fe;_0x5d67ea=_0x5d67ea[_0x510a('0x1fb')](/\D/g,'');let _0x5320c7={'from':_0x5d67ea,'to':_0x48b8fe,'body':_0x22650b[_0x510a('0xd3')][_0x510a('0x16d')]};return _0x21145d[_0x510a('0xad')][_0x510a('0x184')](_0x5320c7)[_0x510a('0x10')](_0x38ba7d=>{_0x21145d['sendJSON']({'status':!![],'actionid':_0x22650b['id'],'data':_0x38ba7d[_0x510a('0xc3')]});_0x52b190();})[_0x510a('0x13')](_0x20907d=>{return this[_0x510a('0x29a')](_0x5d67ea)[_0x510a('0x10')](_0xd54f08=>{return this['saveInteraction'](_0xd54f08,_0x48b8fe,_0x5d67ea,_0x510a('0x29f'),_0x22650b[_0x510a('0xd3')]['body'],!![]);})[_0x510a('0x10')](()=>{_0x10cb44(_0x20907d);return _0x21145d[_0x510a('0xfb')](_0x22650b['id'],_0x20907d['message']);})[_0x510a('0x13')](_0x3c1586=>{_0x10cb44(_0x3c1586);return _0x21145d['sendError'](_0x22650b['id'],_0x3c1586);});});});}[_0x510a('0x2a0')](_0x5a4962,_0x109311){return new _0x5c8fa8['Promise']((_0xc342c,_0x49f0e5)=>{if(!_0x109311['id']){_0x5a4962[_0x510a('0xfb')](_0x109311['id'],_0x510a('0x1f5'));_0x49f0e5(new Error(_0x510a('0x1f5')));return;}this['getAllDids'](_0x5a4962)[_0x510a('0x10')](_0x257245=>{_0x5a4962[_0x510a('0xe7')]({'status':!![],'actionid':_0x109311['id'],'dids':_0x257245});_0xc342c();})[_0x510a('0x13')](_0x415066=>{_0x5a4962[_0x510a('0xfb')](_0x109311['id'],_0x415066['message']);_0x49f0e5(_0x415066);});});}[_0x510a('0x2a1')](_0x4fb8b6){return _0x4fb8b6[_0x510a('0xad')][_0x510a('0x186')]();}[_0x510a('0x29a')](_0x36999a){return this[_0x510a('0x1d4')]['api'][_0x510a('0x2a2')](_0x36999a);}['saveInteraction'](_0x357e7f,_0x215448,_0x4e74c5,_0x34ff4c,_0x3b9f98,_0x5b7daa=![]){return new _0x5c8fa8['Promise']((_0x3e94cd,_0x1390c0)=>{_0x3091c4['default'][_0x510a('0x237')](_0x357e7f,(_0x481b05,_0xd18023)=>{_0x3e6189['default'][_0x510a('0x11')]('Saving\x20SMS\x20interaction\x20between\x20'+_0x481b05+_0x510a('0x2a3')+_0x215448);_0x5c8fa8[_0x510a('0x50')][_0x510a('0x226')]([this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a4')](_0x481b05),this[_0x510a('0x26a')](_0x481b05,_0x215448),_0x110d7b[_0x510a('0xd')][_0x510a('0x2a4')](_0x3b9f98,this[_0x510a('0x1d2')])])[_0x510a('0x10')](_0x31e2bd=>{let _0x40d2c1=_0x31e2bd[0x0];let _0x2a492a=_0x31e2bd[0x1][_0x510a('0xe8')];let _0x53127e=_0x31e2bd[0x1][_0x510a('0x1ef')];let _0x155581=_0x31e2bd[0x2];let _0xde0ae7;if(_0x34ff4c===_0x510a('0x29f')){_0xde0ae7={'direction':_0x34ff4c,'message':_0x3b9f98,'did':_0x4e74c5,'number':_0x215448,'metadata':_0x155581};_0x2a492a=_0x40d2c1;}else{_0xde0ae7={'direction':_0x34ff4c,'message':_0x3b9f98,'number':_0x215448,'did':_0x4e74c5,'metadata':_0x155581};}if(_0x5b7daa){_0xde0ae7['status']='fail';}else{_0xde0ae7[_0x510a('0xe9')]=_0x510a('0x2a5');}_0x3e6189['default']['info'](_0x510a('0x2a6')+_0x481b05+'\x20('+_0x4e74c5+_0x510a('0x2a7')+_0x215448);return this[_0x510a('0x1d4')]['api'][_0x510a('0x1ad')](_0x53127e,_0x481b05,_0x2a492a,_0x510a('0x2a8'),_0xde0ae7,_0x3b9f98,_0x155581);})[_0x510a('0x10')](()=>{_0xd18023();})[_0x510a('0x13')](_0x5c179b=>{_0xd18023(_0x5c179b);});},_0x25121c=>{if(_0x25121c){_0x1390c0(_0x25121c);}_0x3e94cd();});});}['getCallerIDInfo'](_0x4fc0ce,_0x3b43c8){return new _0x5c8fa8[(_0x510a('0x50'))]((_0x21c634,_0x3b28d6)=>{let _0x1b5eea;return this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a2')](_0x4fc0ce,[_0x3b43c8])['then'](_0x7bad4a=>{_0x1b5eea=_0x7bad4a[_0x3b43c8];return this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a6')](_0x4fc0ce,[_0x3b43c8]);})[_0x510a('0x10')](_0x40aa02=>{_0x21c634({'contactuuid':_0x1b5eea,'interactionid':_0x40aa02});})[_0x510a('0x13')](_0x12b8a9=>{_0x3b28d6(_0x12b8a9);});});}}_0x403168[_0x510a('0x155')]=Sms;return _0x2bbc17[_0x510a('0x4')];};_0x5e4b0d[0x16]=function(_0x2b46af,_0x38fe88){'use strict';Object[_0x510a('0x75')](_0x38fe88,_0x510a('0x16'),{'value':!![]});_0x38fe88[_0x510a('0x156')]=undefined;var _0x4d2062=require(_0x510a('0x76'));var _0x1638f5=_0x273032(_0x4d2062);var _0xe80cb2=require(_0x510a('0x19'));var _0x5029fe=_0x59c414(0x4,0x16);var _0x326dcd=_0x273032(_0x5029fe);function _0x273032(_0xcf3b42){return _0xcf3b42&&_0xcf3b42[_0x510a('0x16')]?_0xcf3b42:{'default':_0xcf3b42};}class Mobile{constructor(_0x1eb98c,_0x1fa561,_0x1a0102){(0x0,_0x1638f5[_0x510a('0xd')])(this);this['_ClientServer']=_0x1fa561;this[_0x510a('0x1d4')]=_0x1a0102;this['_ClientServer']['on'](_0x510a('0x2a9'),this[_0x510a('0x17d')]['bind'](this));}['setDeviceToken'](_0x14d7d1,_0x565037){return new _0xe80cb2[(_0x510a('0x50'))]((_0x36ec59,_0x33ae93)=>{_0x326dcd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x2aa')+_0x14d7d1[_0x510a('0xe5')][_0x510a('0x1f1')],_0x565037);_0x14d7d1['api']['setDeviceToken'](_0x14d7d1[_0x510a('0xe5')]['default_extension'],_0x565037)['then'](_0x15955e=>{_0x14d7d1[_0x510a('0x11d')](_0x565037['id']);_0x36ec59();})[_0x510a('0x13')](_0x2272a3=>{_0x14d7d1['sendError'](_0x565037['id'],''+_0x2272a3);_0x33ae93(_0x2272a3);});});}}_0x38fe88['Mobile']=Mobile;return _0x2b46af[_0x510a('0x4')];};_0x5e4b0d[0x17]=function(_0x175848,_0x316bbf){'use strict';Object[_0x510a('0x75')](_0x316bbf,'__esModule',{'value':!![]});_0x316bbf['Contacts']=undefined;var _0x3d6028=require('bluebird');var _0x28df40=require(_0x510a('0x76'));var _0x591ebe=_0x58f75a(_0x28df40);var _0x4c51da=require(_0x510a('0x1a'));var _0x31a2f6=_0x58f75a(_0x4c51da);function _0x58f75a(_0x1e26a1){return _0x1e26a1&&_0x1e26a1['__esModule']?_0x1e26a1:{'default':_0x1e26a1};}class Contacts{constructor(_0x40d95e,_0x52fca6,_0x489e1b){this['_ClientServer']=_0x52fca6;this[_0x510a('0x1d4')]=_0x489e1b;this[_0x510a('0x1d2')]=_0x40d95e;this[_0x510a('0x1d3')]['on'](_0x510a('0x23d'),this[_0x510a('0x2ab')]['bind'](this));(0x0,_0x591ebe[_0x510a('0xd')])(this);}[_0x510a('0x2ab')](_0x38e4de,_0x353c99){return new _0x3d6028[(_0x510a('0x50'))]((_0x332965,_0x2a96cf)=>{if((0x0,_0x31a2f6[_0x510a('0xd')])(_0x38e4de['clientVersion'],_0x510a('0x2ac'),'>=')){this[_0x510a('0x2ad')](_0x38e4de,_0x353c99)[_0x510a('0x10')](_0x5dbc0d=>{_0x38e4de['sendJSON']({'actionid':_0x353c99['id'],'type':_0x353c99[_0x510a('0xf7')],'response':_0x5dbc0d});_0x332965();})['catch'](_0x952b22=>{_0x38e4de[_0x510a('0xfb')](_0x353c99['id'],_0x952b22['message']);_0x2a96cf(_0x952b22);});}else{_0x332965();}});}['listContacts'](_0x4c354d,_0x1f4cc9){return new _0x3d6028['Promise']((_0x56959e,_0x3a6157)=>{return _0x4c354d['api']['getContacts']()[_0x510a('0x10')](_0x396b3e=>{if(_0x396b3e){if(!Array[_0x510a('0x2ae')](_0x396b3e)){return _0x3a6157(new Error(_0x510a('0x2af')));}return _0x56959e(_0x396b3e);}else{return _0x3a6157(new Error(_0x510a('0x204')));}})[_0x510a('0x13')](_0x53938d=>{_0x3a6157(_0x53938d);});});}}_0x316bbf[_0x510a('0x150')]=Contacts;return _0x175848[_0x510a('0x4')];};_0x5e4b0d[0x18]=function(_0x125f64,_0x548045){'use strict';Object[_0x510a('0x75')](_0x548045,_0x510a('0x16'),{'value':!![]});_0x548045['Voicemail']=undefined;var _0x41a945=require(_0x510a('0x19'));var _0x272081=require(_0x510a('0x76'));var _0xcf4795=_0x4b08ec(_0x272081);var _0xc7520c=_0x59c414(0x4,0x18);var _0x156aac=_0x4b08ec(_0xc7520c);var _0x52b7dd=require(_0x510a('0x108'));var _0x363a4a=_0x4b08ec(_0x52b7dd);var _0x5ac3a6=require(_0x510a('0x1d1'));var _0x640b74=_0x4b08ec(_0x5ac3a6);function _0x4b08ec(_0x4b09f5){return _0x4b09f5&&_0x4b09f5[_0x510a('0x16')]?_0x4b09f5:{'default':_0x4b09f5};}class Voicemail{constructor(_0xb0cf6c,_0x1e092a,_0x48ac88){(0x0,_0xcf4795[_0x510a('0xd')])(this);this['_Zulu']=_0xb0cf6c;this[_0x510a('0x1d3')]=_0x1e092a;this[_0x510a('0x1d4')]=_0x48ac88;this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x2b0'),this[_0x510a('0x2b1')][_0x510a('0x10c')](this));}async['messagewaitingfn'](_0xcab602){const _0x41334c=_0xcab602[_0x510a('0x2b2')];const [_0x5a56c6,_0x269ddd]=_0x41334c[_0x510a('0x2b3')]('@');if(_0x269ddd==='device'){return;}_0x156aac[_0x510a('0xd')]['debug'](_0x510a('0x2b4')+JSON[_0x510a('0x52')](_0xcab602)+')');const _0x57aac8=parseInt(_0xcab602[_0x510a('0x265')]);this['sendMessageWaiting'](_0x5a56c6,_0x57aac8);if(!_0xcab602[_0x510a('0x268')]){return;}if(_0x57aac8===0x0){return;}const _0x3ffff3=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x2b5')](_0x5a56c6);const _0x21ba20=_0x363a4a[_0x510a('0xd')][_0x510a('0x2b6')](_0x3ffff3,_0x321e60=>_0x321e60[_0x510a('0x2b7')]===_0xcab602[_0x510a('0x268')]);if(!_0x21ba20){return;}if(!_0xcab602[_0x510a('0x1eb')]){_0x156aac['default']['error']('Voicemail\x20event\x20'+_0x21ba20[_0x510a('0x2b8')]+_0x510a('0x2b9'));return;}const _0x4240ad=await this[_0x510a('0x2ba')](_0x21ba20[_0x510a('0x2b8')],_0xcab602,_0x5a56c6);await this[_0x510a('0x2bb')](_0x5a56c6,_0xcab602,_0x4240ad);}['sendMessageWaiting'](_0xd72cb8,_0x58fae6,_0x347dcc=_0x363a4a['default'][_0x510a('0x2bc')]){const _0x3e728d=this[_0x510a('0x1d3')][_0x510a('0xa2')]();_0x640b74['default'][_0x510a('0x2bd')](_0x3e728d,(_0x5b6a12,_0x256158,_0x2ccf9c)=>{try{const _0x98ab03=_0x363a4a[_0x510a('0xd')]['get'](_0x5b6a12,'user.default_extension');if(_0x98ab03===_0xd72cb8){_0x5b6a12[_0x510a('0xe7')]({'subscription':_0x510a('0x2be'),'data':{'new':_0x58fae6}});}_0x2ccf9c();}catch(_0x18ac8e){_0x2ccf9c(_0x18ac8e);}},_0x4619a5=>{if(_0x4619a5){_0x156aac[_0x510a('0xd')][_0x510a('0x2b')](_0x4619a5);}_0x347dcc(_0x4619a5);});}async[_0x510a('0x2ba')](_0x10a52d,_0x4ed58b,_0x10520f){_0x156aac[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x2bf')+_0x10a52d+'\x20'+_0x4ed58b[_0x510a('0x1eb')]+'\x20=>\x20'+_0x10520f);const _0x431a41=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a9')]([{'name':_0x4ed58b['calleridname'],'number':_0x4ed58b[_0x510a('0x1eb')]},{'name':'','number':_0x10520f}]);await _0x41a945[_0x510a('0x50')]['all']([this[_0x510a('0x2c0')](_0x431a41,_0x4ed58b[_0x510a('0x1eb')],_0x10520f,_0x4ed58b[_0x510a('0x2c1')],_0x4ed58b[_0x510a('0x2c2')],undefined,undefined),this[_0x510a('0x2c0')](_0x431a41,_0x10520f,_0x4ed58b[_0x510a('0x1eb')],_0x4ed58b[_0x510a('0x2c1')],_0x4ed58b[_0x510a('0x2c2')],_0x10a52d,!![])]);return _0x431a41[_0x10520f]?_0x431a41[_0x10520f][_0x510a('0x2c3')]:_0x431a41[_0x4ed58b[_0x510a('0x1eb')]]['interaction'];}async['saveStream'](_0x2ff75d,_0x59b468,_0x16c729,_0x2c1f3c,_0x5c7057,_0x4468c6,_0x1436cd){if(!_0x2ff75d[_0x59b468]){return;}const _0x415630=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a2')](_0x2ff75d[_0x59b468][_0x510a('0x112')],[_0x59b468,_0x16c729]);let _0x12b6ea;if(_0x4468c6===undefined){_0x12b6ea={'uniqueid':_0x2c1f3c,'linkedid':_0x5c7057};_0x16c729=_0x59b468;}else{_0x12b6ea={'uniqueid':_0x2c1f3c,'linkedid':_0x5c7057,'id':_0x4468c6,'recording':_0x1436cd};}return this['_BackendServer'][_0x510a('0xad')][_0x510a('0x1ad')](_0x2ff75d[_0x59b468][_0x510a('0x2c3')],_0x2ff75d[_0x59b468]['zid'],_0x415630[_0x16c729],_0x510a('0x2c4'),_0x12b6ea);}async[_0x510a('0x2bb')](_0x4d8908,_0x378859,_0xee2fff){await this[_0x510a('0x1d4')][_0x510a('0x2c5')]['sendMobileVoicemailNotification'](_0x4d8908,_0x378859[_0x510a('0x1eb')],_0x378859[_0x510a('0x1ea')],_0xee2fff);}}_0x548045[_0x510a('0x157')]=Voicemail;return _0x125f64[_0x510a('0x4')];};_0x5e4b0d[0x19]=function(_0x2a4787,_0x15c805){'use strict';Object[_0x510a('0x75')](_0x15c805,_0x510a('0x16'),{'value':!![]});_0x15c805['Screensharing']=undefined;var _0x3ee458=_0x59c414(0x4,0x19);var _0x1c76fe=_0x5492a5(_0x3ee458);var _0x23ec92=require(_0x510a('0x19'));var _0x184bb0=_0x59c414(0x24,0x19);var _0x38709e=_0x5492a5(_0x184bb0);function _0x5492a5(_0x2a389d){return _0x2a389d&&_0x2a389d['__esModule']?_0x2a389d:{'default':_0x2a389d};}class Screensharing{constructor(_0x49fd13,_0x1ee874,_0x1c476c){this[_0x510a('0x1d2')]=_0x49fd13;this['_ClientServer']=_0x1ee874;this[_0x510a('0x1d4')]=_0x1c476c;this['_ScreensharingServer']=new _0x38709e['default'](_0x49fd13);this[_0x510a('0x1d3')]['on'](_0x510a('0x2c6'),this[_0x510a('0xc2')][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on']('ws::message::subscribe::screensharing',this[_0x510a('0x2c7')][_0x510a('0x10c')](this));this['_ClientServer']['on'](_0x510a('0x2c8'),this['leaveSession'][_0x510a('0x10c')](this));this[_0x510a('0x1d3')]['on']('ws::message::push::screensharing-answer',this['onAnswer'][_0x510a('0x10c')](this));}[_0x510a('0xc2')](_0x653ded,_0x4ca2c0){return new _0x23ec92[(_0x510a('0x50'))]((_0x5cd39e,_0x1f9f3e)=>{_0x1c76fe[_0x510a('0xd')][_0x510a('0x11')]('Creating\x20a\x20Screensharing\x20Session');const _0x5a750e=this[_0x510a('0x2c9')][_0x510a('0x2ca')](_0x4ca2c0['data']);this[_0x510a('0x2c9')][_0x510a('0x2ca')](_0x4ca2c0['data'])[_0x510a('0x10')](_0x375aea=>{const _0x187078=_0x4ca2c0['data']&&_0x4ca2c0[_0x510a('0xd3')][_0x510a('0x1ef')];const _0x2a4398=_0x653ded[_0x510a('0xe5')];let _0x1519e6;return this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a4')](_0x2a4398['id'])[_0x510a('0x10')](_0x1d2304=>{_0x1519e6=_0x1d2304;return this[_0x510a('0x1d4')]['api']['getInteractionByID'](_0x187078);})['then'](_0x2d8d48=>{_0x1c76fe['default'][_0x510a('0x11')]('INTERACTION',JSON[_0x510a('0x52')](_0x2d8d48));const _0x4b8f76=_0x2d8d48&&_0x2d8d48[_0x510a('0x23e')]&&_0x2d8d48['contacts'][_0x510a('0x2cb')];if(!_0x4b8f76){_0x1f9f3e(new Error('Could\x20not\x20fetch\x20interaction\x20users'));return;}const _0x1f9f5a=[];let _0x530c94='';for(let _0x5ef550 in _0x4b8f76){const _0x54929b=_0x4b8f76[_0x5ef550];const _0x5c1145=_0x54929b['id'];if(_0x1519e6===_0x5ef550){_0x530c94=_0x510a('0x258');}else{_0x530c94=_0x510a('0x1ed');}_0x1f9f5a[_0x510a('0x295')](this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1ad')](_0x187078,_0x5c1145,_0x1519e6,'SCREEN_SHARING_SESSION_CREATE',{'sessionid':_0x375aea['roomId'],'direction':_0x530c94}));if(_0x2a4398['id']!==_0x5c1145&&_0x54929b[_0x510a('0x188')]){for(let _0x3ca441 in _0x54929b[_0x510a('0x188')]){let _0x44dcba=this[_0x510a('0x1d3')]['getSession'](_0x3ca441);if(_0x44dcba){_0x44dcba[_0x510a('0xe7')]({'action':_0x510a('0x2cc'),'data':{'interactionId':_0x187078,'roomId':_0x375aea['roomId'],'contactId':_0x1519e6}});}}}}return _0x23ec92['Promise'][_0x510a('0x6')](_0x1f9f5a);})[_0x510a('0x10')](_0x18ca88=>{return _0x23ec92['Promise'][_0x510a('0x226')](_0x18ca88);})[_0x510a('0x10')](()=>{_0x653ded[_0x510a('0xe7')]({'actionid':_0x4ca2c0['id'],'data':{'roomid':_0x375aea[_0x510a('0x2cd')]}});_0x5cd39e();});})[_0x510a('0x13')](_0x4653ef=>{_0x653ded[_0x510a('0xe7')]({'status':![],'message':_0x4653ef&&_0x4653ef[_0x510a('0xc3')],'actionid':_0x4ca2c0['id']});_0x1f9f3e(_0x4653ef);});});}[_0x510a('0x2c7')](_0x6d63aa,_0x396648){const _0x33a516=_0x396648[_0x510a('0xd3')];if(!_0x33a516||!_0x33a516[_0x510a('0x2ce')]){_0x6d63aa[_0x510a('0xe7')]({'status':![],'message':_0x510a('0x2cf'),'actionid':_0x396648['id']});return;}_0x6d63aa[_0x510a('0xe5')][_0x510a('0x2d0')]=_0x33a516[_0x510a('0x2d1')]?_0x33a516[_0x510a('0x2d1')]['sdp']:null;_0x6d63aa[_0x510a('0xe5')][_0x510a('0x2d2')]=_0x33a516['isPlanB'];_0x6d63aa[_0x510a('0xe5')][_0x510a('0x2d3')]=_0x33a516[_0x510a('0x2d3')];_0x1c76fe['default'][_0x510a('0x4a')](_0x510a('0x2d4'),_0x6d63aa['user'][_0x510a('0x2d0')]);_0x6d63aa[_0x510a('0xe5')][_0x510a('0x2d5')]=_0x12d99e=>{return new _0x23ec92['Promise']((_0x62defe,_0x4006d4)=>{const _0x542b27=setTimeout(()=>{_0x1c76fe[_0x510a('0xd')][_0x510a('0x11')]('Timeout!');this[_0x510a('0x2c9')][_0x510a('0x64')](_0x510a('0x2d6')+_0x6d63aa[_0x510a('0xe5')]['username']);_0x4006d4(new Error(_0x510a('0x2d7')));},0x1388);this['_ScreensharingServer']['on'](_0x510a('0x2d6')+_0x6d63aa[_0x510a('0xe5')][_0x510a('0xe6')],_0x106d97=>{_0x1c76fe[_0x510a('0xd')][_0x510a('0x11')]('Got\x20answer\x20from',_0x6d63aa[_0x510a('0xe5')][_0x510a('0xe6')]);this[_0x510a('0x2c9')]['removeAllListeners']('answer-'+_0x6d63aa[_0x510a('0xe5')][_0x510a('0xe6')]);clearTimeout(_0x542b27);_0x1c76fe[_0x510a('0xd')][_0x510a('0x4a')]('RESOLVING\x20WITH\x20ANSWER:',_0x106d97);_0x62defe(_0x106d97);});_0x6d63aa['sendJSON']({'subscription':'screensharing','actionid':_0x396648['id'],'data':{'offer':_0x12d99e}});});};const _0x3a4a70=this[_0x510a('0x2c9')][_0x510a('0x2d8')](_0x33a516[_0x510a('0x2ce')],_0x6d63aa[_0x510a('0xe5')]);if(_0x3a4a70){_0x6d63aa[_0x510a('0xe7')]({'actionid':_0x396648['id'],'status':!![],'data':{'roomoptions':_0x3a4a70[_0x510a('0x167')]}});}else{_0x6d63aa['sendJSON']({'status':![],'message':_0x510a('0x2d9'),'actionid':_0x396648['id']});}}[_0x510a('0x2da')](_0x2e2be2,_0xaaa9ec){const _0x1ec4a6=_0xaaa9ec[_0x510a('0xd3')];if(!_0x1ec4a6||!_0x1ec4a6[_0x510a('0x2ce')]){_0x2e2be2[_0x510a('0xe7')]({'status':![],'message':'No\x20room\x20id\x20was\x20provided','actionid':_0xaaa9ec['id']});return;}if(this[_0x510a('0x2c9')]['leaveRoom'](_0x1ec4a6[_0x510a('0x2ce')],_0x2e2be2[_0x510a('0xe5')])){_0x2e2be2['sendJSON']({'actionid':_0xaaa9ec['id'],'status':!![]});}else{_0x2e2be2[_0x510a('0xe7')]({'status':![],'message':_0x510a('0x2db'),'actionid':_0xaaa9ec['id']});}}[_0x510a('0x2dc')](_0x5e8f88,_0x591a02){const _0xaa16f5=_0x591a02[_0x510a('0xd3')];_0x1c76fe[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x2dd'),_0xaa16f5);if(!_0xaa16f5||!_0xaa16f5[_0x510a('0x2de')]||!_0xaa16f5[_0x510a('0x2de')][_0x510a('0x2df')]){_0x5e8f88[_0x510a('0xe7')]({'status':![],'message':_0x510a('0x2e0'),'actionid':_0x591a02['id']});return;}this[_0x510a('0x2c9')][_0x510a('0x2dc')](_0x5e8f88[_0x510a('0xe5')][_0x510a('0xe6')],_0xaa16f5[_0x510a('0x2de')]);_0x5e8f88[_0x510a('0xe7')]({'status':!![],'actionid':_0x591a02['id']});}}_0x15c805[_0x510a('0x158')]=Screensharing;return _0x2a4787[_0x510a('0x4')];};_0x5e4b0d[0x1a]=function(_0x358986,_0x6e79ac){'use strict';Object[_0x510a('0x75')](_0x6e79ac,_0x510a('0x16'),{'value':!![]});_0x6e79ac[_0x510a('0x166')]=undefined;var _0x2fd39e=require(_0x510a('0x9c'));var _0x43f620=_0x1d1c09(_0x2fd39e);var _0x2658f1=require(_0x510a('0x19'));var _0x4c3d7d=_0x59c414(0x4,0x1a);var _0x4845c5=_0x1d1c09(_0x4c3d7d);function _0x1d1c09(_0xd16d45){return _0xd16d45&&_0xd16d45['__esModule']?_0xd16d45:{'default':_0xd16d45};}const _0x5017c3=process[_0x510a('0x26')][_0x510a('0x2e1')]?JSON[_0x510a('0x32')](process['env']['PORTS']):{'api':{'port':0x50,'ssl':![]},'asterisk':{'port':0x1f99,'ssl':!![]},'zulu':{'port':0x1f42,'bindAddress':_0x510a('0x120')}};class BaseAPI{constructor(){this[_0x510a('0x99')]=_0x5017c3[_0x510a('0x2e2')][_0x510a('0x99')];let _0x1e6f99=_0x5017c3[_0x510a('0x2e2')][_0x510a('0x2e3')];_0x1e6f99=_0x1e6f99===_0x510a('0x2e4')?_0x510a('0x120'):_0x1e6f99;this[_0x510a('0x167')]={'baseUrl':_0x510a('0x2e5')+_0x1e6f99+':'+this[_0x510a('0x99')]+'/api/','json':!![],'strictSSL':![],'timeout':0x4e20};}['postResource'](_0x19653e,_0x1ee1de){const _0x487503=process['hrtime']();_0x4845c5['default'][_0x510a('0x4a')](_0x510a('0x2e6')+_0x19653e+_0x510a('0xfa')+JSON[_0x510a('0x52')](_0x1ee1de)+']');return new _0x2658f1[(_0x510a('0x50'))]((_0x12c124,_0x4d884a)=>{this['options'][_0x510a('0xa9')]='POST';this['options'][_0x510a('0x2e7')]=_0x19653e;this['options'][_0x510a('0x16d')]=_0x1ee1de;(0x0,_0x43f620[_0x510a('0xd')])(this[_0x510a('0x167')],(_0x1c4a24,_0x3ac0dd,_0x4fcaf9)=>{if(_0x1c4a24){_0x4d884a(new Error(_0x1c4a24));return;}const [_0x827669,_0x183dbd]=process[_0x510a('0x2e8')](_0x487503);const _0x4691a0=_0x827669*0x3e8+_0x183dbd/0xf4240;_0x4845c5[_0x510a('0xd')]['debug'](_0x510a('0x2e9')+_0x19653e+_0x510a('0x2ea')+_0x4691a0+'\x20ms)\x20'+JSON['stringify'](_0x4fcaf9));if(_0x3ac0dd[_0x510a('0x2eb')]>=0x190){if(_0x3ac0dd['statusCode']===0x1f4){_0x4845c5[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x2e9')+_0x19653e+']:\x20received\x20a\x20'+_0x3ac0dd['statusCode']);}else{_0x4845c5[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x2e9')+_0x19653e+_0x510a('0x2ec')+_0x3ac0dd[_0x510a('0x2eb')]);}return _0x4d884a(new Error(_0x3ac0dd[_0x510a('0x2ed')]));}return _0x12c124({'response':_0x3ac0dd,'body':_0x4fcaf9});});});}[_0x510a('0x171')](_0xd50be2){const _0x59d370=process[_0x510a('0x2e8')]();_0x4845c5['default'][_0x510a('0x4a')]('API\x20<=\x20[GET]\x20['+_0xd50be2+']');return new _0x2658f1['Promise']((_0x6d31c3,_0x1505d6)=>{this[_0x510a('0x167')][_0x510a('0xa9')]=_0x510a('0x2ee');this[_0x510a('0x167')]['uri']=_0xd50be2;(0x0,_0x43f620[_0x510a('0xd')])(this[_0x510a('0x167')],(_0xc2bf1d,_0x28e678,_0x3738ac)=>{if(_0xc2bf1d){_0x1505d6(new Error(_0xc2bf1d));return;}const [_0x3c0cb1,_0x2d1161]=process[_0x510a('0x2e8')](_0x59d370);const _0x240daf=_0x3c0cb1*0x3e8+_0x2d1161/0xf4240;_0x4845c5[_0x510a('0xd')]['debug']('API\x20=>\x20[GET]\x20['+_0xd50be2+']:\x20('+_0x240daf+'\x20ms)\x20'+JSON[_0x510a('0x52')](_0x3738ac));if(_0x28e678[_0x510a('0x2eb')]>=0x190){if(_0x28e678[_0x510a('0x2eb')]===0x1f4){_0x4845c5[_0x510a('0xd')]['error'](_0x510a('0x2ef')+_0xd50be2+_0x510a('0x2ec')+_0x28e678[_0x510a('0x2eb')]);}else{_0x4845c5[_0x510a('0xd')]['warn'](_0x510a('0x2ef')+_0xd50be2+_0x510a('0x2ec')+_0x28e678[_0x510a('0x2eb')]);}return _0x1505d6(new Error(_0x28e678[_0x510a('0x2ed')]));}return _0x6d31c3({'response':_0x28e678,'body':_0x3738ac});});});}[_0x510a('0x1b4')](_0x4d1bc8,_0x572c62){const _0x86c70b=process[_0x510a('0x2e8')]();_0x4845c5[_0x510a('0xd')]['debug'](_0x510a('0x2f0')+_0x4d1bc8+_0x510a('0xfa')+JSON[_0x510a('0x52')](_0x572c62)+']');return new _0x2658f1[(_0x510a('0x50'))]((_0x40e1b6,_0x1bb983)=>{this[_0x510a('0x167')][_0x510a('0xa9')]=_0x510a('0x2f1');this['options'][_0x510a('0x2e7')]=_0x4d1bc8;this[_0x510a('0x167')][_0x510a('0x16d')]=_0x572c62;(0x0,_0x43f620['default'])(this[_0x510a('0x167')],(_0x3b379f,_0x549e4e,_0x19ef09)=>{if(_0x3b379f){_0x1bb983(new Error(_0x3b379f));return;}const [_0x2136c7,_0x1a551a]=process[_0x510a('0x2e8')](_0x86c70b);const _0x27cb0a=_0x2136c7*0x3e8+_0x1a551a/0xf4240;_0x4845c5[_0x510a('0xd')]['debug'](_0x510a('0x2f2')+_0x4d1bc8+_0x510a('0x2ea')+_0x27cb0a+'\x20ms)\x20'+JSON[_0x510a('0x52')](_0x19ef09));if(_0x549e4e[_0x510a('0x2eb')]>=0x190){if(_0x549e4e['statusCode']===0x1f4){_0x4845c5[_0x510a('0xd')]['error'](_0x510a('0x2f2')+_0x4d1bc8+']:\x20received\x20a\x20'+_0x549e4e['statusCode']);}else{_0x4845c5[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x2f2')+_0x4d1bc8+_0x510a('0x2ec')+_0x549e4e['statusCode']);}return _0x1bb983(new Error(_0x549e4e[_0x510a('0x2ed')]));}return _0x40e1b6({'response':_0x549e4e,'body':_0x19ef09});});});}[_0x510a('0x2f3')](_0x12c60c){const _0x3e8abc=process[_0x510a('0x2e8')]();_0x4845c5['default'][_0x510a('0x4a')](_0x510a('0x2f4')+_0x12c60c+']');return new _0x2658f1['Promise']((_0x440669,_0x15562e)=>{this['options']['method']='DELETE';this[_0x510a('0x167')][_0x510a('0x2e7')]=_0x12c60c;(0x0,_0x43f620[_0x510a('0xd')])(this['options'],(_0x327a5d,_0x2155c7,_0x216cf3)=>{if(_0x327a5d){_0x15562e(new Error(_0x327a5d));return;}const [_0x52865b,_0x1a1d32]=process[_0x510a('0x2e8')](_0x3e8abc);const _0x48d1e1=_0x52865b*0x3e8+_0x1a1d32/0xf4240;_0x4845c5['default'][_0x510a('0x4a')](_0x510a('0x2f5')+_0x12c60c+_0x510a('0x2ea')+_0x48d1e1+_0x510a('0x2f6')+JSON[_0x510a('0x52')](_0x216cf3));if(_0x2155c7[_0x510a('0x2eb')]>=0x190){if(_0x2155c7[_0x510a('0x2eb')]===0x1f4){_0x4845c5[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x2f5')+_0x12c60c+']:\x20received\x20a\x20'+_0x2155c7['statusCode']);}else{_0x4845c5[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x2f5')+_0x12c60c+_0x510a('0x2ec')+_0x2155c7[_0x510a('0x2eb')]);}return _0x15562e(new Error(_0x2155c7['statusMessage']));}return _0x440669({'response':_0x2155c7,'body':_0x216cf3});});});}[_0x510a('0x2f7')](_0xfdcc40,_0x2c3df8){const _0x55defe=process[_0x510a('0x2e8')]();_0x4845c5[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x2f8')+_0xfdcc40+']');return new _0x2658f1[(_0x510a('0x50'))]((_0x24ff83,_0x2493d2)=>{this[_0x510a('0x167')]['method']=_0x510a('0x2f9');this[_0x510a('0x167')]['uri']=_0xfdcc40;this[_0x510a('0x167')][_0x510a('0x16d')]=_0x2c3df8;(0x0,_0x43f620[_0x510a('0xd')])(this[_0x510a('0x167')],(_0x482844,_0x466a2c,_0x237498)=>{if(_0x482844){_0x2493d2(new Error(_0x482844));return;}const [_0x1c404a,_0x4203de]=process[_0x510a('0x2e8')](_0x55defe);const _0x4600b9=_0x1c404a*0x3e8+_0x4203de/0xf4240;_0x4845c5[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x2fa')+_0xfdcc40+_0x510a('0x2ea')+_0x4600b9+'\x20ms)\x20'+JSON[_0x510a('0x52')](_0x237498));if(_0x466a2c[_0x510a('0x2eb')]>=0x190){if(_0x466a2c[_0x510a('0x2eb')]===0x1f4){_0x4845c5[_0x510a('0xd')][_0x510a('0x2b')]('API\x20=>\x20[PATCH]\x20['+_0xfdcc40+_0x510a('0x2ec')+_0x466a2c[_0x510a('0x2eb')]);}else{_0x4845c5[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x2fa')+_0xfdcc40+_0x510a('0x2ec')+_0x466a2c['statusCode']);}return _0x2493d2(new Error(_0x466a2c['statusMessage']));}_0x24ff83({'response':_0x466a2c,'body':_0x237498});});});}}_0x6e79ac[_0x510a('0x166')]=BaseAPI;return _0x358986[_0x510a('0x4')];};_0x5e4b0d[0x1b]=function(_0x4d35ef,_0x529692){'use strict';Object[_0x510a('0x75')](_0x529692,_0x510a('0x16'),{'value':!![]});_0x529692['Session']=undefined;var _0x481b0d=_0x59c414(0x25,0x1b);var _0x1ddb17=_0x59c414(0x4,0x1b);var _0x41a0b5=_0x1c9106(_0x1ddb17);var _0x30565b=require('unix-timestamp');var _0x5a90d5=_0x1c9106(_0x30565b);function _0x1c9106(_0x474b0a){return _0x474b0a&&_0x474b0a[_0x510a('0x16')]?_0x474b0a:{'default':_0x474b0a};}_0x5a90d5[_0x510a('0xd')][_0x510a('0x7b')]=!![];class Session extends _0x481b0d['BaseSession']{constructor(_0x5c3d51,_0x155706,_0x401d8d){super(_0x5c3d51,_0x155706);this['_user']={};this[_0x510a('0x2fb')]=_0x5a90d5[_0x510a('0xd')][_0x510a('0xd8')]();this[_0x510a('0x109')]=null;this['_clientVersion']=null;this['_clientType']=null;this[_0x510a('0x2fc')]=null;this[_0x510a('0x2fd')]=null;this[_0x510a('0x2fe')]=null;this['_apps']=null;this[_0x510a('0x2ff')]=null;this[_0x510a('0x300')]=![];this[_0x510a('0xad')]=_0x401d8d[_0x510a('0x73')]();}get[_0x510a('0xc6')](){return this[_0x510a('0x300')];}set['authenticated'](_0x25fc0c){this['_authenticated']=!!_0x25fc0c;}get['uid'](){return this[_0x510a('0x2fe')];}set[_0x510a('0xe3')](_0x52d8d2){this[_0x510a('0x2fe')]=_0x52d8d2;}get['apps'](){return this[_0x510a('0x301')];}set['apps'](_0x49b02a){this[_0x510a('0x301')]=_0x49b02a;}get['appData'](){return this['_appData'];}set[_0x510a('0xea')](_0x30ddf4){this[_0x510a('0x2ff')]=_0x30ddf4;}get['token'](){return this[_0x510a('0x109')];}set[_0x510a('0xde')](_0x3bf9f4){this[_0x510a('0x109')]=_0x3bf9f4;this[_0x510a('0xad')][_0x510a('0xde')]=_0x3bf9f4;}get[_0x510a('0xd9')](){return this[_0x510a('0x302')];}set[_0x510a('0xd9')](_0x3a9160){this[_0x510a('0x302')]=_0x3a9160;this['api'][_0x510a('0x30')]=_0x3a9160;}get['clientType'](){return this[_0x510a('0x303')];}set[_0x510a('0x11c')](_0x52238e){this[_0x510a('0x303')]=_0x52238e;}set[_0x510a('0xe5')](_0x5b73aa){this[_0x510a('0x221')]=_0x5b73aa;}get[_0x510a('0xe5')](){return this['_user'];}set['contactuuid'](_0x5ce834){this[_0x510a('0x2fd')]=_0x5ce834;}get[_0x510a('0xe8')](){return this[_0x510a('0x2fd')];}set[_0x510a('0xd6')](_0x50cd8b){this['_lastConnected']=_0x50cd8b;}get[_0x510a('0xd6')](){return this[_0x510a('0x2fc')];}get['connected'](){return this[_0x510a('0x2fb')];}[_0x510a('0xe7')](_0x13b21c,_0x2c05d2='debug'){if(this[_0x510a('0xc6')]){if(_0x41a0b5['default'][_0x2c05d2]){_0x41a0b5[_0x510a('0xd')][_0x2c05d2](_0x510a('0x304')+this[_0x510a('0x42')][_0x510a('0xbf')]+_0x510a('0xfa')+this['id']+']:'+JSON[_0x510a('0x52')](_0x13b21c));}super[_0x510a('0xe7')](_0x13b21c,_0x2c05d2);}}}_0x529692[_0x510a('0x18a')]=Session;return _0x4d35ef[_0x510a('0x4')];};_0x5e4b0d[0x1c]=function(_0x1a1c6d,_0x47e731){'use strict';Object[_0x510a('0x75')](_0x47e731,'__esModule',{'value':!![]});_0x47e731[_0x510a('0x18a')]=undefined;var _0x66bae=_0x59c414(0x25,0x1c);var _0x5b7974=_0x59c414(0x4,0x1c);var _0x368cf0=_0x2ad882(_0x5b7974);var _0x950ed8=require(_0x510a('0x79'));var _0x38d6fe=_0x2ad882(_0x950ed8);function _0x2ad882(_0x128095){return _0x128095&&_0x128095[_0x510a('0x16')]?_0x128095:{'default':_0x128095};}_0x38d6fe[_0x510a('0xd')][_0x510a('0x7b')]=!![];class Session extends _0x66bae[_0x510a('0x305')]{constructor(_0x4e2aa2,_0x3fd08c){super(_0x4e2aa2,_0x3fd08c);this[_0x510a('0x2fb')]=_0x38d6fe[_0x510a('0xd')][_0x510a('0xd8')]();this[_0x510a('0x300')]=![];}get['authenticated'](){return this[_0x510a('0x300')];}set['authenticated'](_0x19e1b8){this[_0x510a('0x300')]=!!_0x19e1b8;}get[_0x510a('0x11b')](){return this[_0x510a('0x2fb')];}[_0x510a('0xe7')](_0x227238,_0x3cddfa=_0x510a('0x4a')){if(_0x368cf0[_0x510a('0xd')][_0x3cddfa]){_0x368cf0['default'][_0x3cddfa](_0x510a('0x306')+this[_0x510a('0x42')][_0x510a('0xbf')]+_0x510a('0xfa')+this['id']+']:'+JSON[_0x510a('0x52')](_0x227238));}super[_0x510a('0xe7')](_0x227238,_0x3cddfa);}}_0x47e731[_0x510a('0x18a')]=Session;return _0x1a1c6d['exports'];};_0x5e4b0d[0x1d]=function(_0x32dff0,_0x2a3b14){'use strict';Object[_0x510a('0x75')](_0x2a3b14,_0x510a('0x16'),{'value':!![]});_0x2a3b14[_0x510a('0x1bc')]=undefined;var _0x465269=require(_0x510a('0x108'));var _0x37039b=_0x231016(_0x465269);var _0x4f3c40=_0x59c414(0x1a,0x1d);var _0x288ac3=_0x59c414(0x4,0x1d);var _0x4fbab0=_0x231016(_0x288ac3);var _0x1ead4c=require(_0x510a('0x19'));function _0x231016(_0x12a7f8){return _0x12a7f8&&_0x12a7f8['__esModule']?_0x12a7f8:{'default':_0x12a7f8};}class BackendAPI extends _0x4f3c40[_0x510a('0x166')]{constructor(){super();this['_token']=null;this[_0x510a('0x169')]=null;this[_0x510a('0x167')][_0x510a('0xb7')]={'X-SERVER-TOKEN':null};}get['token'](){return this[_0x510a('0x109')];}set[_0x510a('0xde')](_0x23712e){this[_0x510a('0x109')]=_0x23712e;this['options']['headers'][_0x510a('0x307')]=_0x23712e;}[_0x510a('0x308')](_0x11704b,_0x565127,_0x4cf3cc,_0x2eef9e=![],_0x513be9=''){return this[_0x510a('0x16f')]('user/'+_0x11704b+_0x510a('0x309'),{'sender':_0x565127,'text':_0x4cf3cc,'mentioned':_0x2eef9e,'topic':_0x513be9});}[_0x510a('0x30a')](_0x6e2d5b){return new _0x1ead4c[(_0x510a('0x50'))]((_0x5e8277,_0x24dcaf)=>{this[_0x510a('0x171')]('user/'+_0x6e2d5b)[_0x510a('0x10')](_0x1551ec=>{return _0x5e8277(_0x1551ec['body']);})['catch'](_0x11cd2f=>{return _0x24dcaf(_0x11cd2f);});});}['getVoicemailMessages'](_0x47a101){return new _0x1ead4c[(_0x510a('0x50'))]((_0x108c81,_0x36448f)=>{return this['getResource'](_0x510a('0x30b')+_0x47a101)[_0x510a('0x10')](_0x380e5e=>{return _0x108c81(_0x37039b[_0x510a('0xd')][_0x510a('0x180')](_0x380e5e,_0x510a('0x30c')));})[_0x510a('0x13')](_0x2d3cdc=>{return _0x36448f(_0x2d3cdc);});});}['getUserCallStatusSettings'](_0x3f0077){return new _0x1ead4c[(_0x510a('0x50'))]((_0x41ceed,_0x35af47)=>{return this['getResource'](_0x510a('0x30d')+_0x3f0077+_0x510a('0x30e'))[_0x510a('0x10')](_0x18c96b=>{return _0x41ceed(_0x37039b['default'][_0x510a('0x180')](_0x18c96b,'body.enable_callStatus'));})[_0x510a('0x13')](_0x5e65cf=>{return _0x35af47(_0x5e65cf);});});}[_0x510a('0x2a2')](_0x2a5865){return new _0x1ead4c['Promise']((_0xd6330,_0x187848)=>{this[_0x510a('0x171')]('/sms/owners/'+_0x2a5865)['then'](_0x158dff=>{const _0x448822=_0x37039b[_0x510a('0xd')][_0x510a('0x180')](_0x158dff,'body.status');const _0x49f779=_0x37039b[_0x510a('0xd')][_0x510a('0x180')](_0x158dff,_0x510a('0x30f'));if(!_0x448822||!_0x49f779){return _0x1ead4c['Promise']['reject'](new Error(_0x510a('0x310')+_0x2a5865));}_0xd6330(_0x49f779);})[_0x510a('0x13')](_0x404d2b=>{_0x187848(_0x404d2b);});});}[_0x510a('0x311')](_0x45ed6f){return this[_0x510a('0x171')]('/cdr/'+_0x45ed6f+'/recording')['then'](_0x13dd2b=>{const _0x5c23fb=_0x37039b[_0x510a('0xd')]['get'](_0x13dd2b,_0x510a('0x312'))||null;return _0x5c23fb;});}['getTurnSettings'](_0xa27825=![]){let _0x26b393=_0xa27825?_0x510a('0x313'):'';const _0x8533f0=_0x510a('0x314')+_0x26b393;return this[_0x510a('0x171')](_0x8533f0)[_0x510a('0x10')](_0x2cabb1=>{const _0x28c34e=_0x37039b[_0x510a('0xd')][_0x510a('0x180')](_0x2cabb1,_0x510a('0x315'))||null;return _0x28c34e;});}async[_0x510a('0x220')](_0xf786eb){const _0x12266b='/user/'+_0xf786eb+_0x510a('0x316');const _0x168fb9=await this[_0x510a('0x171')](_0x12266b);return _0x37039b['default'][_0x510a('0x180')](_0x168fb9,'body');}}_0x2a3b14['BackendAPI']=BackendAPI;return _0x32dff0['exports'];};_0x5e4b0d[0x1e]=function(_0x15b996,_0x3dfaf8){'use strict';Object[_0x510a('0x75')](_0x3dfaf8,_0x510a('0x16'),{'value':!![]});_0x3dfaf8['CallManager']=undefined;var _0x25f47a=require('auto-bind');var _0xda160e=_0x197a9d(_0x25f47a);var _0x17f806=require(_0x510a('0x79'));var _0x364fd1=_0x197a9d(_0x17f806);var _0x336bdb=require(_0x510a('0x19'));var _0xd1eea4=require('lodash');var _0x4050f9=_0x197a9d(_0xd1eea4);var _0x7a0ee5=_0x59c414(0x26,0x1e);var _0x2f1001=require(_0x510a('0x106'));var _0x3d0618=_0x59c414(0x4,0x1e);var _0x254353=_0x197a9d(_0x3d0618);var _0xede01f=require(_0x510a('0x317'));var _0x45ff23=_0x197a9d(_0xede01f);function _0x197a9d(_0x498272){return _0x498272&&_0x498272[_0x510a('0x16')]?_0x498272:{'default':_0x498272};}_0x364fd1['default'][_0x510a('0x7b')]=!![];const _0x4b7b99={'NOANSWER':_0x510a('0x318'),'ANSWERED':_0x510a('0x319'),'TRANSFERED':_0x510a('0x31a')};const _0x100a93={'DOWN':'0','RSRVD':'1','OFFHOOK':'2','DIALING':'3','RING':'4','RINGING':'5','UP':'6','BUSY':'7','DIALINGOFFHOOK':'8','PRERING':'9','UNKNOWN':'10'};const _0x12324f={'SUCCESS':'Success','UNKNOWN':_0x510a('0x31b'),'INCOMING':'incoming','OUTGOING':_0x510a('0x31c'),'NOANSWER':_0x510a('0x31d')};class CallManager extends _0x2f1001['EventEmitter']{constructor(_0x588538,_0x461337,_0x105feb,_0x18e6a2,_0xb91b9){super();(0x0,_0xda160e[_0x510a('0xd')])(this);this[_0x510a('0x31e')]=/(.*)\/(\d*)[@|-]/;this[_0x510a('0x1d2')]=_0x588538;this['_ClientServer']=_0x461337;this[_0x510a('0x1d4')]=_0x105feb;this[_0x510a('0x31f')]=_0x18e6a2;this['_CallConference']=_0xb91b9;this[_0x510a('0x320')]={};this[_0x510a('0x321')]={};this[_0x510a('0x322')]=new _0x7a0ee5[(_0x510a('0x322'))]();this[_0x510a('0x1d2')][_0x510a('0x5c')](_0x510a('0x323'),this[_0x510a('0x324')][_0x510a('0x10c')](this));this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x325'),this[_0x510a('0x326')][_0x510a('0x10c')](this));this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x327'),this[_0x510a('0x328')]['bind'](this));this[_0x510a('0x1d2')][_0x510a('0x5c')](_0x510a('0x329'),this[_0x510a('0x32a')][_0x510a('0x10c')](this));this['_Zulu'][_0x510a('0x5c')]('newstate',this[_0x510a('0x32b')][_0x510a('0x10c')](this));this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x32c'),this[_0x510a('0x32d')][_0x510a('0x10c')](this));this[_0x510a('0x1d2')]['astmanAddListener']('varset',this[_0x510a('0x32e')]['bind'](this));this[_0x510a('0x1d2')][_0x510a('0x5c')](_0x510a('0x32f'),this[_0x510a('0x330')]['bind'](this));this['_Zulu'][_0x510a('0x5c')]('userevent',this[_0x510a('0x249')][_0x510a('0x10c')](this));this[_0x510a('0x1d4')]['on'](_0x510a('0x331'),this[_0x510a('0x332')][_0x510a('0x10c')](this));}async['mergeCalls'](_0x2492dc,_0x17279c){function _0x143f79(_0x18118f){_0x2492dc['sendJSON'](_0x4050f9['default'][_0x510a('0x333')]({'actionid':_0x17279c['id'],'status':![]},_0x18118f));}try{const {zuluIds,zid,uuid:contactUUID}=_0x17279c['data']||{};_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x334')+JSON['stringify']({'zuluIds':zuluIds,'zid':zid,'contactUUID':contactUUID})+')');const _0xf848e1=this[_0x510a('0x335')](zuluIds);const _0x51117c=this[_0x510a('0x336')](_0xf848e1);const _0xe2f00=_0x4050f9['default'][_0x510a('0x337')](_0x51117c,(_0x46a66a,_0x43927a,_0x52ef74)=>{if(!this['canPromoteToNWay'](_0x43927a)){_0x46a66a[_0x510a('0x295')](zuluIds[_0x52ef74]);}return _0x46a66a;},[]);if(!_0x4050f9[_0x510a('0xd')]['isEmpty'](_0xe2f00)){_0x143f79({'error':_0x510a('0x338')+_0x4050f9[_0x510a('0xd')][_0x510a('0x339')](_0xe2f00,',\x20'),'invalidZuluIds':_0xe2f00});return;}let _0x1ef4bb;let _0x4420e4=_0x4050f9[_0x510a('0xd')]['find'](_0x51117c,_0x5ba074=>_0x5ba074[_0x510a('0x33a')]);if(_0x4420e4){_0x1ef4bb=_0x4050f9['default'][_0x510a('0x33b')](_0x51117c,_0x483bf3=>_0x483bf3!==_0x4420e4);}else{_0x4420e4=await this[_0x510a('0x33c')](_0x4050f9['default'][_0x510a('0x33d')](_0x51117c),contactUUID,zid);_0x1ef4bb=_0x4050f9[_0x510a('0xd')][_0x510a('0x33e')](_0x51117c);}const _0x113ecc=_0x4050f9['default']['map'](_0xf848e1,_0x73c6ad=>_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x73c6ad,'state.channel'));const _0x46bdd9=(0x0,_0x4050f9[_0x510a('0xd')])(_0x1ef4bb)[_0x510a('0x33f')](_0x5be96f=>_0x4050f9['default']['values'](_0x5be96f['channels']))[_0x510a('0x33b')](_0x11d165=>!_0x4050f9[_0x510a('0xd')][_0x510a('0x340')](_0x113ecc,_0x4050f9[_0x510a('0xd')]['get'](_0x11d165,_0x510a('0x341'))))[_0x510a('0x342')]();await _0x336bdb[_0x510a('0x50')][_0x510a('0x226')](_0x4050f9[_0x510a('0xd')][_0x510a('0x21f')](_0x46bdd9,_0x5b64e0=>this[_0x510a('0x343')](_0x5b64e0,_0x4420e4,zid)));_0x143f79({'status':!![],'interactionId':_0x4420e4['interactionId'],'conferenceNumber':_0x4420e4[_0x510a('0x344')]});}catch(_0x21c2e3){_0x254353[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x345'),_0x21c2e3[_0x510a('0x145')]);_0x143f79({'status':![],'message':_0x21c2e3['message']||_0x510a('0x346')});}}[_0x510a('0x347')](_0x294807){if(_0x294807[_0x510a('0x33a')]){return!![];}const _0x1d1ea2=_0x4050f9[_0x510a('0xd')][_0x510a('0x348')](_0x294807[_0x510a('0x349')]);if(_0x1d1ea2<0x2){_0x254353['default'][_0x510a('0x11')](_0x510a('0x34a')+_0x294807[_0x510a('0x2c2')]+_0x510a('0x34b'));return![];}if(_0x1d1ea2>0x2){_0x254353[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x34a')+_0x294807[_0x510a('0x2c2')]+_0x510a('0x34c'));return![];}return!![];}async[_0x510a('0x33c')](_0x12bb3a,_0x2038a5,_0x63b2b9){_0x254353[_0x510a('0xd')]['debug'](_0x510a('0x34d')+_0x12bb3a[_0x510a('0x2c2')]+',\x20'+_0x2038a5+',\x20'+_0x63b2b9+')');const _0x55d9fb=this['findCallerIdsForCall'](_0x12bb3a);const {interactionId}=await this[_0x510a('0x1ba')](_0x55d9fb);const _0x47f740=await this['_CallConference'][_0x510a('0x1f6')](interactionId,_0x2038a5,_0x63b2b9);const _0x73e3c2=_0x4050f9[_0x510a('0xd')]['map'](_0x12bb3a[_0x510a('0x349')],_0x211460=>_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x211460,_0x510a('0x341')));await _0x336bdb[_0x510a('0x50')][_0x510a('0x226')](_0x4050f9[_0x510a('0xd')]['map'](_0x4050f9[_0x510a('0xd')][_0x510a('0x34e')](_0x73e3c2,0x2),([_0x599173,_0x4fff70])=>this['transferToConference'](_0x47f740,_0x599173,_0x4fff70)));_0x12bb3a[_0x510a('0x33c')](interactionId,_0x47f740);return _0x12bb3a;}async[_0x510a('0x343')](_0x355a94,_0x43800b,_0x4facd0){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x34f')+_0x355a94+',\x20'+JSON[_0x510a('0x52')](_0x43800b)+',\x20'+_0x4facd0+')');const _0x3c9700=_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x355a94,_0x510a('0x350'));const _0x1618e8=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x19f')](_0x4facd0,_0x3c9700);await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1b6')](_0x43800b[_0x510a('0x351')],_0x1618e8,!![]);await this[_0x510a('0x352')](_0x43800b[_0x510a('0x344')],_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x355a94,_0x510a('0x341')));}['transferToConference'](_0x1f3b08,_0x3bf11c,_0x14df0d){_0x254353[_0x510a('0xd')]['debug'](_0x510a('0x353')+_0x1f3b08+',\x20'+_0x3bf11c+',\x20'+_0x14df0d+')');return this[_0x510a('0x354')]({'channel':_0x3bf11c,'context':'zulu-bridge','exten':_0x1f3b08,'extraChannel':_0x14df0d});}[_0x510a('0x1ba')](_0x32e2e7){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x355')+JSON[_0x510a('0x52')](_0x32e2e7)+')');return this['_BackendServer']['api'][_0x510a('0x1ba')](_0x32e2e7);}[_0x510a('0x356')](_0x38045e){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x357')+JSON[_0x510a('0x52')](_0x38045e)+')');let _0x56d576=null;if(_0x38045e[_0x510a('0x358')][_0x510a('0x359')]&&_0x38045e['variables'][_0x510a('0x35a')]&&_0x38045e['state'][_0x510a('0x91')]===_0x510a('0x35b')){_0x56d576=_0x4050f9[_0x510a('0xd')]['get'](_0x38045e,_0x510a('0x35c'));}else if(_0x38045e[_0x510a('0x20d')][_0x510a('0x91')]===_0x510a('0x35d')){_0x56d576=_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x38045e,_0x510a('0x35e'));}else{_0x56d576=_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x38045e,_0x510a('0x350'));}return _0x56d576;}['findCallerIdsForCall'](_0x36bd2d){return _0x4050f9[_0x510a('0xd')][_0x510a('0x21f')](_0x36bd2d[_0x510a('0x349')],_0x1753be=>this[_0x510a('0x356')](_0x1753be));}[_0x510a('0x336')](_0x53842c){const _0x17c2d1=(0x0,_0x4050f9['default'])(_0x53842c)['map'](_0x1c5123=>_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x1c5123,_0x510a('0x35f')))[_0x510a('0x21f')](_0x593405=>this[_0x510a('0x322')]['getCall'](_0x593405))[_0x510a('0x342')]();return _0x17c2d1;}[_0x510a('0x335')](_0x4fa4a2){const _0x10bed8=[];_0x4050f9[_0x510a('0xd')][_0x510a('0x360')](_0x4fa4a2,_0x59c825=>{const _0x12824e=this[_0x510a('0x321')][_0x59c825];if(!_0x12824e){throw new Error(_0x510a('0x361')+_0x59c825);}_0x10bed8['push'](_0x12824e);});return _0x10bed8;}['varsetfn'](_0x574137){let _0x330a0c=this[_0x510a('0x322')]['getCall'](_0x574137[_0x510a('0x2c2')]);if(!_0x330a0c){return;}let _0x4a16ca=_0x574137[_0x510a('0x342')];let _0x251409=Object[_0x510a('0x13b')](_0x574137[_0x510a('0x362')])[0x0];_0x251409=_0x251409[_0x510a('0x1fb')](/^_{1,2}/g,'');let _0x5e7be8=RegExp(/^ZULU_CALLVAR_(.*)/);if(_0x5e7be8[_0x510a('0xa8')](_0x251409)){var _0x20f490=_0x251409[_0x510a('0x363')](_0x5e7be8);_0x330a0c[_0x510a('0x364')](_0x20f490[0x1],_0x4a16ca);return;}let _0x34378f=_0x330a0c[_0x510a('0x365')](_0x574137['uniqueid']);if(_0x34378f){_0x34378f[_0x510a('0x364')](_0x251409,_0x4a16ca);const _0x1eb737=_0x574137['channel']['toLowerCase']();if(_0x251409===_0x510a('0x366')&&_0x4a16ca!==''&&!_0x1eb737[_0x510a('0x367')](_0x510a('0x368'))){this[_0x510a('0x321')][_0x4a16ca]=_0x34378f;}}}async['newchannelfn'](_0x5b0940){_0x254353[_0x510a('0xd')]['debug'](_0x510a('0x369')+JSON[_0x510a('0x52')](_0x5b0940)+')');if(_0x5b0940[_0x510a('0x91')]===_0x510a('0x36a')&&_0x5b0940['channelstate']===_0x100a93[_0x510a('0x36b')]){this[_0x510a('0x320')][_0x5b0940[_0x510a('0x2c1')]]=_0x5b0940[_0x510a('0x2c2')];}let _0x11eaee=![];let _0x36ed82=_0x5b0940['linkedid'];if(/^mobileans/[_0x510a('0xa8')](_0x5b0940['exten'])){let _0x45c1ee=_0x5b0940[_0x510a('0x282')][_0x510a('0x2b3')]('.')[0x0];_0x45c1ee=_0x45c1ee['replace'](_0x510a('0x36c'),'');const _0xca256e=this[_0x510a('0x31f')]['getBridgeMap'](_0x45c1ee);if(_0xca256e){_0x11eaee=!![];_0x36ed82=this[_0x510a('0x320')][_0xca256e[_0x510a('0x36d')]];delete this[_0x510a('0x320')][_0xca256e[_0x510a('0x36d')]];}}let _0x418048=this['CallCollection'][_0x510a('0x36e')](_0x36ed82);if(_0x418048){const _0x539ffe=_0x418048['createChannel'](_0x5b0940['uniqueid'],_0x5b0940);if(_0x11eaee===!![]){const _0x1b04a4=await this[_0x510a('0x36f')](_0x5b0940['calleridnum']);_0x539ffe[_0x510a('0x370')](_0x1b04a4);_0x418048[_0x510a('0x371')](_0x5b0940[_0x510a('0x2c1')]);_0x418048[_0x510a('0x372')](_0x418048[_0x510a('0x373')]());_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x5b0940[_0x510a('0x2c2')]+'/'+_0x5b0940[_0x510a('0x2c1')]+_0x510a('0x374')+_0x418048['getFromNum']()+'\x20was\x20answered\x20by\x20'+_0x418048[_0x510a('0x373')]()+'\x20('+_0x1b04a4+_0x510a('0x375'));_0x418048['setTimestamp']();_0x418048[_0x510a('0x376')](_0x5b0940[_0x510a('0x2c1')]);_0x418048['setAnsweredFlag']();this[_0x510a('0x377')](_0x36ed82,_0x510a('0x378'));this[_0x510a('0x379')](_0x418048,_0x418048[_0x510a('0x373')](),_0x510a('0x37a'));}return;}_0x418048=this[_0x510a('0x322')][_0x510a('0x37b')](_0x36ed82,'',_0x5b0940[_0x510a('0x282')],_0x5b0940[_0x510a('0x1ea')],'');_0x418048['createChannel'](_0x5b0940[_0x510a('0x2c1')],_0x5b0940);const _0x57e5d1=await this['lookupNumber'](_0x5b0940[_0x510a('0x1eb')]);_0x418048['setFromNum'](_0x57e5d1);const _0x2b8ee9=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x20a')](_0x5b0940[_0x510a('0x282')]);if(!_0x2b8ee9){_0x418048[_0x510a('0x37c')](_0x5b0940[_0x510a('0x282')]);}}[_0x510a('0x249')](_0x47e286){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x37d')+JSON[_0x510a('0x52')](_0x47e286));let _0x5d1103='';switch(_0x47e286[_0x510a('0x190')]){case _0x510a('0x37e'):_0x5d1103=this['CallCollection'][_0x510a('0x36e')](_0x47e286['linkedid']);if(!_0x5d1103){_0x254353[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x37f')+_0x47e286[_0x510a('0x2c2')]);return;}_0x5d1103['setFromName'](_0x47e286[_0x510a('0x1ea')]);if(_0x47e286[_0x510a('0x380')]!==_0x12324f[_0x510a('0x381')]){_0x5d1103[_0x510a('0x382')](_0x47e286[_0x510a('0x380')]['replace'](/\(.+\)$/,''));}break;case'zulu-call':_0x5d1103=this[_0x510a('0x322')]['getCall'](_0x47e286[_0x510a('0x2c2')]);if(!_0x5d1103){_0x254353[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x383')+_0x47e286[_0x510a('0x2c2')]);return;}_0x5d1103['setZuluVariable'](_0x47e286[_0x510a('0x384')],'type',_0x47e286[_0x510a('0xf7')]);_0x5d1103[_0x510a('0x385')](_0x47e286['extension'],'url',Buffer[_0x510a('0x1e9')](_0x47e286[_0x510a('0xa6')],_0x510a('0x269'))[_0x510a('0x114')]('ascii'));_0x5d1103[_0x510a('0x385')](_0x47e286[_0x510a('0x384')],_0x510a('0x386'),Buffer[_0x510a('0x1e9')](_0x47e286['cnam'],_0x510a('0x269'))[_0x510a('0x114')](_0x510a('0x387')));_0x5d1103[_0x510a('0x385')](_0x47e286['extension'],_0x510a('0x388'),_0x47e286[_0x510a('0x388')]);_0x5d1103[_0x510a('0x389')](_0x47e286['calleridname']);if(_0x47e286[_0x510a('0x380')]!==_0x12324f[_0x510a('0x381')]){_0x5d1103[_0x510a('0x382')](_0x47e286[_0x510a('0x380')][_0x510a('0x1fb')](/\(.+\)$/,''));}_0x5d1103['setFromNum'](_0x47e286['calleridnum']);this[_0x510a('0x377')](_0x47e286[_0x510a('0x2c2')],'RINGING');break;}}[_0x510a('0x324')](_0x23d93b){this[_0x510a('0x59')](_0x510a('0x65')+_0x23d93b[_0x510a('0x58')],_0x23d93b);}[_0x510a('0x326')](_0x24307e){_0x254353[_0x510a('0xd')][_0x510a('0x4a')]('blindTransferfn('+JSON[_0x510a('0x52')](_0x24307e));let _0x387682=this['CallCollection'][_0x510a('0x36e')](_0x24307e[_0x510a('0x38a')]);if(_0x387682){let _0x1303b6=_0x387682['getChannel'](_0x24307e[_0x510a('0x38b')]);if(!_0x1303b6){_0x254353['default'][_0x510a('0xd1')](_0x510a('0x38c')+_0x24307e[_0x510a('0x38b')]+_0x510a('0x38d'));return;}const _0x268728=_0x1303b6[_0x510a('0x38e')](_0x510a('0x366'));if(_0x268728!==''){delete this[_0x510a('0x321')][_0x268728];}this[_0x510a('0x38f')]((0x0,_0x45ff23['default'])(_0x387682),_0x24307e[_0x510a('0x38b')],_0x4b7b99[_0x510a('0x31a')]);try{_0x387682=this['CallCollection'][_0x510a('0x37b')](_0x24307e[_0x510a('0x38a')],_0x4050f9['default']['replace'](_0x24307e['transfereecalleridnum'],'+',''),_0x4050f9[_0x510a('0xd')][_0x510a('0x1fb')](_0x24307e[_0x510a('0x384')],'+',''),_0x24307e[_0x510a('0x390')],'');_0x387682['createChannel'](_0x24307e[_0x510a('0x391')],_0x1303b6[_0x510a('0x20d')]);}catch(_0x477a20){_0x254353[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x392'),_0x477a20);_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x24307e);}}}async[_0x510a('0x328')](_0x289b5d){_0x254353[_0x510a('0xd')][_0x510a('0x4a')]('attendedTransferfn('+JSON['stringify'](_0x289b5d));let _0x36d98a=this[_0x510a('0x322')][_0x510a('0x36e')](_0x289b5d[_0x510a('0x393')]);if(_0x36d98a){let _0x3b9801=_0x36d98a[_0x510a('0x365')](_0x289b5d[_0x510a('0x394')]);if(!_0x3b9801){_0x254353[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x38c')+_0x289b5d[_0x510a('0x394')]+_0x510a('0x38d'));return;}const _0x599d4c=_0x3b9801[_0x510a('0x38e')](_0x510a('0x366'));this['endCall']((0x0,_0x45ff23[_0x510a('0xd')])(_0x36d98a),_0x289b5d['origtransfereruniqueid'],_0x4b7b99[_0x510a('0x31a')]);const _0x1c6fcf=this[_0x510a('0x322')][_0x510a('0x36e')](_0x289b5d[_0x510a('0x395')]);if(_0x1c6fcf){const _0x3c393f=_0x1c6fcf[_0x510a('0x365')](_0x289b5d['transfertargetuniqueid']);if(_0x3c393f){const _0x447cb9=_0x3c393f['getVariable']('ZULU_ID');if(_0x447cb9!==''){delete this[_0x510a('0x321')][_0x447cb9];}}this['endCall'](_0x1c6fcf,_0x289b5d[_0x510a('0x396')],_0x4b7b99[_0x510a('0x31a')]);}try{const _0x490fb6=await this[_0x510a('0x36f')](_0x4050f9[_0x510a('0xd')][_0x510a('0x1fb')](_0x289b5d[_0x510a('0x397')],'+',''));_0x36d98a=this[_0x510a('0x322')][_0x510a('0x37b')](_0x289b5d[_0x510a('0x393')],_0x4050f9[_0x510a('0xd')]['replace'](_0x289b5d[_0x510a('0x398')],'+',''),_0x490fb6,_0x289b5d[_0x510a('0x390')],_0x289b5d[_0x510a('0x399')]);_0x3b9801=_0x36d98a[_0x510a('0x39a')](_0x289b5d[_0x510a('0x396')],_0x3b9801[_0x510a('0x20d')]);_0x3b9801[_0x510a('0x364')](_0x510a('0x366'),_0x599d4c);_0x3b9801['setExten'](_0x490fb6);_0x36d98a[_0x510a('0x371')](_0x289b5d[_0x510a('0x396')]);_0x36d98a[_0x510a('0x39b')]();_0x36d98a[_0x510a('0x39c')]();this['sendCallPresence'](_0x289b5d[_0x510a('0x393')],_0x510a('0x378'));this[_0x510a('0x379')](_0x36d98a,_0x36d98a[_0x510a('0x373')](),_0x510a('0x37a'));}catch(_0x50e465){_0x254353[_0x510a('0xd')]['error'](_0x510a('0x39d'),_0x50e465);_0x254353['default']['debug'](_0x289b5d);}}}['setdialfn'](_0x542fbf){_0x254353['default'][_0x510a('0x4a')](_0x510a('0x39e')+JSON[_0x510a('0x52')](_0x542fbf));let _0x5b5840=this[_0x510a('0x322')][_0x510a('0x36e')](_0x542fbf['linkedid']);if(!_0x5b5840){return;}_0x5b5840[_0x510a('0x39f')](!![]);if(_0x542fbf[_0x510a('0x91')]===_0x510a('0x35d')){_0x254353['default'][_0x510a('0x4a')](_0x510a('0x3a0')+_0x542fbf[_0x510a('0x3a1')]+'\x20from\x20'+_0x5b5840[_0x510a('0x3a2')]());_0x5b5840[_0x510a('0x3a3')](_0x542fbf['destuniqueid']);_0x5b5840[_0x510a('0x258')]=!![];}else{if(!this[_0x510a('0x31e')][_0x510a('0xa8')](_0x542fbf[_0x510a('0x3a4')])){_0x254353[_0x510a('0xd')]['warn'](_0x510a('0x3a5')+_0x542fbf[_0x510a('0x3a4')]+_0x510a('0x3a6'));return;}let _0x2ac7af=_0x542fbf['destchannel'][_0x510a('0x363')](this[_0x510a('0x31e')])[0x1]['toLowerCase']();if(_0x2ac7af==='local'){return;}let _0xcc6483=_0x5b5840[_0x510a('0x365')](_0x542fbf[_0x510a('0x3a7')]);if(!_0xcc6483){_0x254353['default'][_0x510a('0xd1')](_0x510a('0x38c')+_0x542fbf['destuniqueid']+'\x20does\x20not\x20exist!');return;}let _0x3ae062=_0xcc6483['getExten']();if(!_0x3ae062){_0x254353[_0x510a('0xd')][_0x510a('0xd1')]('Unable\x20to\x20parse\x20'+_0x542fbf[_0x510a('0x3a4')]+'['+_0x542fbf[_0x510a('0x3a7')]+_0x510a('0x3a8'));return;}_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3a0')+_0x3ae062+_0x510a('0xd0')+_0x5b5840[_0x510a('0x3a2')]());this[_0x510a('0x379')](_0x5b5840,_0x3ae062,'inbound');_0x5b5840[_0x510a('0x3a3')](_0x542fbf[_0x510a('0x3a7')]);}}async['newstatefn'](_0x5f5033){_0x254353[_0x510a('0xd')][_0x510a('0x4a')]('newstatefn('+JSON['stringify'](_0x5f5033));let _0x3cfe56=this[_0x510a('0x322')][_0x510a('0x36e')](_0x5f5033[_0x510a('0x2c2')]);if(!_0x3cfe56){_0x254353[_0x510a('0xd')][_0x510a('0xd1')]('Unable\x20to\x20find\x20call\x20'+_0x5f5033['linkedid']);return;}let _0xcd8e4e=_0x3cfe56[_0x510a('0x365')](_0x5f5033[_0x510a('0x2c1')]);if(!_0xcd8e4e){_0x254353[_0x510a('0xd')]['warn']('Unable\x20to\x20find\x20channel\x20'+_0x5f5033[_0x510a('0x2c2')]+'/'+_0x5f5033['uniqueid']);return;}_0xcd8e4e['setState'](_0x5f5033);_0x254353['default'][_0x510a('0x4a')](_0x510a('0x3a9')+_0x5f5033[_0x510a('0x2c2')]+'/'+_0x5f5033['uniqueid']+_0x510a('0x3aa')+(_0x5f5033[_0x510a('0x3ab')]===_0x100a93['UP'])+_0x510a('0x3ac')+_0x3cfe56['isDialing']()+_0x510a('0x3ad')+_0x5f5033[_0x510a('0x2c1')]+')='+_0x3cfe56[_0x510a('0x3ae')](_0x5f5033['uniqueid']));if(_0x5f5033[_0x510a('0x3ab')]===_0x100a93['UP']){if(_0x3cfe56[_0x510a('0x3af')]()&&_0x3cfe56['inDialing'](_0x5f5033[_0x510a('0x2c1')])){let _0x34252a;let _0x58ee15=_0x5f5033[_0x510a('0x282')];if(_0x5f5033[_0x510a('0x91')]!==_0x510a('0x35b')){if(!this[_0x510a('0x31e')][_0x510a('0xa8')](_0x5f5033[_0x510a('0x268')])){_0x254353['default'][_0x510a('0xd1')]('Unable\x20to\x20parse\x20'+_0x5f5033[_0x510a('0x268')]+'\x20for\x20channel\x20tracking!');_0x34252a=null;}else{_0x34252a=_0x5f5033[_0x510a('0x268')]['match'](this[_0x510a('0x31e')]);}if(_0x34252a!==null){_0x58ee15=_0x34252a[0x2];}}let _0x4fab8a=_0xcd8e4e[_0x510a('0x3b0')]();if(_0x4fab8a&&_0x5f5033[_0x510a('0x91')]!=='from-pstn'){const _0x36d7e8=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x20a')](_0x4fab8a);if(!_0x36d7e8){_0x3cfe56[_0x510a('0x37c')](_0x4fab8a);return;}_0x3cfe56[_0x510a('0x371')](_0x5f5033[_0x510a('0x2c1')]);_0x3cfe56[_0x510a('0x372')](_0x3cfe56[_0x510a('0x373')]());_0x254353['default']['debug'](_0x5f5033['linkedid']+'/'+_0x5f5033['uniqueid']+_0x510a('0x374')+_0x3cfe56[_0x510a('0x3a2')]()+_0x510a('0x3b1')+_0x3cfe56[_0x510a('0x373')]());_0x3cfe56[_0x510a('0x39b')]();_0x3cfe56[_0x510a('0x376')](_0x5f5033[_0x510a('0x2c1')]);_0x3cfe56[_0x510a('0x39c')]();this[_0x510a('0x377')](_0x5f5033[_0x510a('0x2c2')],'INCALL');this[_0x510a('0x379')](_0x3cfe56,_0x3cfe56['getAnsweree'](),'answered');}else if(_0x3cfe56[_0x510a('0x258')]){_0xcd8e4e['setExten'](_0x58ee15);_0x3cfe56[_0x510a('0x371')](_0x5f5033[_0x510a('0x2c1')]);_0x3cfe56[_0x510a('0x372')](_0x3cfe56[_0x510a('0x373')]());_0x254353[_0x510a('0xd')]['debug'](_0x510a('0x3b2')+_0x3cfe56[_0x510a('0x3a2')]()+'\x20was\x20answered\x20by\x20'+_0x3cfe56[_0x510a('0x373')]());_0x3cfe56[_0x510a('0x39b')]();_0x3cfe56['removeDialing'](_0x5f5033[_0x510a('0x2c1')]);_0x3cfe56[_0x510a('0x39c')]();this['sendCallPresence'](_0x5f5033[_0x510a('0x2c2')],_0x510a('0x378'));}}else if(!_0x3cfe56[_0x510a('0x3af')]()&&_0x5f5033[_0x510a('0x282')]!==_0x12324f[_0x510a('0x318')]){const _0x1db966=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x20a')](_0x5f5033[_0x510a('0x282')]);if(!_0x1db966){_0x3cfe56[_0x510a('0x37c')](_0x5f5033[_0x510a('0x282')]);return;}_0x3cfe56['setToNum'](_0x5f5033[_0x510a('0x282')]);_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3b2')+_0x3cfe56[_0x510a('0x3a2')]()+_0x510a('0x3b1')+_0x3cfe56[_0x510a('0x209')]());_0x3cfe56[_0x510a('0x371')](_0x5f5033[_0x510a('0x2c1')]);_0x3cfe56[_0x510a('0x39b')]();_0x3cfe56[_0x510a('0x39c')]();this[_0x510a('0x377')](_0x5f5033[_0x510a('0x2c2')],_0x510a('0x378'));this[_0x510a('0x379')](_0x3cfe56,_0x5f5033['exten'],_0x510a('0x37a'));}}else if(_0x5f5033[_0x510a('0x3ab')]===_0x100a93[_0x510a('0x210')]&&_0x5f5033[_0x510a('0x1eb')]!==''&&_0x5f5033[_0x510a('0x1eb')]!==_0x12324f[_0x510a('0x381')]){const _0x21bddd=await this[_0x510a('0x36f')](_0x5f5033[_0x510a('0x1eb')]);_0x3cfe56[_0x510a('0x3b3')](_0x21bddd);}}['hangupfn'](_0x2f9735){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3b4')+JSON[_0x510a('0x52')](_0x2f9735));let _0x5ede8c=_0x2f9735[_0x510a('0x2c2')];let _0x2b0547=this[_0x510a('0x322')][_0x510a('0x36e')](_0x5ede8c);let _0x136509;if(!_0x2b0547){return;}if(!this['channelPattern'][_0x510a('0xa8')](_0x2f9735[_0x510a('0x268')])){_0x254353[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x3a5')+_0x2f9735[_0x510a('0x268')]+_0x510a('0x3a6'));_0x136509=null;}else{_0x136509=_0x2f9735['channel'][_0x510a('0x363')](this[_0x510a('0x31e')]);}let _0x4065af='';if(_0x136509!==null){_0x4065af=_0x136509[0x2];}else{_0x4065af=_0x2f9735[_0x510a('0x1eb')];}if(_0x2b0547[_0x510a('0x3ae')](_0x2f9735[_0x510a('0x2c1')])){_0x2b0547['removeDialing'](_0x2f9735[_0x510a('0x2c1')]);}const _0x1c7df0=_0x2b0547[_0x510a('0x365')](_0x2f9735[_0x510a('0x2c1')]);if(!_0x1c7df0){return;}const _0x5d70e0=_0x2f9735[_0x510a('0x268')]['toLowerCase']();if(!_0x5d70e0[_0x510a('0x367')](_0x510a('0x368'))){const _0x573541=_0x1c7df0['getVariable'](_0x510a('0x366'));if(_0x573541!==''){delete this[_0x510a('0x321')][_0x573541];}}let _0x5f1843=_0x1c7df0['getExten']();if(_0x2b0547[_0x510a('0x3b5')](_0x2f9735[_0x510a('0x2c1')])){this['triggerZuluNotification'](_0x2b0547,_0x5f1843,_0x510a('0x32c'));}if(_0x2b0547['clearChannel'](_0x2f9735[_0x510a('0x2c1')])&&_0x2b0547['channelCount']()===0x0){this['channelMap']=_0x4050f9[_0x510a('0xd')][_0x510a('0x3b6')](this[_0x510a('0x320')],_0x3e220f=>_0x3e220f!==_0x5ede8c);if(!_0x2b0547[_0x510a('0x3b7')]()){this[_0x510a('0x379')](_0x2b0547,_0x5f1843,_0x510a('0x3b8'));}this[_0x510a('0x38f')](_0x2b0547,_0x2f9735['uniqueid']);}}[_0x510a('0x379')](_0x2e1c60,_0x120f68,_0x574258){if(!_0x120f68){return;}const _0x562d45=_0x2e1c60[_0x510a('0x3b9')]();let _0x20044b=_0x2e1c60['getAllZuluVariables'](_0x120f68);if(!_0x20044b){_0x254353[_0x510a('0xd')][_0x510a('0xd1')]('Rejecting\x20call\x20notification\x20to\x20client\x20as\x20no\x20variables\x20were\x20set\x20for\x20the\x20notification\x20to\x20'+_0x120f68);return;}if(_0x2e1c60[_0x510a('0x3ba')](_0x120f68,_0x574258)){_0x254353[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x3bb'));return;}_0x2e1c60[_0x510a('0x3bc')](_0x120f68,_0x574258);var _0x53e3e2={'action':_0x574258,'callid':_0x562d45,'from':{'calleridname':_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x20044b,_0x510a('0x386'),''),'calleridnum':_0x4050f9['default'][_0x510a('0x180')](_0x20044b,_0x510a('0x388'),'')},'application':_0x4050f9['default'][_0x510a('0x180')](_0x20044b,'type',''),'callpop':{'type':typeof _0x20044b['type']!==_0x510a('0x26c')?_0x20044b[_0x510a('0xf7')]:'','url':typeof _0x20044b[_0x510a('0xa6')]!==_0x510a('0x26c')&&_0x20044b[_0x510a('0xa6')]!==''?encodeURIComponent(_0x20044b[_0x510a('0xa6')][_0x510a('0x1fb')]('\x5c?','?')):''},'to':_0x120f68,'image':{'image':'','mime':''}};this[_0x510a('0x59')](_0x510a('0x3'),_0x53e3e2);}['endCall'](_0x5cc9aa,_0x4fdb9f,_0x2b8e16=_0x4b7b99[_0x510a('0x319')]){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3bd')+_0x4fdb9f+')');if(_0x5cc9aa[_0x510a('0x38e')](_0x510a('0x3be'))===_0x510a('0x1ff')){_0x5cc9aa[_0x510a('0x389')](_0x5cc9aa['getVariable'](_0x510a('0x3bf')));_0x5cc9aa[_0x510a('0x382')](_0x5cc9aa['getVariable'](_0x510a('0x3c0')));_0x5cc9aa[_0x510a('0x372')](_0x5cc9aa[_0x510a('0x38e')](_0x510a('0x3c1')));_0x5cc9aa[_0x510a('0x3c2')](_0x5cc9aa['getVariable'](_0x510a('0x3c3')));if(_0x5cc9aa[_0x510a('0x38e')](_0x510a('0x3c4'))==='true'){_0x5cc9aa[_0x510a('0x3c5')]();}}_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3c6'),_0x5cc9aa);const _0x4a907d=_0x5cc9aa['getRingingExtensions']();if(_0x5cc9aa[_0x510a('0x3b7')]()){_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3c7')+_0x5cc9aa[_0x510a('0x212')]()+'\x20('+_0x5cc9aa[_0x510a('0x3a2')]()+')\x20to\x20'+_0x5cc9aa['getToNum']()+_0x510a('0x3c8')+_0x5cc9aa['getDuration']()+_0x510a('0x3c9'));this[_0x510a('0x3ca')](_0x5cc9aa[_0x510a('0x209')](),_0x2b8e16,_0x5cc9aa,_0x4fdb9f)[_0x510a('0x13')](_0x5581e6=>{_0x254353[_0x510a('0xd')]['error'](_0x510a('0x3cb'),_0x5581e6);});if(_0x4a907d[_0x510a('0x13c')]>0x1){_0x4050f9[_0x510a('0xd')][_0x510a('0x21f')](_0x4a907d,_0x2f77b2=>{if(_0x2f77b2!==_0x5cc9aa[_0x510a('0x209')]()){this['prepareCallInteraction'](_0x2f77b2,_0x4b7b99[_0x510a('0x318')],_0x5cc9aa,_0x4fdb9f,!![],_0x5cc9aa[_0x510a('0x209')]())[_0x510a('0x13')](_0x30eb5d=>{_0x254353[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20preparing\x20call\x20interaction\x20for\x20unanswered\x20call',_0x30eb5d);});}});}}else{_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3c7')+_0x5cc9aa[_0x510a('0x212')]()+'\x20('+_0x5cc9aa[_0x510a('0x3a2')]()+_0x510a('0x3cc')+_0x5cc9aa[_0x510a('0x209')]());const _0x4a2ff2=_0x4a907d[_0x510a('0x13c')]>0x1?!![]:![];const _0x39018b=_0x4a907d[_0x510a('0x13c')]>0x0?_0x4a907d:[_0x5cc9aa[_0x510a('0x209')]()];_0x4050f9[_0x510a('0xd')]['map'](_0x39018b,_0x386ea1=>{if(_0x386ea1!==_0x5cc9aa['getAnsweredApp']()){this[_0x510a('0x3ca')](_0x386ea1,_0x4b7b99[_0x510a('0x318')],_0x5cc9aa,_0x4fdb9f,_0x4a2ff2)['catch'](_0x175ae6=>{_0x254353[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x3cd'),_0x175ae6);});}});if(_0x4a2ff2&&!_0x4050f9['default'][_0x510a('0x1ee')](_0x5cc9aa[_0x510a('0x3ce')]())){this[_0x510a('0x3ca')](_0x5cc9aa['getAnsweredApp'](),_0x4b7b99[_0x510a('0x318')],_0x5cc9aa,_0x4fdb9f)[_0x510a('0x13')](_0x53f61c=>{_0x254353[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x3cd'),_0x53f61c);});}}this[_0x510a('0x377')](_0x5cc9aa[_0x510a('0x3cf')](),_0x510a('0x20b'));this['CallCollection']['clearCall'](_0x5cc9aa[_0x510a('0x3cf')]());}async[_0x510a('0x3d0')](_0x185487,_0x4bd9d4,_0xe77949,_0x579d79,_0x491225,_0x4eb82c,_0x4234a0,_0x3d1297,_0x2c85ca){let _0x368103=_0x364fd1[_0x510a('0xd')]['now']()-_0x491225;let _0xd0ac8c=![];let _0x1ba9dc=_0x579d79;let _0x2e1c1f=_0xe77949;if(_0x4eb82c===_0x12324f['OUTGOING']){_0x1ba9dc=_0xe77949;_0x2e1c1f=_0x579d79;}if(_0x185487[_0x1ba9dc]){if(_0x4bd9d4!==_0x4b7b99[_0x510a('0x318')]){let _0x5580e7=await this[_0x510a('0x1d4')]['api'][_0x510a('0x311')](_0x3d1297);if(!_0x5580e7&&_0x3d1297!==_0x4234a0){_0x5580e7=await this[_0x510a('0x1d4')]['api']['getRecordingFile'](_0x4234a0);}_0xd0ac8c=!!_0x5580e7;}const _0x9ddbe5=await this[_0x510a('0x1d4')][_0x510a('0xad')]['getContactIDsByCallerID'](_0x185487[_0x1ba9dc][_0x510a('0x112')],[_0xe77949,_0x579d79]);const _0xcd0e85={'id':_0x3d1297,'state':_0x4bd9d4,'duration':_0x491225,'direction':_0x4eb82c,'linkedid':_0x4234a0,'recording':_0xd0ac8c,'number':_0x2e1c1f};if(!_0x4050f9['default'][_0x510a('0x1ee')](_0x2c85ca)){_0xcd0e85[_0x510a('0x3d1')]=_0x2c85ca;}return this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1ad')](_0x185487[_0x1ba9dc]['interaction'],_0x185487[_0x1ba9dc][_0x510a('0x112')],_0x9ddbe5[_0x2e1c1f],'CALL',_0xcd0e85,null,null,_0x368103,null,_0x185487[_0x1ba9dc][_0x510a('0x3d2')]);}}[_0x510a('0x3ca')](_0x34fc91,_0x4de57b,_0x270d14,_0x4fac87,_0x1bb94e=![],_0x3018b4=null){if(_0x270d14[_0x510a('0x3d3')](_0x34fc91)){_0x254353['default'][_0x510a('0xd1')](_0x510a('0x3d4'));return _0x336bdb[_0x510a('0x50')][_0x510a('0x6')]();}_0x270d14['setStreamed'](_0x34fc91);if(_0x270d14[_0x510a('0x38e')](_0x510a('0x3d5'))===_0x510a('0x1ff')){_0x254353['default']['warn'](_0x510a('0x3d6'));return _0x336bdb['Promise'][_0x510a('0x6')]();}const _0x5d8cb8=(0x0,_0x45ff23[_0x510a('0xd')])(_0x270d14);return this[_0x510a('0x3d7')](_0x34fc91,_0x5d8cb8['getFromNum'](),_0x4de57b,_0x5d8cb8,_0x4fac87,_0x1bb94e,_0x3018b4);}async[_0x510a('0x3d7')](_0x23e570,_0x23488f,_0x2639b2,_0x34cfdd,_0x5d3cff,_0x220221,_0x8bb99e){const _0x2bbced=_0x2639b2!==_0x4b7b99[_0x510a('0x318')]?_0x34cfdd['getDuration']():0x0;const _0x370875=_0x34cfdd[_0x510a('0x3b9')]();const _0x4c096b=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1a9')]([{'name':_0x34cfdd[_0x510a('0x212')](),'number':_0x23488f},{'name':'','number':_0x23e570}]);if(!_0x4c096b){return;}const _0x2aad17=_0x4c096b[_0x23488f]?_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x4c096b,[_0x23488f,_0x510a('0x2c3')]):_0x4050f9[_0x510a('0xd')][_0x510a('0x180')](_0x4c096b,[_0x23e570,'interaction']);if(!_0x2aad17){return;}if(_0x2639b2===_0x4b7b99[_0x510a('0x318')]){await this[_0x510a('0x1d4')]['mobileNotificationsAPI'][_0x510a('0x1c5')](_0x23e570,_0x23488f,_0x34cfdd['getFromName'](),_0x2aad17);}if(!_0x220221){await this[_0x510a('0x3d0')](_0x4c096b,_0x2639b2,_0x23488f,_0x23e570,_0x2bbced,_0x12324f[_0x510a('0x3d8')],_0x370875,_0x5d3cff,_0x8bb99e);}await this[_0x510a('0x3d0')](_0x4c096b,_0x2639b2,_0x23488f,_0x23e570,_0x2bbced,_0x12324f['INCOMING'],_0x370875,_0x5d3cff,_0x8bb99e);}async[_0x510a('0x36f')](_0x46f607){_0x254353['default']['debug'](_0x510a('0x3d9')+_0x46f607+')');try{const _0x523faa=await this[_0x510a('0x1d2')][_0x510a('0x63')]('DEVICE',_0x46f607+'/user');_0x254353[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x3da')+_0x46f607+_0x510a('0x3db')+_0x523faa);return _0x523faa;}catch(_0x3c6908){_0x254353[_0x510a('0xd')][_0x510a('0x4a')]('Found\x20true\x20exten\x20of\x20\x27'+_0x46f607+_0x510a('0x3db')+_0x46f607);return _0x46f607;}}[_0x510a('0x377')](_0xeca248,_0x3a2169){_0x254353['default'][_0x510a('0x4a')]('sendCallPresence('+_0xeca248+',\x20'+_0x3a2169+')');const _0xbc3b8c=this[_0x510a('0x322')]['getCall'](_0xeca248);let _0x236bba;if(_0xbc3b8c){_0x236bba=(0x0,_0x45ff23[_0x510a('0xd')])(_0xbc3b8c);}else{_0x236bba=null;}const _0x7ba8cb={'call':_0x236bba,'state':_0x3a2169};this['emit'](_0x510a('0x1e4'),_0x7ba8cb);}['amiRedirect']({channel,context,exten,priority='1',extraChannel=null,extraContext=context,extraExten=exten,extraPriority=priority}){if(!channel||!context||!exten){return _0x336bdb['Promise']['reject'](new TypeError(_0x510a('0x3dc')));}const _0x72f7fe={'action':_0x510a('0x3dd'),'channel':channel,'context':context,'exten':exten,'priority':priority};if(extraChannel){_0x4050f9['default'][_0x510a('0x333')](_0x72f7fe,{'extraChannel':extraChannel,'extraContext':extraContext,'extraExten':extraExten,'extraPriority':extraPriority});}return this[_0x510a('0x1d2')][_0x510a('0x61')](_0x72f7fe);}['findChannelByZuluId'](_0x235d0b){return _0x4050f9[_0x510a('0xd')][_0x510a('0x180')](this['zuluIDMap'],[_0x235d0b],null);}}_0x3dfaf8[_0x510a('0x1e2')]=CallManager;return _0x15b996[_0x510a('0x4')];};_0x5e4b0d[0x1f]=function(_0x827c34,_0x433ae5){'use strict';Object['defineProperty'](_0x433ae5,_0x510a('0x16'),{'value':!![]});_0x433ae5[_0x510a('0x3de')]=undefined;var _0x3e2334=require('lodash');var _0x271ae4=_0x372390(_0x3e2334);var _0x70939f=require(_0x510a('0x1d1'));var _0x410d9a=_0x372390(_0x70939f);var _0x11e923=require(_0x510a('0x3df'));var _0x469b48=_0x372390(_0x11e923);var _0x291f0c=require(_0x510a('0x79'));var _0x23edf1=_0x372390(_0x291f0c);var _0x170d17=require('uuid/v4');var _0x216d4d=_0x372390(_0x170d17);var _0x46f93e=require(_0x510a('0x106'));var _0x13bf06=require(_0x510a('0x19'));var _0x1eb426=_0x59c414(0x4,0x1f);var _0x16be60=_0x372390(_0x1eb426);var _0x5909ed=_0x59c414(0x27,0x1f);function _0x372390(_0xee4e6e){return _0xee4e6e&&_0xee4e6e[_0x510a('0x16')]?_0xee4e6e:{'default':_0xee4e6e};}_0x23edf1['default'][_0x510a('0x7b')]=!![];const _0x4751f5={'IOS_VOIP':'1','ANDROID':'2','IOS_NOTIFY':'3','IOS_VOIP_DEVELOPMENT':'4','IOS_NOTIFY_DEVELOPMENT':'5'};class CallProcessing extends _0x46f93e[_0x510a('0x1c')]{constructor(_0x26cd3f,_0x1d2032,_0x569e11,_0x2f782d,_0x134630=![]){super();this[_0x510a('0x1d2')]=_0x26cd3f;this[_0x510a('0x1d4')]=_0x569e11;this[_0x510a('0x31f')]=_0x2f782d;this[_0x510a('0x1d3')]=_0x1d2032;this['mobilePrefix']=_0x510a('0x36c');this[_0x510a('0x3e0')]={};this[_0x510a('0x1d2')]['astmanAddListener'](_0x510a('0x3e1'),_0x3885b9=>{this[_0x510a('0x59')](_0x510a('0x3e2')+_0x3885b9[_0x510a('0x58')],_0x3885b9);});this[_0x510a('0x1d2')][_0x510a('0x5c')](_0x510a('0x3e3'),_0x54ddf9=>{this[_0x510a('0x59')](_0x510a('0x3e4')+_0x54ddf9[_0x510a('0x58')],_0x54ddf9);});this['_Zulu'][_0x510a('0x5c')](_0x510a('0x3e5'),_0x155c42=>{this[_0x510a('0x59')](_0x510a('0x3e6')+_0x155c42[_0x510a('0x3e7')],_0x155c42);});this[_0x510a('0x1d4')]['on']('ws::message::getMobileCall',this[_0x510a('0x3e8')]['bind'](this));if(!_0x134630){_0x13bf06[_0x510a('0x50')][_0x510a('0x226')]([this['_Zulu'][_0x510a('0x55')](_0x510a('0x3e9')),this[_0x510a('0x1d2')][_0x510a('0x55')]('FPBX_ARI_USER'),this[_0x510a('0x1d2')][_0x510a('0x55')](_0x510a('0x3ea'))])[_0x510a('0x10')](_0x499d7b=>{const _0x26017a=_0x499d7b[0x0];const _0x132875=_0x499d7b[0x1];const _0x322df2=_0x499d7b[0x2];this[_0x510a('0x3eb')](_0x26017a,_0x132875,_0x322df2);this[_0x510a('0x3ec')](_0x26017a,_0x132875,_0x322df2);this[_0x510a('0x3ed')](_0x26017a,_0x132875,_0x322df2);});}}[_0x510a('0x3eb')](_0x1c1282,_0x1d3ed6,_0x4ddec3){return new _0x13bf06[(_0x510a('0x50'))]((_0x1fb65f,_0x4394f0)=>{_0x469b48['default'][_0x510a('0x34')]('http://127.0.0.1:'+_0x1c1282,_0x1d3ed6,_0x4ddec3)[_0x510a('0x10')](_0x342e5e=>{_0x342e5e['start'](_0x510a('0x3ee'));_0x342e5e['on']('StasisStart',(_0x53ec48,_0x5f22ad)=>{this[_0x510a('0x3ef')](_0x342e5e,_0x53ec48,_0x5f22ad)[_0x510a('0x13')](_0x9d3be1=>{_0x16be60['default'][_0x510a('0x2b')](_0x510a('0x3f0'),_0x9d3be1);});});_0x342e5e['on'](_0x510a('0x3f1'),(_0x3d6ba7,_0xe4bfd6)=>{});_0x1fb65f();})[_0x510a('0x13')](_0x3318f=>{_0x16be60[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x3f2'),_0x3318f);_0x4394f0(_0x3318f);});});}[_0x510a('0x3ec')](_0x4ed95b,_0x296164,_0x20f471){return new _0x13bf06[(_0x510a('0x50'))]((_0x1efb62,_0x224c20)=>{_0x469b48[_0x510a('0xd')]['connect'](_0x510a('0x3f3')+_0x4ed95b,_0x296164,_0x20f471)[_0x510a('0x10')](_0x3febc7=>{_0x3febc7[_0x510a('0x3f4')](_0x510a('0x3f5'));_0x3febc7['on'](_0x510a('0x3f6'),(_0x36372f,_0x5e4a0a)=>{this['mobilePushProcessing'](_0x3febc7,_0x36372f,_0x5e4a0a)[_0x510a('0x13')](_0x553c0a=>{_0x16be60[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x3f7'),_0x553c0a);});});_0x3febc7['on'](_0x510a('0x3f1'),(_0x5c88c8,_0x39e9c3)=>{_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x38c')+_0x39e9c3['id']+_0x510a('0x3f8'));this[_0x510a('0x3f9')](_0x3febc7,_0x5c88c8,_0x39e9c3)[_0x510a('0x13')](_0x5ed6c7=>{_0x16be60[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20finishing\x20mobile\x20call\x20(push)',_0x5ed6c7);});});return _0x1efb62();})[_0x510a('0x13')](_0x1fc6f9=>{_0x16be60[_0x510a('0xd')]['error'](_0x510a('0x3fa'),_0x1fc6f9);return _0x224c20(_0x1fc6f9);});});}[_0x510a('0x3ed')](_0x5a7da3,_0x517569,_0x4177ba){return new _0x13bf06[(_0x510a('0x50'))]((_0x1cefae,_0x57b4e8)=>{_0x469b48[_0x510a('0xd')]['connect'](_0x510a('0x3f3')+_0x5a7da3,_0x517569,_0x4177ba)[_0x510a('0x10')](_0x4e01d8=>{_0x4e01d8[_0x510a('0x3f4')]('zulu-mobile-call-answer-processing');_0x4e01d8['on']('StasisStart',(_0x152f89,_0x46dbd8)=>{this[_0x510a('0x3fb')](_0x4e01d8,_0x152f89,_0x46dbd8)[_0x510a('0x13')](_0x58bf77=>{_0x16be60[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x3fc'),_0x58bf77);});});_0x4e01d8['on']('StasisEnd',(_0x5480fe,_0x3a0b63)=>{_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x38c')+_0x3a0b63['id']+_0x510a('0x3fd'));this[_0x510a('0x3f9')](_0x4e01d8,_0x5480fe,_0x3a0b63)[_0x510a('0x13')](_0x46dfff=>{_0x16be60['default'][_0x510a('0x2b')](_0x510a('0x3fe'),_0x46dfff);});});return _0x1cefae();})[_0x510a('0x13')](_0x40a20a=>{_0x16be60['default'][_0x510a('0x2b')](_0x510a('0x3ff'),_0x40a20a);return _0x57b4e8(_0x40a20a);});});}[_0x510a('0x400')](_0x846d10){_0x846d10=_0x271ae4[_0x510a('0xd')][_0x510a('0x1fb')](_0x846d10,new RegExp('^'+this[_0x510a('0x401')]),'');const [_0x53a60e,_0x5edfff]=_0x271ae4[_0x510a('0xd')][_0x510a('0x2b3')](_0x846d10,'.');return{'bridgeid':_0x53a60e,'identifier':_0x5edfff};}async[_0x510a('0x402')](_0x5e15a7,_0x2df348,_0x5136e1,_0x2aa172){let _0x256f6f=this['_ClientServer'][_0x510a('0xa2')]();_0x410d9a[_0x510a('0xd')][_0x510a('0x214')](_0x256f6f,async(_0x5a4e84,_0x4acdae)=>{if(_0x271ae4[_0x510a('0xd')][_0x510a('0x180')](_0x5a4e84,_0x510a('0x403'))===_0x5e15a7){_0x5a4e84[_0x510a('0xe7')]({'action':_0x510a('0x404'),'data':{'to':_0x5e15a7,'callbackURI':_0x2df348,'interactionId':_0x2aa172}});await this[_0x510a('0x1d4')][_0x510a('0x2c5')][_0x510a('0x1c6')](_0x5e15a7,_0x2df348,_0x5136e1,_0x2aa172);}_0x4acdae();});}async[_0x510a('0x3fb')](_0x19cd6c,_0x3a7690,_0x3735e0){if(_0x3735e0['id']){_0x16be60['default'][_0x510a('0x4a')]('Channel\x20'+_0x3735e0['id']+_0x510a('0x405'));const _0xd24007=_0x3a7690[_0x510a('0x406')][0x0]!==''?_0x3a7690[_0x510a('0x406')][0x0]:0x1e;const _0x212061=_0x3a7690[_0x510a('0x406')][0x1];const {bridgeid,identifier}=this[_0x510a('0x400')](_0x3a7690['args'][0x2]);await this[_0x510a('0x31f')][_0x510a('0x407')](_0x19cd6c,bridgeid,_0x3735e0['id'],_0xd24007,_0x212061);const _0x32e852=this['_ZuluBridge'][_0x510a('0x408')](bridgeid);const _0x25af97=_0x271ae4['default'][_0x510a('0x180')](this['tokenMap'],[bridgeid,identifier,_0x510a('0xde')],null);await _0x13bf06[_0x510a('0x50')][_0x510a('0x226')](_0x271ae4['default'][_0x510a('0x21f')](this[_0x510a('0x3e0')][bridgeid],async _0x344c4a=>{if(_0x344c4a[_0x510a('0xde')]!==_0x25af97&&!_0x271ae4['default'][_0x510a('0x1ee')](_0x344c4a['notifyToken'])){const _0x4701b6={};_0x4701b6[_0x344c4a[_0x510a('0x409')]]=[_0x344c4a[_0x510a('0x40a')]];await this[_0x510a('0x402')](_0x32e852['to'],_0x344c4a[_0x510a('0x40b')],_0x4701b6,_0x344c4a['interactionId']);}}));}else if(_0x3735e0['channel']&&_0x3735e0[_0x510a('0x40c')]){const _0x480f0e=_0x3735e0[_0x510a('0x268')]['id'];const _0x156010=_0x3735e0[_0x510a('0x40c')]['id'];_0x16be60['default']['debug'](_0x510a('0x38c')+_0x480f0e+_0x510a('0x40d')+_0x156010);const _0x1eff64=this[_0x510a('0x31f')][_0x510a('0x40e')](_0x156010);if(!_0x1eff64){_0x16be60[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x40f')+_0x156010);await this[_0x510a('0x31f')][_0x510a('0x410')](_0x19cd6c,_0x480f0e,_0x510a('0x411'));return;}const _0x3e4864=_0x271ae4[_0x510a('0xd')]['clone'](_0x1eff64);this['_ZuluBridge'][_0x510a('0x412')](_0x1eff64,_0x156010);await this[_0x510a('0x31f')][_0x510a('0x413')](_0x19cd6c,_0x1eff64,_0x480f0e);}}async[_0x510a('0x414')](_0x637607,_0x36d208,_0x1cee00){_0x16be60['default'][_0x510a('0x4a')]('Channel\x20'+_0x1cee00['id']+'\x20entering\x20to\x20stasis\x20zulu-mobile-call-push-processing');const _0x222124=_0x36d208[_0x510a('0x406')][0x0];const _0x1907a1=_0x36d208['args'][0x1]!==''?_0x36d208[_0x510a('0x406')][0x1]:0x5a;const _0x3cb8a6=new RegExp('^'+_0x1907a1);const _0x3368e8=new _0x5909ed[(_0x510a('0x415'))](_0x637607,_0x1cee00);let _0x2be80e=await _0x3368e8[_0x510a('0x416')](_0x510a('0x417'));let _0x295aae=await _0x3368e8[_0x510a('0x416')](_0x510a('0x418'));let _0xd08267=await _0x3368e8['getChannelVariable'](_0x510a('0x419'));let _0x1c42fb=await _0x3368e8[_0x510a('0x416')](_0x510a('0x41a'));let _0x59ebe5=await _0x3368e8[_0x510a('0x416')]('RINGTIMER');_0x2be80e=_0x2be80e[_0x510a('0x342')];_0x2be80e=_0x271ae4['default'][_0x510a('0x1fb')](_0x2be80e,_0x3cb8a6,'');_0x295aae=_0x295aae[_0x510a('0x342')];_0xd08267=_0xd08267[_0x510a('0x342')];_0x1c42fb=_0x1c42fb[_0x510a('0x342')];_0x59ebe5=_0x59ebe5[_0x510a('0x342')];if(_0x1c42fb===_0x510a('0x1ff')){_0x16be60[_0x510a('0xd')]['debug']('\x22No\x20mobile\x20call\x22\x20flag\x20detected\x20not\x20sending\x20the\x20call\x20to\x20mobile\x20extension\x20'+_0x2be80e);return;}let _0x4cb91e=await this[_0x510a('0x1d4')][_0x510a('0x2c5')][_0x510a('0x1c9')](_0x2be80e);if(_0x4cb91e['status']===![]){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')]('No\x20mobile\x20tokens\x20for\x20extension\x20'+_0x2be80e);return;}const _0x185023=await this['_ZuluBridge']['createBridge'](_0x637607,_0x1cee00['id'],_0x222124,_0x2be80e,_0x295aae);let _0x3a6d4e='';if(!_0x271ae4['default'][_0x510a('0x1ee')](_0x295aae)&&_0x295aae!==''){const _0x53ebae=await this['_BackendServer'][_0x510a('0xad')]['getInteractionByCallerIDs']([{'name':_0xd08267,'number':_0x295aae},{'name':'','number':_0x2be80e}]);_0x3a6d4e=_0x53ebae[_0x2be80e][_0x510a('0x2c3')];}this[_0x510a('0x3e0')][_0x185023]={};let _0x169b7a=0x0;await _0x13bf06['Promise']['all'](_0x271ae4[_0x510a('0xd')][_0x510a('0x21f')](_0x4cb91e[_0x510a('0x41b')],async(_0x590315,_0x1aa75a)=>{if(_0x1aa75a!==_0x4751f5[_0x510a('0x41c')]&&_0x1aa75a!==_0x4751f5[_0x510a('0x41d')]){await _0x13bf06['Promise'][_0x510a('0x226')](_0x271ae4['default'][_0x510a('0x21f')](_0x590315,async _0x5da8da=>{let _0x96bd53=null;let _0x272a37=null;switch(_0x1aa75a){case _0x4751f5[_0x510a('0x41e')]:_0x96bd53=_0x5da8da;_0x272a37=_0x4751f5['ANDROID'];break;case _0x4751f5[_0x510a('0x41f')]:case _0x4751f5[_0x510a('0x420')]:const _0x3152d4=await this[_0x510a('0x1d4')]['mobileNotificationsAPI'][_0x510a('0x1cc')](_0x2be80e,_0x5da8da);if(_0x3152d4[_0x510a('0xe9')]===!![]){_0x96bd53=_0x3152d4[_0x510a('0x200')];_0x272a37=_0x1aa75a===_0x4751f5['IOS_VOIP']?_0x4751f5[_0x510a('0x41c')]:_0x4751f5[_0x510a('0x41d')];}break;}this[_0x510a('0x3e0')][_0x185023][_0x169b7a]={'token':_0x5da8da,'type':_0x1aa75a,'notifyToken':_0x96bd53,'notifyType':_0x272a37,'callbackURI':this[_0x510a('0x401')]+_0x185023+'.'+_0x169b7a,'interactionId':_0x3a6d4e};_0x169b7a++;}));}}));await _0x13bf06[_0x510a('0x50')][_0x510a('0x226')](_0x271ae4[_0x510a('0xd')][_0x510a('0x21f')](this[_0x510a('0x3e0')][_0x185023],async _0x5afee6=>{const _0x3828d1={};_0x3828d1[_0x5afee6[_0x510a('0xf7')]]=[_0x5afee6[_0x510a('0xde')]];let _0xb3d110=await this['_BackendServer'][_0x510a('0x2c5')]['sendMobileCallNotification'](_0x2be80e,_0x295aae,_0xd08267,_0x5afee6[_0x510a('0x40b')],_0x3828d1,_0x5afee6[_0x510a('0x351')],_0x59ebe5);_0xb3d110=_0x271ae4[_0x510a('0xd')][_0x510a('0x180')](_0xb3d110,_0x510a('0x421'),_0x510a('0x422'));_0x16be60[_0x510a('0xd')]['debug']('Push\x20notification\x20response:\x20'+_0xb3d110);}));}async[_0x510a('0x3f9')](_0xdcbaa7,_0x34eb2d,_0x336546){let _0x1f8adc=this[_0x510a('0x31f')][_0x510a('0x40e')](_0x336546['id']);if(!_0x1f8adc){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x423')+_0x336546['id']);return;}if(_0x1f8adc[_0x510a('0x424')]===![]){await _0x13bf06[_0x510a('0x50')][_0x510a('0x226')](_0x271ae4['default'][_0x510a('0x21f')](this[_0x510a('0x3e0')][_0x1f8adc['id']],async _0x34286b=>{if(!_0x271ae4['default'][_0x510a('0x1ee')](_0x34286b[_0x510a('0x40a')])){const _0x56d7bb={};_0x56d7bb[_0x34286b[_0x510a('0x409')]]=[_0x34286b[_0x510a('0x40a')]];await this[_0x510a('0x402')](_0x1f8adc['to'],_0x34286b[_0x510a('0x40b')],_0x56d7bb,_0x34286b['interactionId']);}}));}const _0x56e8aa=await this[_0x510a('0x31f')]['handleChannelFinish'](_0xdcbaa7,_0x336546['id']);if(_0x56e8aa===!![]){delete this[_0x510a('0x3e0')][_0x1f8adc['id']];}}['buildDialString'](_0x5bbf31,_0x1c21c8,_0x50868a){return new _0x13bf06['Promise']((_0x1b4841,_0xbef318)=>{let _0x3a023b=[];_0x410d9a[_0x510a('0xd')]['each'](_0x5bbf31,(_0x10f439,_0x53bf9b)=>{if(_0x10f439[_0x510a('0xe9')]===_0x510a('0x425')&&_0x10f439['endpointname']===_0x1c21c8&&_0x10f439[_0x510a('0x426')]===_0x1c21c8&&_0x50868a[_0x510a('0xa8')](_0x10f439['useragent'])){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')]('Adding\x20'+_0x10f439[_0x510a('0x2e7')]+_0x510a('0x427'));_0x3a023b['push']('PJSIP/'+_0x1c21c8+'/'+_0x10f439[_0x510a('0x2e7')]);}_0x53bf9b();},_0x588b2c=>{if(_0x588b2c){return _0xbef318(_0x588b2c);}return _0x1b4841(_0x3a023b);});});}async['dialOnlineContactsByUA'](_0x5f4fd7,_0x14f671,_0x5e9085,_0x34c88f){const _0x44e1d2=await this[_0x510a('0x428')]();const _0x4fa8be=await this[_0x510a('0x429')](_0x44e1d2,_0x5e9085,_0x34c88f);if(_0x4fa8be['length']){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x42a')+_0x5f4fd7+'\x20client(s),\x20finalized\x20dial\x20string\x20is:\x20'+_0x4fa8be[_0x510a('0x339')]('&'));await _0x13bf06[_0x510a('0x50')][_0x510a('0x226')]([_0x14f671[_0x510a('0x42b')](_0x4fa8be[_0x510a('0x339')]('&')),_0x14f671[_0x510a('0x42c')](_0x510a('0x42d')),_0x14f671['setInteractionId'](_0x510a('0x42e'))]);return!![];}else{_0x16be60['default'][_0x510a('0x4a')](_0x510a('0x42f')+_0x5f4fd7+_0x510a('0x430'));return![];}}async['desktopCall'](_0x53c57b,_0x256c4b,_0x1cc0c1){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x431'));const _0x31e7e4=new RegExp(_0x510a('0x432'));const _0x67b36=new _0x5909ed[(_0x510a('0x415'))](_0x53c57b,_0x1cc0c1);await _0x67b36[_0x510a('0x42c')](_0x510a('0x433'));let _0x58b199=await _0x67b36[_0x510a('0x416')](_0x510a('0x417'));_0x58b199=_0x58b199['value'];let _0x26316e=await _0x67b36[_0x510a('0x416')](_0x510a('0x434'));_0x26316e=_0x26316e['value'];if(_0x26316e==='true'){_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x435')+_0x58b199);}else{_0x16be60[_0x510a('0xd')]['debug'](_0x510a('0x436'));await this[_0x510a('0x437')](_0x510a('0x438'),_0x67b36,_0x58b199,_0x31e7e4);}_0x16be60[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x439'));await _0x67b36[_0x510a('0x43a')]();}['getContactStatuses'](){return new _0x13bf06[(_0x510a('0x50'))]((_0x3a1b77,_0x2af76e)=>{let _0x42e0a2=[];let _0x446540;const _0xab1006=(0x0,_0x216d4d[_0x510a('0xd')])();this['on'](_0x510a('0x3e4')+_0xab1006,()=>{this[_0x510a('0x64')](_0x510a('0x3e4')+_0xab1006);this[_0x510a('0x64')]('contactstatusdetail-'+_0xab1006);clearTimeout(_0x446540);_0x3a1b77(_0x42e0a2);});this['on'](_0x510a('0x3e2')+_0xab1006,_0x37c6fd=>{_0x42e0a2['push'](_0x37c6fd);});this[_0x510a('0x1d2')][_0x510a('0x61')]({'action':_0x510a('0x43b'),'actionid':_0xab1006})[_0x510a('0x10')](_0x4fa9f1=>{_0x446540=setTimeout(()=>{this['removeAllListeners'](_0x510a('0x3e4')+_0xab1006);this[_0x510a('0x64')](_0x510a('0x3e2')+_0xab1006);_0x2af76e(new Error(_0x510a('0x43c')));},0x5dc);})[_0x510a('0x13')](_0x5aab59=>{this['removeAllListeners'](_0x510a('0x3e4')+_0xab1006);this[_0x510a('0x64')]('contactstatusdetail-'+_0xab1006);_0x2af76e(_0x5aab59);});});}[_0x510a('0x3e8')](_0xcd79d9,_0x46156c){_0x16be60[_0x510a('0xd')]['debug']('_getMobileCall('+JSON['stringify'](_0x46156c)+')');const _0x307d1d=_0x271ae4[_0x510a('0xd')][_0x510a('0x180')](_0x46156c,'data.callbackURI');const _0x172f9f=_0x46156c['id'];if(!_0x307d1d){_0xcd79d9['sendError'](_0x172f9f,_0x510a('0x43d'),0x190);return;}const {bridgeid}=this['parseURI'](_0x307d1d);const _0x334ca9=this[_0x510a('0x31f')]['getBridgeMap'](bridgeid);if(!_0x334ca9){_0xcd79d9['sendError'](_0x172f9f,_0x510a('0x43e'),0x194);return;}_0xcd79d9[_0x510a('0xe7')]({'actionid':_0x172f9f,'success':!![],'inCall':_0x334ca9['inCall'],'startedAt':_0x334ca9['epoch']});}}_0x433ae5['CallProcessing']=CallProcessing;return _0x827c34[_0x510a('0x4')];};_0x5e4b0d[0x20]=function(_0x1e7ed9,_0x1ad217){'use strict';Object[_0x510a('0x75')](_0x1ad217,_0x510a('0x16'),{'value':!![]});_0x1ad217[_0x510a('0x1e0')]=undefined;var _0x806cfc=require(_0x510a('0x3df'));var _0x3160ee=_0x26bb24(_0x806cfc);var _0x12904a=require(_0x510a('0x107'));var _0x1b34db=_0x26bb24(_0x12904a);var _0x86946=require(_0x510a('0x1d1'));var _0x294531=_0x26bb24(_0x86946);var _0x126a57=require(_0x510a('0x106'));var _0x2777f4=require(_0x510a('0x19'));var _0x2907ed=_0x59c414(0x4,0x20);var _0xb8e286=_0x26bb24(_0x2907ed);var _0x26f0d1=require('lodash');var _0x154bf1=_0x26bb24(_0x26f0d1);var _0x146c20=require('unix-timestamp');var _0x5a22e1=_0x26bb24(_0x146c20);var _0x3e510b=_0x59c414(0x6,0x20);var _0x5f5971=_0x26bb24(_0x3e510b);function _0x26bb24(_0x3c5599){return _0x3c5599&&_0x3c5599[_0x510a('0x16')]?_0x3c5599:{'default':_0x3c5599};}_0x5a22e1[_0x510a('0xd')][_0x510a('0x7b')]=!![];class CallConference extends _0x126a57[_0x510a('0x1c')]{constructor(_0x55e5df,_0x4dcf45,_0x5d689f){super();this[_0x510a('0x1d2')]=_0x55e5df;this[_0x510a('0x1d3')]=_0x4dcf45;this[_0x510a('0x1d4')]=_0x5d689f;this['confNumberMap']={};this[_0x510a('0x43f')]={};this[_0x510a('0x320')]={};this['_BackendServer'][_0x510a('0xad')]['clearAllConferences']()[_0x510a('0x13')](_0x3e2ab1=>{_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20calling\x20API\x20for\x20clearing\x20conferences',_0x3e2ab1);});this[_0x510a('0x1d4')]['on'](_0x510a('0x440'),this['updateConferencePrefix'][_0x510a('0x10c')](this));this[_0x510a('0x441')]=_0x2777f4[_0x510a('0x50')][_0x510a('0x226')]([this[_0x510a('0x1d2')]['getConfig']('HTTPBINDPORT'),this['_Zulu'][_0x510a('0x55')]('FPBX_ARI_USER'),this['_Zulu'][_0x510a('0x55')]('FPBX_ARI_PASSWORD'),this[_0x510a('0x1d2')][_0x510a('0x55')](_0x510a('0x442'))])[_0x510a('0x10')](_0x4e8b87=>{const _0x4eef09=_0x4e8b87[0x0];const _0x33fcd8=_0x4e8b87[0x1];const _0x11b172=_0x4e8b87[0x2];this[_0x510a('0x443')]=_0x4e8b87[0x3];return this[_0x510a('0x444')](_0x4eef09,_0x33fcd8,_0x11b172);})['catch'](_0x322fca=>{_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x445'),_0x322fca);});}async[_0x510a('0x1f6')](_0x44e23f,_0x88d199,_0x265036){if(this[_0x510a('0x43f')][_0x44e23f]){return this[_0x510a('0x443')]+this[_0x510a('0x43f')][_0x44e23f][_0x510a('0x446')];}if(Object['keys'](this[_0x510a('0x447')])[_0x510a('0x13c')]>=0x3e8){throw new Error(_0x510a('0x448'));}let _0x1a4185=await this[_0x510a('0x1d4')]['api']['getInteractionByID'](_0x44e23f);if(_0x1a4185&&typeof _0x1a4185[_0x510a('0x12f')]!=='undefined'&&_0x1a4185['contacts']&&_0x1a4185[_0x510a('0x23e')]['users']){if(!_0x1a4185['contacts'][_0x510a('0x2cb')][_0x88d199]){throw new Error(_0x510a('0x449'));}if(_0x1a4185['close']!=='0'){throw new Error(_0x510a('0x44a'));}let _0x116b6b;do{_0x116b6b=_0x154bf1[_0x510a('0xd')]['random'](0x0,0x3e7)[_0x510a('0x114')]()['padStart'](0x3,'0');}while(this[_0x510a('0x447')][_0x116b6b]);let _0x36502f=this[_0x510a('0x443')]+_0x116b6b;this[_0x510a('0x447')][_0x116b6b]={'interactionid':_0x44e23f};this['interactionMap'][_0x44e23f]={'confNumber':_0x116b6b};let _0x3ab7a4={'status':_0x510a('0x44b'),'conferenceNumber':_0x36502f};let _0x2134f6=await this[_0x510a('0x1d4')][_0x510a('0xad')]['addStreamToInteraction'](_0x44e23f,_0x265036,_0x88d199,_0x510a('0x44c'),_0x3ab7a4,null,null,null,null,!![]);this[_0x510a('0x447')][_0x116b6b][_0x510a('0x44d')]=_0x2134f6;await this['_Zulu'][_0x510a('0x6c')](_0x510a('0x44e'),_0x44e23f,_0x36502f);return _0x36502f;}else{throw new Error('The\x20interaction\x20id\x20provided\x20does\x20not\x20exist');}}[_0x510a('0x444')](_0x2c0337,_0x58efbc,_0x4c892b){return new _0x2777f4['Promise']((_0x46e960,_0x47cc9f)=>{_0x3160ee[_0x510a('0xd')][_0x510a('0x34')]('http://127.0.0.1:'+_0x2c0337,_0x58efbc,_0x4c892b)[_0x510a('0x10')](_0x289a53=>{_0x289a53['on']('StasisStart',(_0x1dd505,_0x129c54)=>{this[_0x510a('0x44f')](_0x289a53,_0x1dd505,_0x129c54)[_0x510a('0x13')](_0x434769=>{_0xb8e286[_0x510a('0xd')]['error']('Error\x20joining\x20channel\x20to\x20bridge',_0x434769);});});_0x289a53['on'](_0x510a('0x3f1'),(_0x4ffe17,_0x121e00)=>{_0xb8e286[_0x510a('0xd')]['debug'](_0x510a('0x38c')+_0x121e00['id']+_0x510a('0x450'));this[_0x510a('0x451')](_0x289a53,_0x4ffe17,_0x121e00)[_0x510a('0x13')](_0x3e4856=>{_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x452'),_0x3e4856);});});_0x289a53['on'](_0x510a('0x453'),(_0x582c9e,_0x17ea9d)=>{this[_0x510a('0x454')](_0x582c9e,_0x17ea9d,!![])[_0x510a('0x13')](_0x2bb98d=>{_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20handling\x20talking\x20started\x20event',_0x2bb98d);});});_0x289a53['on'](_0x510a('0x455'),(_0x4b9822,_0x2b8ad1)=>{this[_0x510a('0x454')](_0x4b9822,_0x2b8ad1,![])[_0x510a('0x13')](_0x52dd86=>{_0xb8e286['default']['error'](_0x510a('0x456'),_0x52dd86);});});_0x289a53[_0x510a('0x3f4')]('bridges-handler');return _0x46e960();})[_0x510a('0x13')](_0xf76d29=>{_0xb8e286[_0x510a('0xd')]['error'](_0x510a('0x457'),_0xf76d29[_0x510a('0xc3')]);return _0x47cc9f(_0xf76d29);});});}async[_0x510a('0x44f')](_0x2bd8a2,_0x53a6e0,_0xcaaf97){let _0x4c4c93=_0x53a6e0[_0x510a('0x406')][0x0];if(!this['confNumberMap'][_0x4c4c93]){return this['channelHangup'](_0x2bd8a2,_0xcaaf97,new Error(_0x510a('0x458')+_0x4c4c93+_0x510a('0x459')));}if(!this['confNumberMap'][_0x4c4c93][_0x510a('0x44d')]){return this[_0x510a('0x410')](_0x2bd8a2,_0xcaaf97,new Error(_0x510a('0x45a')+_0x4c4c93));}let _0x3523ce=this['confNumberMap'][_0x4c4c93][_0x510a('0x1ef')];_0xb8e286[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x38c')+_0xcaaf97['id']+_0x510a('0x45b')+_0x3523ce);let _0x29e412=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1ab')](_0x3523ce);let _0x447a53=await this[_0x510a('0x416')](_0xcaaf97,_0x510a('0x45c'));let _0x22d1f4=await this[_0x510a('0x416')](_0xcaaf97,_0x510a('0x45d'));let _0x31d5a5=![];if(_0x29e412&&_0x29e412[_0x510a('0xf7')]&&_0x29e412[_0x510a('0x23e')]&&_0x29e412['contacts'][_0x510a('0x2cb')]){if(_0x29e412[_0x510a('0xf7')]===_0x510a('0x45e')){return this[_0x510a('0x410')](_0x2bd8a2,_0xcaaf97,new Error(_0x510a('0x45f')));}else if(_0x447a53!==''){let _0x3be07a=await this[_0x510a('0x1d4')][_0x510a('0xad')]['getContactuuidByExtension'](_0x447a53);if(_0x3be07a===![]&&_0x22d1f4===''){return this[_0x510a('0x410')](_0x2bd8a2,_0xcaaf97,new Error(_0x510a('0x460')));}if(_0x3be07a!==![]){_0x31d5a5=_0x3be07a[_0x510a('0xe8')];}}else if(_0x22d1f4===''){return this['channelHangup'](_0x2bd8a2,_0xcaaf97,new Error(_0x510a('0x461')));}let _0x33ab29=await _0x2bd8a2[_0x510a('0x462')][_0x510a('0x463')]();let _0x48ed74=_0x33ab29[_0x510a('0x33b')](_0x105ad2=>{return _0x105ad2['id']===_0x3523ce;});let _0x1389f5=![];if(_0x48ed74[_0x510a('0x13c')]!==0x0){_0xb8e286['default'][_0x510a('0x4a')](_0x510a('0x464')+_0x3523ce);_0x48ed74=_0x48ed74[0x0];if(_0x29e412['type']==='private'&&(_0x31d5a5===![]||!_0x29e412[_0x510a('0x23e')][_0x510a('0x2cb')][_0x31d5a5])){return this[_0x510a('0x410')](_0x2bd8a2,_0xcaaf97,new Error('You\x20are\x20not\x20allowed\x20to\x20join\x20the\x20bridge'));}}else{_0xb8e286[_0x510a('0xd')][_0x510a('0x4a')]('Creating\x20a\x20new\x20bridge\x20for\x20interaction\x20'+_0x3523ce);_0x48ed74=await _0x2bd8a2[_0x510a('0x462')][_0x510a('0x465')]({'bridgeId':_0x3523ce,'type':_0x510a('0x466')});_0x5f5971['default'][_0x510a('0x163')](_0x510a('0x467'),'created');_0x1389f5=!![];this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x468')]=_0x5a22e1[_0x510a('0xd')][_0x510a('0xd8')]();}await _0xcaaf97[_0x510a('0x2de')]();await _0x48ed74[_0x510a('0x469')]({'channel':_0xcaaf97['id']});await _0xcaaf97[_0x510a('0x46a')]({'variable':_0x510a('0x46b'),'value':'utf8'});await _0xcaaf97[_0x510a('0x46a')]({'variable':_0x510a('0x46c'),'value':_0x510a('0x46d')});await _0xcaaf97[_0x510a('0x46a')]({'variable':_0x510a('0x46e'),'value':this['conferencePrefix']+_0x4c4c93});this[_0x510a('0x320')][_0xcaaf97['id']]={};this[_0x510a('0x320')][_0xcaaf97['id']][_0x510a('0x344')]=_0x4c4c93;_0xb8e286[_0x510a('0xd')][_0x510a('0x4a')]('Channel\x20'+_0xcaaf97['id']+_0x510a('0x46f')+_0x3523ce);if(_0x29e412[_0x510a('0xf7')]===_0x510a('0x470')&&_0x31d5a5!==![]&&!_0x29e412[_0x510a('0x23e')][_0x510a('0x2cb')][_0x31d5a5]){let _0x4b629d=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1b6')](_0x3523ce,_0x31d5a5);if(_0x4b629d[_0x510a('0xe9')]===![]){_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')]('Error\x20joining\x20member\x20to\x20interaction.\x20Message:\x20'+_0x4b629d['message']);}else{_0xb8e286[_0x510a('0xd')]['debug']('The\x20contact\x20'+_0x31d5a5+_0x510a('0x471')+_0x3523ce);}}if(!this['confNumberMap'][_0x4c4c93][_0x510a('0x472')]){this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x472')]=[];}if(!this[_0x510a('0x447')][_0x4c4c93]['currentExternalContacts']){this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x473')]=[];}if(!this['confNumberMap'][_0x4c4c93][_0x510a('0x23e')]){this[_0x510a('0x447')][_0x4c4c93]['contacts']=[];}if(!this['confNumberMap'][_0x4c4c93][_0x510a('0x474')]){this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x474')]=[];}if(_0x1389f5){this[_0x510a('0x320')][_0xcaaf97['id']][_0x510a('0x475')]=_0x31d5a5;this[_0x510a('0x320')][_0xcaaf97['id']][_0x510a('0x476')]=!![];this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x23e')]=[_0x31d5a5];this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x474')]=[_0x31d5a5];}else{if(_0x31d5a5===![]){this[_0x510a('0x320')][_0xcaaf97['id']][_0x510a('0x475')]=_0x22d1f4;this[_0x510a('0x320')][_0xcaaf97['id']]['bhInternal']=![];if(!this[_0x510a('0x447')][_0x4c4c93]['externalContacts'][_0x510a('0x340')](_0x22d1f4)){this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x472')][_0x510a('0x295')](_0x22d1f4);}this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x473')][_0x510a('0x295')](_0x22d1f4);}else{this['channelMap'][_0xcaaf97['id']]['bhContact']=_0x31d5a5;this['channelMap'][_0xcaaf97['id']]['bhInternal']=!![];if(!this['confNumberMap'][_0x4c4c93][_0x510a('0x23e')][_0x510a('0x340')](_0x31d5a5)){this[_0x510a('0x447')][_0x4c4c93]['contacts'][_0x510a('0x295')](_0x31d5a5);}this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x474')][_0x510a('0x295')](_0x31d5a5);}}if(this[_0x510a('0x447')][_0x4c4c93]['currentContacts'][_0x510a('0x13c')]+this['confNumberMap'][_0x4c4c93][_0x510a('0x473')]['length']===0x1){await _0xcaaf97[_0x510a('0x477')]({'media':'sound:conf-onlyperson'});}let _0x5be95c={'status':_0x510a('0x478'),'conferenceNumber':this[_0x510a('0x443')]+_0x4c4c93,'contacts':this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x23e')],'currentContacts':this['confNumberMap'][_0x4c4c93][_0x510a('0x474')],'externalContacts':this[_0x510a('0x447')][_0x4c4c93]['externalContacts'],'currentExternalContacts':this[_0x510a('0x447')][_0x4c4c93][_0x510a('0x473')]};let _0x1182b6=await this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1b3')](this[_0x510a('0x447')][_0x4c4c93]['streamid'],_0x3523ce,_0x5be95c);if(_0x1182b6['status']===![]){_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')]('Stream\x20was\x20not\x20able\x20to\x20update,\x20MESSAGE:\x20'+_0x1182b6[_0x510a('0xc3')]);}await _0xcaaf97['setChannelVar']({'variable':_0x510a('0x479'),'value':''});this[_0x510a('0x320')][_0xcaaf97['id']][_0x510a('0x1eb')]=await this[_0x510a('0x416')](_0xcaaf97,'CALLERID(num)');this['channelMap'][_0xcaaf97['id']][_0x510a('0x1ea')]=await this[_0x510a('0x416')](_0xcaaf97,'CALLERID(name)');}else{return this[_0x510a('0x410')](_0x2bd8a2,_0xcaaf97,new Error('Interaction\x20do\x20not\x20have\x20required\x20values'));}}async[_0x510a('0x454')](_0x27b553,_0x53f671,_0x235b06){if(!this[_0x510a('0x320')][_0x53f671['id']]){return;}if(!_0x154bf1[_0x510a('0xd')][_0x510a('0x250')](this[_0x510a('0x320')][_0x53f671['id']],_0x510a('0x344'))||!_0x154bf1[_0x510a('0xd')][_0x510a('0x250')](this[_0x510a('0x320')][_0x53f671['id']],_0x510a('0x476'))||!_0x154bf1['default'][_0x510a('0x250')](this[_0x510a('0x320')][_0x53f671['id']],_0x510a('0x475'))){_0xb8e286['default'][_0x510a('0x2b')](_0x510a('0x38c')+_0x53f671['id']+'\x20started\x20talking\x20without\x20variables\x20set');return;}let _0xcc73b4=this[_0x510a('0x320')][_0x53f671['id']][_0x510a('0x344')];if(!this['confNumberMap'][_0xcc73b4]){_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x38c')+_0x53f671['id']+_0x510a('0x47a'));return;}let _0x579bf2=this['channelMap'][_0x53f671['id']][_0x510a('0x476')];let _0x1cd3c6=this[_0x510a('0x320')][_0x53f671['id']]['bhContact'];let _0x6757d5=this[_0x510a('0x1d3')]['getAllSessions']();let _0xb19297=this[_0x510a('0x447')][_0xcc73b4][_0x510a('0x1ef')];let _0x3dfff1=await this['_BackendServer'][_0x510a('0xad')][_0x510a('0x1ab')](_0xb19297);if(_0x3dfff1&&_0x3dfff1[_0x510a('0xf7')]&&_0x3dfff1['contacts']&&_0x3dfff1['contacts']['users']){const _0x1c60c8=(0x0,_0x1b34db[_0x510a('0xd')])();await new _0x2777f4[(_0x510a('0x50'))]((_0x178fa1,_0x1a40ab)=>{_0x294531[_0x510a('0xd')]['eachSeries'](_0x6757d5,(_0x2fe580,_0x1e7995)=>{if(_0x3dfff1['contacts']['users'][_0x2fe580[_0x510a('0xe8')]]){_0x2fe580[_0x510a('0xe7')]({'action':_0x510a('0x454'),'actionid':_0x1c60c8,'talking':_0x235b06,'isInternal':_0x579bf2,'contactuuid':_0x1cd3c6});}_0x1e7995();},_0x3a038c=>{if(_0x3a038c){_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x47b'),_0x3a038c);_0x1a40ab(_0x3a038c);}_0x178fa1();});});}else{_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x47c')+_0xb19297+_0x510a('0x47d'));}}async[_0x510a('0x410')](_0x2923d2,_0x19f64c,_0x55dd2b){_0xb8e286[_0x510a('0xd')]['error']('Error\x20from\x20conference\x20channel\x20hangup',_0x55dd2b[_0x510a('0xc3')]);let _0x22c8f6=_0x2923d2[_0x510a('0x47e')]();await _0x19f64c[_0x510a('0x2de')]();await _0x19f64c[_0x510a('0x477')]({'media':_0x510a('0x47f')},_0x22c8f6);_0x22c8f6['once'](_0x510a('0x480'),async(_0x42430e,_0x36baab)=>{await _0x19f64c['hangup']();});throw _0x55dd2b;}async[_0x510a('0x451')](_0x54c7f3,_0x31bd80,_0x421067){if(!this[_0x510a('0x320')][_0x421067['id']]){_0xb8e286['default'][_0x510a('0x2b')]('Channel\x20'+_0x421067['id']+'\x20leaved\x20stasis\x20without\x20setting\x20channelMap');return;}if(!_0x154bf1[_0x510a('0xd')][_0x510a('0x250')](this['channelMap'][_0x421067['id']],_0x510a('0x344'))||!_0x154bf1['default'][_0x510a('0x250')](this[_0x510a('0x320')][_0x421067['id']],'bhInternal')||!_0x154bf1['default'][_0x510a('0x250')](this[_0x510a('0x320')][_0x421067['id']],_0x510a('0x475'))){_0xb8e286['default'][_0x510a('0x2b')](_0x510a('0x38c')+_0x421067['id']+'\x20leaved\x20stasis\x20without\x20variables\x20set');delete this[_0x510a('0x320')][_0x421067['id']];return;}this[_0x510a('0x481')](this[_0x510a('0x320')][_0x421067['id']]['calleridnum'],this[_0x510a('0x320')][_0x421067['id']][_0x510a('0x1ea')],this[_0x510a('0x443')]+this[_0x510a('0x320')][_0x421067['id']][_0x510a('0x344')],_0x510a('0x20b'));let _0x4b0e72=this['channelMap'][_0x421067['id']][_0x510a('0x344')];if(!this[_0x510a('0x447')][_0x4b0e72]){_0xb8e286[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x38c')+_0x421067['id']+'\x20left\x20unknown\x20conference');return;}let _0x1b97e5=this['channelMap'][_0x421067['id']][_0x510a('0x476')];let _0x29230e=this['channelMap'][_0x421067['id']][_0x510a('0x475')];let _0x2d641d=this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x1ef')];if(_0x1b97e5){_0xb8e286['default'][_0x510a('0x4a')]('Removing\x20internal\x20contact\x20in\x20streams\x20body');let _0x1b5519=this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x474')][_0x510a('0x22f')](_0x29230e);if(_0x1b5519!==-0x1){this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x474')][_0x510a('0x296')](_0x1b5519,0x1);}}else{_0xb8e286[_0x510a('0xd')]['debug'](_0x510a('0x482'));let _0x491521=this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x473')][_0x510a('0x22f')](_0x29230e);if(_0x491521!==-0x1){this[_0x510a('0x447')][_0x4b0e72]['currentExternalContacts'][_0x510a('0x296')](_0x491521,0x1);}}let _0x2253f3=this['confNumberMap'][_0x4b0e72][_0x510a('0x473')][_0x510a('0x13c')]+this['confNumberMap'][_0x4b0e72][_0x510a('0x474')]['length'];let _0x12ae6d;if(_0x2253f3===0x0){await _0x54c7f3[_0x510a('0x462')][_0x510a('0x483')]({'bridgeId':_0x2d641d});let _0x257218=_0x5a22e1['default']['now']()-this['confNumberMap'][_0x4b0e72][_0x510a('0x468')];_0x5f5971[_0x510a('0xd')][_0x510a('0x163')](_0x510a('0x467'),_0x510a('0x484'),'attendees',this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x23e')]['length']+this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x472')]['length']);_0x5f5971['default'][_0x510a('0x165')](_0x510a('0x467'),_0x510a('0x485'),_0x257218*0x3e8);_0x12ae6d={'status':_0x510a('0x486'),'duration':_0x257218,'conferenceNumber':this[_0x510a('0x443')]+_0x4b0e72,'contacts':this[_0x510a('0x447')][_0x4b0e72]['contacts'],'currentContacts':[],'externalContacts':this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x472')],'currentExternalContacts':[]};}else{_0x12ae6d={'status':_0x510a('0x478'),'conferenceNumber':this[_0x510a('0x443')]+_0x4b0e72,'contacts':this[_0x510a('0x447')][_0x4b0e72][_0x510a('0x23e')],'currentContacts':this[_0x510a('0x447')][_0x4b0e72]['currentContacts'],'externalContacts':this[_0x510a('0x447')][_0x4b0e72]['externalContacts'],'currentExternalContacts':this['confNumberMap'][_0x4b0e72][_0x510a('0x473')]};}let _0x1c17d5=await this[_0x510a('0x1d4')]['api'][_0x510a('0x1b3')](this[_0x510a('0x447')][_0x4b0e72]['streamid'],_0x2d641d,_0x12ae6d);if(_0x1c17d5[_0x510a('0xe9')]===![]){_0xb8e286[_0x510a('0xd')]['error'](_0x510a('0x487')+_0x1c17d5[_0x510a('0xc3')]);}if(_0x2253f3===0x0){delete this['confNumberMap'][_0x4b0e72];delete this[_0x510a('0x43f')][_0x2d641d];await this['_Zulu']['kvDel'](_0x510a('0x44e'),this[_0x510a('0x443')]+_0x4b0e72);}delete this[_0x510a('0x320')][_0x421067['id']];}[_0x510a('0x416')](_0x5ac805,_0x79cf3b){return new _0x2777f4['Promise']((_0x266711,_0x2a4f8b)=>{return _0x5ac805['getChannelVar']({'variable':_0x79cf3b})[_0x510a('0x10')](_0x1be046=>{if(_0x1be046[_0x510a('0x342')]){return _0x266711(_0x1be046[_0x510a('0x342')]);}else{return _0x266711('');}})[_0x510a('0x13')](_0x4c0257=>{return _0x266711('');});});}[_0x510a('0x481')](_0x276a9f,_0x300d74,_0x168ef5,_0x32bf5e){const _0xb00551={'getFromNum':()=>_0x276a9f,'getFromName':()=>_0x300d74,'getToNum':()=>_0x168ef5,'getToName':()=>''};const _0x537698={'call':_0xb00551,'state':_0x32bf5e};this[_0x510a('0x59')](_0x510a('0x1e4'),_0x537698);}['updateConferencePrefix'](_0x2feb19,_0x272691){_0x2feb19[_0x510a('0xe7')]({'actionid':_0x272691['id']});if(_0x272691[_0x510a('0xd3')][_0x510a('0x488')]){this[_0x510a('0x443')]=_0x272691[_0x510a('0xd3')][_0x510a('0x488')];}}}_0x1ad217[_0x510a('0x1e0')]=CallConference;return _0x1e7ed9[_0x510a('0x4')];};_0x5e4b0d[0x21]=function(_0x386c2e,_0x548bb8){'use strict';Object[_0x510a('0x75')](_0x548bb8,_0x510a('0x16'),{'value':!![]});_0x548bb8[_0x510a('0x489')]=undefined;var _0x1b2b2a=require(_0x510a('0x79'));var _0x20ccd1=_0x578b4a(_0x1b2b2a);var _0x2ef6ad=require('lodash');var _0x4dcf1b=_0x578b4a(_0x2ef6ad);var _0x5d24c9=_0x59c414(0x4,0x21);var _0x19f076=_0x578b4a(_0x5d24c9);function _0x578b4a(_0x347d26){return _0x347d26&&_0x347d26[_0x510a('0x16')]?_0x347d26:{'default':_0x347d26};}_0x20ccd1[_0x510a('0xd')][_0x510a('0x7b')]=!![];class ZuluBridge{constructor(){this['bridgeMap']={};}async[_0x510a('0x48a')](_0x47d645,_0x508ae7,_0x48258b,_0x339e79,_0x1d967f){let _0x33364e=await _0x47d645[_0x510a('0x462')][_0x510a('0x465')]({'type':_0x510a('0x466')});_0x19f076[_0x510a('0xd')][_0x510a('0x4a')]('New\x20bridge\x20created:\x20'+_0x33364e['id']);let _0x3722e1={'id':_0x33364e['id'],'channels':[],'epoch':_0x48258b,'inCall':![],'to':_0x339e79,'from':_0x1d967f,'callerChannel':_0x508ae7};this[_0x510a('0x48b')][_0x33364e['id']]=_0x3722e1;await this['addChannelToBridge'](_0x47d645,_0x3722e1,_0x508ae7);return _0x33364e['id'];}async['handleChannelFinish'](_0x54d229,_0x202888){const _0x4674d9=this[_0x510a('0x40e')](_0x202888);if(!_0x4674d9){_0x19f076['default'][_0x510a('0x2b')](_0x510a('0x48c')+_0x202888);return![];}_0x19f076[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x48d')+_0x202888+_0x510a('0xd0')+_0x4674d9['id']+'\x20('+_0x4dcf1b[_0x510a('0xd')][_0x510a('0x339')](_0x4674d9[_0x510a('0x349')])+')');this[_0x510a('0x412')](_0x4674d9,_0x202888);const _0x269297=_0x4dcf1b[_0x510a('0xd')][_0x510a('0x348')](_0x4674d9[_0x510a('0x349')]);if(_0x269297===0x0){_0x19f076[_0x510a('0xd')][_0x510a('0x4a')]('Bridge\x20'+_0x4674d9['id']+'\x20empty;\x20burning');this[_0x510a('0x48e')](_0x4674d9['id']);await _0x54d229['bridges'][_0x510a('0x483')]({'bridgeId':_0x4674d9['id']});return!![];}if(_0x269297===0x1){_0x19f076['default']['debug'](_0x510a('0x48f')+_0x4674d9['id']+_0x510a('0x490'));try{await this[_0x510a('0x410')](_0x54d229,_0x4674d9['channels'][0x0]);}catch(_0x412ff7){_0x19f076[_0x510a('0xd')][_0x510a('0xd1')]('Failed\x20to\x20hangup\x20last\x20channel\x20in\x20bridge:\x20'+_0x412ff7[_0x510a('0xc3')]);}return![];}_0x19f076[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x491')+_0x4674d9['id']+_0x510a('0x492')+_0x269297+'\x20channels');return![];}async[_0x510a('0x407')](_0x452880,_0x5a21da,_0x3695e2,_0x1ceded,_0x497971){const _0x4f31e9=this[_0x510a('0x408')](_0x5a21da);if(!_0x4f31e9){_0x19f076['default'][_0x510a('0x2b')]('There\x20is\x20no\x20bridgeMap\x20for\x20bridge\x20id:\x20'+_0x5a21da);await this['channelHangup'](_0x452880,_0x3695e2,_0x510a('0x411'));return;}if(_0x497971-_0x4f31e9[_0x510a('0x493')]>_0x1ceded){_0x19f076[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x494')+_0x5a21da);await this[_0x510a('0x410')](_0x452880,_0x3695e2,_0x510a('0x411'));return;}try{await _0x452880['channels'][_0x510a('0x2de')]({'channelId':_0x3695e2});await this['addChannelToBridge'](_0x452880,_0x4f31e9,_0x3695e2);if(!_0x4f31e9[_0x510a('0x424')]){await _0x452880[_0x510a('0x349')][_0x510a('0x2de')]({'channelId':_0x4f31e9[_0x510a('0x349')][0x0]});_0x4f31e9[_0x510a('0x424')]=!![];_0x4f31e9[_0x510a('0x495')]=_0x20ccd1['default'][_0x510a('0xd8')]();}}catch(_0x3db46e){_0x19f076['default'][_0x510a('0x2b')](_0x510a('0x496')+_0x3695e2+_0x510a('0x6e')+_0x5a21da,_0x3db46e);await this['channelHangup'](_0x452880,_0x3695e2,_0x510a('0x411'));}}async[_0x510a('0x413')](_0x182f2a,_0x2b1cf7,_0x32497a){let _0x1cadf0=await _0x182f2a[_0x510a('0x349')]['getChannelVar']({'channelId':_0x32497a,'variable':_0x510a('0x417')});_0x1cadf0=_0x1cadf0[_0x510a('0x342')];await this[_0x510a('0x497')](_0x182f2a,_0x2b1cf7,_0x32497a);_0x2b1cf7['to']=_0x1cadf0;_0x2b1cf7[_0x510a('0x495')]=_0x20ccd1['default'][_0x510a('0xd8')]();}async[_0x510a('0x497')](_0x46805e,_0x4fd9cb,_0xf3cbeb){_0x19f076[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x498')+_0xf3cbeb+'\x20to\x20bridge\x20'+_0x4fd9cb['id']+'\x20('+_0x4dcf1b[_0x510a('0xd')][_0x510a('0x339')](_0x4fd9cb[_0x510a('0x349')])+')');_0x4fd9cb['channels']['push'](_0xf3cbeb);try{await _0x46805e[_0x510a('0x462')][_0x510a('0x469')]({'bridgeId':_0x4fd9cb['id'],'channel':_0xf3cbeb});}catch(_0x24fa18){_0x19f076[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x499'),_0x24fa18);this[_0x510a('0x412')](_0x4fd9cb,_0xf3cbeb);this[_0x510a('0x410')](_0x46805e,_0xf3cbeb,_0x510a('0x411'));}}['removeBridgeMap'](_0x52ade8){delete this[_0x510a('0x48b')][_0x52ade8];}['getBridgeMap'](_0x2bea09){return this[_0x510a('0x48b')][_0x2bea09];}['getBridgeMapForChannel'](_0x1ef3fc){return _0x4dcf1b[_0x510a('0xd')][_0x510a('0x2b6')](this[_0x510a('0x48b')],_0x434aed=>{return _0x4dcf1b[_0x510a('0xd')][_0x510a('0x340')](_0x434aed[_0x510a('0x349')],_0x1ef3fc);});}[_0x510a('0x412')](_0x36c41b,_0x13d09e){_0x36c41b[_0x510a('0x349')]=_0x4dcf1b[_0x510a('0xd')]['filter'](_0x36c41b['channels'],_0x56a98b=>_0x56a98b!==_0x13d09e);}async[_0x510a('0x410')](_0x5e88df,_0xf35bf8,_0x131ce7=_0x510a('0x49a')){await _0x5e88df[_0x510a('0x349')][_0x510a('0x32c')]({'channelId':_0xf35bf8,'reason':_0x131ce7});}}_0x548bb8[_0x510a('0x489')]=ZuluBridge;return _0x386c2e[_0x510a('0x4')];};_0x5e4b0d[0x22]=function(_0x2b387b,_0x38570d){'use strict';Object[_0x510a('0x75')](_0x38570d,_0x510a('0x16'),{'value':!![]});var _0x16cfb4=require('auto-bind');var _0x588ae0=_0x413892(_0x16cfb4);var _0x340058=require(_0x510a('0x19'));var _0x3202f4=require('uuid/v4');var _0x3c91b6=_0x413892(_0x3202f4);var _0x26a5dd=_0x59c414(0x4,0x22);var _0x33cabe=_0x413892(_0x26a5dd);var _0x7513c=_0x59c414(0x28,0x22);var _0x407096=_0x413892(_0x7513c);var _0x2378d7=_0x59c414(0x29,0x22);function _0x413892(_0x111b27){return _0x111b27&&_0x111b27[_0x510a('0x16')]?_0x111b27:{'default':_0x111b27};}class ChatSessionController{constructor(_0x4d3713,_0x13c05f,_0x8afbe4,_0x2b00b4){(0x0,_0x588ae0[_0x510a('0xd')])(this);this['clientServer']=_0x8afbe4;this['session']=_0x13c05f;const _0x450323=_0x4d3713[_0x510a('0x1d2')];this[_0x510a('0x49b')]=new _0x407096['default']({'chat':_0x4d3713,'session':_0x13c05f,'BackendServer':_0x2b00b4,'ClientServer':_0x8afbe4});this['_onOpen']();}[_0x510a('0x49c')](_0x460682,_0x20bb8f){this[_0x510a('0x18d')][_0x510a('0xe7')]({'actionid':(0x0,_0x3c91b6[_0x510a('0xd')])(),'action':_0x2378d7[_0x510a('0x49d')],'state':_0x460682,'attempt':_0x20bb8f});switch(_0x460682){case _0x2378d7[_0x510a('0x49e')][_0x510a('0x433')]:case _0x2378d7[_0x510a('0x49e')][_0x510a('0x42d')]:{const _0x30bb7f=this[_0x510a('0x49f')]['getAllSessions']();for(let _0xf6a4d9 in _0x30bb7f){const _0x50f1cb=_0x30bb7f[_0xf6a4d9];if(!_0x50f1cb['connection']){continue;}_0x50f1cb['sendJSON']({'actionid':(0x0,_0x3c91b6[_0x510a('0xd')])(),'action':_0x2378d7[_0x510a('0x4a0')],'contactId':this['session'][_0x510a('0xe8')],'state':_0x460682});}break;}default:break;}}[_0x510a('0x4a1')](){_0x33cabe[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4a2'),this[_0x510a('0x18d')][_0x510a('0xe5')]);this[_0x510a('0x49c')](_0x2378d7[_0x510a('0x49e')][_0x510a('0x42d')],0x0);}[_0x510a('0x4a3')](){this['_onConnectionStatusChanged'](_0x2378d7[_0x510a('0x49e')][_0x510a('0x433')]);}[_0x510a('0x22d')](_0x2e77be){return new _0x340058[(_0x510a('0x50'))]((_0x435544,_0x4a1206)=>{if(this[_0x510a('0x49b')]['hasOwnProperty'](_0x2e77be[_0x510a('0xf7')])){return this[_0x510a('0x49b')][_0x2e77be['type']](_0x2e77be)[_0x510a('0x10')](_0x112c26=>_0x435544(_0x112c26))[_0x510a('0x13')](_0x5062cc=>_0x4a1206(_0x5062cc));}else{_0x4a1206(new Error('Method\x20not\x20available'));}});}}_0x38570d[_0x510a('0xd')]=ChatSessionController;return _0x2b387b[_0x510a('0x4')];};_0x5e4b0d[0x23]=function(_0x351e38,_0x2b0164){'use strict';Object[_0x510a('0x75')](_0x2b0164,_0x510a('0x16'),{'value':!![]});var _0x425461=require(_0x510a('0x79'));var _0x4a4c24=_0x5dcdae(_0x425461);var _0x8343f0=require(_0x510a('0x19'));var _0x19adb1=require(_0x510a('0x4a4'));var _0x5cfd09=_0x3c8933(_0x19adb1);var _0xd2a92=require('async');var _0x1c6e39=_0x5dcdae(_0xd2a92);function _0x3e2d17(){if(typeof WeakMap!==_0x510a('0x0'))return null;var _0x57ac31=new WeakMap();_0x3e2d17=function(){return _0x57ac31;};return _0x57ac31;}function _0x3c8933(_0x3c5695){if(_0x3c5695&&_0x3c5695[_0x510a('0x16')]){return _0x3c5695;}var _0x2e4a5d=_0x3e2d17();if(_0x2e4a5d&&_0x2e4a5d['has'](_0x3c5695)){return _0x2e4a5d['get'](_0x3c5695);}var _0x5f53dc={};if(_0x3c5695!=null){var _0x1799b5=Object[_0x510a('0x75')]&&Object[_0x510a('0x4a5')];for(var _0x5ac2e0 in _0x3c5695){if(Object[_0x510a('0x4a6')]['hasOwnProperty'][_0x510a('0x3')](_0x3c5695,_0x5ac2e0)){var _0x569887=_0x1799b5?Object[_0x510a('0x4a5')](_0x3c5695,_0x5ac2e0):null;if(_0x569887&&(_0x569887[_0x510a('0x180')]||_0x569887[_0x510a('0x4a7')])){Object['defineProperty'](_0x5f53dc,_0x5ac2e0,_0x569887);}else{_0x5f53dc[_0x5ac2e0]=_0x3c5695[_0x5ac2e0];}}}}_0x5f53dc[_0x510a('0xd')]=_0x3c5695;if(_0x2e4a5d){_0x2e4a5d[_0x510a('0x4a7')](_0x3c5695,_0x5f53dc);}return _0x5f53dc;}function _0x5dcdae(_0x3e21c0){return _0x3e21c0&&_0x3e21c0[_0x510a('0x16')]?_0x3e21c0:{'default':_0x3e21c0};}_0x4a4c24[_0x510a('0xd')][_0x510a('0x7b')]=!![];let _0x87310c;let _0x4c2c36;try{_0x87310c=require(_0x510a('0x4a8'));_0x4c2c36=require(_0x510a('0x4a9'));}catch(_0x2977a7){_0x87310c=null;_0x4c2c36=null;}const _0x304653=0x2;class Metadata{[_0x510a('0x2a4')](_0x2d1536,_0x37e08b){return new _0x8343f0['Promise']((_0x94a19b,_0x1ae15b)=>{if(!_0x87310c||!_0x4c2c36){_0x94a19b([]);return;}let _0x2f23f7=0x0;let _0x3fad64=[];let _0x57d73e=_0x5cfd09[_0x510a('0x2b6')](_0x2d1536);_0x1c6e39[_0x510a('0xd')]['each'](_0x57d73e,(_0x3d888b,_0xb8fba5)=>{if(_0x3d888b['type']==='url'){_0x2f23f7++;if(_0x304653>=_0x2f23f7){let _0x46960a=_0x3d888b[_0x510a('0x4aa')]['replace'](/^https:\/\/www\.|^http:\/\/www\.|^https:\/\/|^http:\/\/|^www\./,'');_0x37e08b['kvGet'](_0x510a('0x4ab'),_0x46960a)['then'](_0x3757b4=>{let _0x4c46fc=![];if(_0x3757b4){let _0x268f73=_0x4a4c24[_0x510a('0xd')][_0x510a('0xd8')]()-_0x3757b4[_0x510a('0x4ac')];if(_0x268f73<=0xe10){_0x3fad64[_0x510a('0x4ad')](_0x3757b4['metadata']);}else{_0x4c46fc=!![];}}else{_0x4c46fc=!![];}if(_0x4c46fc){;(async()=>{try{const {body:html,url}=await _0x4c2c36(_0x3d888b[_0x510a('0x4aa')],{'timeout':0xbb8});const _0x528c65=await _0x87310c({'html':html,'url':url});_0x3fad64[_0x510a('0x4ad')](_0x528c65);_0x37e08b[_0x510a('0x6c')](_0x510a('0x4ab'),{'timestamp':_0x4a4c24[_0x510a('0xd')][_0x510a('0xd8')](),'metadata':_0x528c65},_0x46960a)[_0x510a('0x10')](_0x15f915=>{_0xb8fba5();})[_0x510a('0x13')](_0x544cd8=>{_0xb8fba5(_0x544cd8);});}catch(_0xb77ea6){_0xb8fba5();}})();}else{_0xb8fba5();}})[_0x510a('0x13')](_0x289e97=>{_0xb8fba5(_0x289e97);});}else{_0xb8fba5();}}else{_0xb8fba5();}},_0x486d9c=>{if(_0x486d9c){_0x1ae15b(_0x486d9c);}else{_0x94a19b(_0x3fad64);}});});}}_0x2b0164[_0x510a('0xd')]=new Metadata();return _0x351e38[_0x510a('0x4')];};_0x5e4b0d[0x24]=function(_0xe7355f,_0x15aa22){'use strict';Object['defineProperty'](_0x15aa22,_0x510a('0x16'),{'value':!![]});var _0x5289d5=require(_0x510a('0x106'));var _0x2b8a7d=_0x31ad49(_0x5289d5);var _0x8f7760=require('uuid/v4');var _0x4a4f49=_0x31ad49(_0x8f7760);var _0x593500=_0x59c414(0x2a,0x24);var _0x2da51d=_0x31ad49(_0x593500);var _0x315a7c=_0x59c414(0x2b,0x24);var _0x205670=_0x31ad49(_0x315a7c);var _0x2b6877=_0x59c414(0x4,0x24);var _0x22ee9f=_0x31ad49(_0x2b6877);function _0x31ad49(_0x4f4626){return _0x4f4626&&_0x4f4626['__esModule']?_0x4f4626:{'default':_0x4f4626};}class ScreenSharingServer extends _0x2b8a7d['default']{constructor(_0x205d47){super();this['_Zulu']=_0x205d47;this['users']={};this[_0x510a('0x4ae')]={};this[_0x510a('0x4af')]();}[_0x510a('0x4af')](){Promise[_0x510a('0x226')]([this[_0x510a('0x1d2')]['getConfig'](_0x510a('0x4b0')),this['_Zulu']['getConfig'](_0x510a('0x4b1'))])['then'](_0x5a2c3a=>{this[_0x510a('0x4b2')]=new _0x2da51d[(_0x510a('0xd'))](_0x5a2c3a[0x0],_0x5a2c3a[0x1]);});}[_0x510a('0x2ca')](_0x572b98){return new Promise((_0x393864,_0x46f0f7)=>{var _0x4a4754=(0x0,_0x4a4f49['default'])();if(this[_0x510a('0x4ae')][_0x4a4754]){_0x393864(this[_0x510a('0x4ae')][_0x4a4754]);return;}var _0x5cba4c=new _0x205670[(_0x510a('0xd'))](_0x4a4754,_0x572b98);this[_0x510a('0x4ae')][_0x4a4754]=_0x5cba4c;_0x22ee9f[_0x510a('0xd')]['info'](_0x510a('0x4b3')+_0x4a4754+_0x510a('0x4b4'));this[_0x510a('0x4b2')][_0x510a('0x4b5')](_0x5cba4c)[_0x510a('0x10')](()=>{_0x22ee9f[_0x510a('0xd')][_0x510a('0x11')]('ROOMS:\x20',this[_0x510a('0x4ae')]);_0x393864(this[_0x510a('0x4ae')][_0x4a4754]);})[_0x510a('0x13')](_0x43710c=>{_0x46f0f7(_0x43710c);});});}[_0x510a('0x2d8')](_0x3d19c0,_0xd6fc1f){if(this['rooms'][_0x3d19c0]&&!(_0xd6fc1f[_0x510a('0x2d3')]==_0x315a7c[_0x510a('0x4b6')]&&this['rooms'][_0x3d19c0][_0x510a('0x4b7')]())){this[_0x510a('0x4ae')][_0x3d19c0][_0x510a('0x4b8')](_0xd6fc1f);_0x22ee9f[_0x510a('0xd')][_0x510a('0x11')]('%s\x20%s\x20joined\x20room\x20%s',_0xd6fc1f[_0x510a('0x2d3')],_0xd6fc1f[_0x510a('0xe6')],_0x3d19c0);return this[_0x510a('0x4ae')][_0x3d19c0];}else{return null;}}['leaveRoom'](_0x491047,_0x303360){if(this['rooms'][_0x491047]){const _0x2d359c=this['rooms'][_0x491047][_0x510a('0x4b9')](_0x303360);if(_0x2d359c&&_0x303360[_0x510a('0x2d3')]===_0x315a7c['TRANSMITTER_ROLE']){this[_0x510a('0x4ae')][_0x491047][_0x510a('0x12f')]();}_0x22ee9f[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4ba'),_0x303360['role'],_0x303360[_0x510a('0xe6')],_0x491047);return _0x2d359c;}else{return![];}}['onAnswer'](_0x5daf9b,_0x36deda){this[_0x510a('0x59')](_0x510a('0x2d6')+_0x5daf9b,_0x36deda);}}_0x15aa22['default']=ScreenSharingServer;return _0xe7355f['exports'];};_0x5e4b0d[0x25]=function(_0x920035,_0x227be9){'use strict';Object[_0x510a('0x75')](_0x227be9,_0x510a('0x16'),{'value':!![]});class BaseSession{constructor(_0x314730,_0x4c6619){this['id']=_0x314730;this[_0x510a('0x4bb')]=_0x4c6619;}get['connection'](){return this[_0x510a('0x4bb')];}[_0x510a('0x22b')](_0x2a7e00){this[_0x510a('0xe7')]({'status':![],'actionid':_0x2a7e00});}['sendTrue'](_0x1575bc){this['sendJSON']({'status':!![],'actionid':_0x1575bc});}[_0x510a('0xfb')](_0x456f90,_0x136f0b,_0x2f6e20){const _0x4f37a5={'status':![],'actionid':_0x456f90,'message':_0x136f0b};if(_0x2f6e20){_0x4f37a5[_0x510a('0x4bc')]=_0x2f6e20;}this[_0x510a('0xe7')](_0x4f37a5,_0x510a('0xd1'));}[_0x510a('0xe7')](_0x57fb17,_0x5de0e8='debug'){this[_0x510a('0x4bb')][_0x510a('0x4bd')](JSON['stringify'](_0x57fb17));}}_0x227be9[_0x510a('0x305')]=BaseSession;return _0x920035['exports'];};_0x5e4b0d[0x26]=function(_0x219fd9,_0xbf5918){'use strict';Object[_0x510a('0x75')](_0xbf5918,_0x510a('0x16'),{'value':!![]});_0xbf5918[_0x510a('0x322')]=undefined;var _0x1a7bb4=_0x59c414(0x2c,0x26);var _0x1f97e1=_0x59c414(0x4,0x26);var _0x1f11e3=_0x1a8e53(_0x1f97e1);function _0x1a8e53(_0x188008){return _0x188008&&_0x188008[_0x510a('0x16')]?_0x188008:{'default':_0x188008};}class CallCollection{constructor(){this[_0x510a('0x4be')]={};this[_0x510a('0x4bf')]={};}[_0x510a('0x37b')](_0x42fd32,_0x2314f3,_0x4cfa05,_0x390649,_0x43d5f9){_0x1f11e3[_0x510a('0xd')]['debug'](_0x510a('0x4c0')+_0x42fd32+',\x20'+_0x2314f3+',\x20'+_0x4cfa05+',\x20'+_0x390649+',\x20'+_0x43d5f9+')');this[_0x510a('0x4be')][_0x42fd32]=new _0x1a7bb4[(_0x510a('0x14d'))](_0x42fd32,_0x2314f3,_0x4cfa05,_0x390649,_0x43d5f9);return this[_0x510a('0x4be')][_0x42fd32];}[_0x510a('0x4c1')](_0xd1f2fb){if(this['isCallDefined'](_0xd1f2fb)){delete this['calls'][_0xd1f2fb];}else{_0x1f11e3[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x4c2'));}}[_0x510a('0x4c3')](_0xdfb762){return this['calls'][_0xdfb762]!==undefined&&this[_0x510a('0x4be')][_0xdfb762]!==null;}[_0x510a('0x36e')](_0x4198cf){return this[_0x510a('0x4c3')](_0x4198cf)?this[_0x510a('0x4be')][_0x4198cf]:undefined;}[_0x510a('0x4c4')](){return this[_0x510a('0x4be')];}}_0xbf5918[_0x510a('0x322')]=CallCollection;_0xbf5918[_0x510a('0xd')]=new CallCollection();return _0x219fd9[_0x510a('0x4')];};_0x5e4b0d[0x27]=function(_0x668623,_0x5b4fdd){'use strict';Object[_0x510a('0x75')](_0x5b4fdd,'__esModule',{'value':!![]});_0x5b4fdd[_0x510a('0x415')]=undefined;var _0x200044=_0x59c414(0x4,0x27);var _0x4f6bf3=_0x218117(_0x200044);var _0x3c13f3=require(_0x510a('0x19'));function _0x218117(_0x339494){return _0x339494&&_0x339494[_0x510a('0x16')]?_0x339494:{'default':_0x339494};}class StasisCall{constructor(_0xfe1124,_0x450b62){this[_0x510a('0x4c5')]=_0xfe1124;this[_0x510a('0x268')]=_0x450b62;this['_finished']=![];}['getChannelVariable'](_0x179bca){return new _0x3c13f3[(_0x510a('0x50'))]((_0x39466a,_0x325753)=>{this['ari'][_0x510a('0x349')][_0x510a('0x4c6')]({'channelId':this['channel']['id'],'variable':_0x179bca})[_0x510a('0x10')](_0x36601a=>{_0x39466a(_0x36601a);})['catch'](_0x5351a6=>{_0x39466a('');});});}['setInteractionId'](_0x24d512){return this[_0x510a('0x4c5')]['channels']['setChannelVar']({'channelId':this['channel']['id'],'variable':_0x510a('0x4c7'),'value':_0x24d512});}['setDialString'](_0x336949){return this[_0x510a('0x4c5')][_0x510a('0x349')]['setChannelVar']({'channelId':this[_0x510a('0x268')]['id'],'variable':_0x510a('0x4c8'),'value':_0x336949});}[_0x510a('0x42c')](_0x1751ea){return this['ari'][_0x510a('0x349')][_0x510a('0x46a')]({'channelId':this[_0x510a('0x268')]['id'],'variable':'ENDPOINTSTATUS','value':_0x1751ea});}[_0x510a('0x43a')](){if(!this[_0x510a('0x4c9')]){this[_0x510a('0x4c9')]=!![];return this['ari'][_0x510a('0x349')]['continueInDialplan']({'channelId':this[_0x510a('0x268')]['id']});}else{return _0x3c13f3[_0x510a('0x50')][_0x510a('0x6')]();}}}_0x5b4fdd['StasisCall']=StasisCall;return _0x668623['exports'];};_0x5e4b0d[0x28]=function(_0x2dce40,_0x4a94ee){'use strict';Object[_0x510a('0x75')](_0x4a94ee,'__esModule',{'value':!![]});var _0x11c247=require(_0x510a('0x19'));var _0x164a57=require('auto-bind');var _0x2d18fc=_0x532dad(_0x164a57);var _0x559665=require(_0x510a('0x1d1'));var _0x209578=_0x532dad(_0x559665);var _0x32df5b=require('linkifyjs');var _0x1b74ba=_0x388c07(_0x32df5b);var _0x4cb81a=require(_0x510a('0x4ca'));var _0x29847f=_0x532dad(_0x4cb81a);var _0x36504d=require(_0x510a('0x108'));var _0x26dc90=_0x532dad(_0x36504d);var _0x387340=_0x59c414(0x4,0x28);var _0x10e79a=_0x532dad(_0x387340);var _0x332bf5=_0x59c414(0x23,0x28);var _0x3670b7=_0x532dad(_0x332bf5);function _0x4b72fe(){if(typeof WeakMap!==_0x510a('0x0'))return null;var _0x5b9443=new WeakMap();_0x4b72fe=function(){return _0x5b9443;};return _0x5b9443;}function _0x388c07(_0x40535f){if(_0x40535f&&_0x40535f[_0x510a('0x16')]){return _0x40535f;}var _0x117a45=_0x4b72fe();if(_0x117a45&&_0x117a45[_0x510a('0x250')](_0x40535f)){return _0x117a45[_0x510a('0x180')](_0x40535f);}var _0x29c824={};if(_0x40535f!=null){var _0x5cdb91=Object[_0x510a('0x75')]&&Object[_0x510a('0x4a5')];for(var _0x41547f in _0x40535f){if(Object[_0x510a('0x4a6')][_0x510a('0x4cb')][_0x510a('0x3')](_0x40535f,_0x41547f)){var _0x244942=_0x5cdb91?Object[_0x510a('0x4a5')](_0x40535f,_0x41547f):null;if(_0x244942&&(_0x244942[_0x510a('0x180')]||_0x244942[_0x510a('0x4a7')])){Object[_0x510a('0x75')](_0x29c824,_0x41547f,_0x244942);}else{_0x29c824[_0x41547f]=_0x40535f[_0x41547f];}}}}_0x29c824[_0x510a('0xd')]=_0x40535f;if(_0x117a45){_0x117a45[_0x510a('0x4a7')](_0x40535f,_0x29c824);}return _0x29c824;}function _0x532dad(_0x31b0bf){return _0x31b0bf&&_0x31b0bf['__esModule']?_0x31b0bf:{'default':_0x31b0bf};}(0x0,_0x29847f[_0x510a('0xd')])(_0x1b74ba);class ChatRPC{constructor({chat,session,BackendServer,ClientServer}){this[_0x510a('0x4cc')]=chat;this['_BackendServer']=BackendServer;this[_0x510a('0x1d3')]=ClientServer;this[_0x510a('0x18d')]=session;(0x0,_0x2d18fc[_0x510a('0xd')])(this);}async[_0x510a('0x4cd')](_0x2ced7b){if(!_0x2ced7b[_0x510a('0x4ce')]||!_0x2ced7b[_0x510a('0x351')]){throw new Error('Parameters\x20text\x20and\x20interactionId\x20are\x20required');}const _0x28eb50=await this[_0x510a('0x1d4')][_0x510a('0xad')]['getInteractionByID'](_0x2ced7b[_0x510a('0x351')]);if(_0x26dc90[_0x510a('0xd')][_0x510a('0x1ee')](_0x28eb50)||!_0x26dc90[_0x510a('0xd')][_0x510a('0x250')](_0x28eb50,_0x510a('0x12f'))||!_0x26dc90[_0x510a('0xd')][_0x510a('0x250')](_0x28eb50,'contacts.users')){throw new Error(_0x510a('0x4cf'));}if(!_0x28eb50['contacts']['users'][this[_0x510a('0x18d')]['contactuuid']]){throw new Error(_0x510a('0x4d0'));}if(_0x28eb50[_0x510a('0x12f')]!=='0'){throw new Error(_0x510a('0x4d1'));}const _0xd23f2f=await this[_0x510a('0x4d2')](_0x28eb50,_0x2ced7b[_0x510a('0x4ce')]);const _0x262e9f=await this[_0x510a('0x4d3')](_0x28eb50,_0xd23f2f,_0x2ced7b[_0x510a('0x4ce')]);const _0x206ef1={'text':_0x2ced7b[_0x510a('0x4ce')]};const _0x264c09=await this[_0x510a('0x1d4')][_0x510a('0xad')]['saveMultipleStreams'](_0x2ced7b['interactionId'],_0x262e9f,this['session'][_0x510a('0xe8')],'CHAT_MESSAGE',_0x206ef1,_0x2ced7b[_0x510a('0x4ce')]);this[_0x510a('0x2a4')](_0x2ced7b[_0x510a('0x351')],_0x264c09['allStreams'],_0x2ced7b[_0x510a('0x4ce')]);return _0x264c09;}async['getMetadata'](_0x197289,_0x1ee715,_0x20bd7f){let _0x44613d;try{_0x44613d=await _0x3670b7[_0x510a('0xd')][_0x510a('0x2a4')](_0x20bd7f,this[_0x510a('0x4cc')][_0x510a('0x1d2')]);}catch(_0x16beeb){_0x10e79a[_0x510a('0xd')][_0x510a('0xd1')](_0x510a('0x4d4')+_0x16beeb);return;}if(_0x44613d[_0x510a('0x13c')]>0x0){const _0x117ca5={'text':_0x20bd7f,'metadata':_0x44613d};try{await _0x11c247[_0x510a('0x50')][_0x510a('0x226')](_0x26dc90[_0x510a('0xd')][_0x510a('0x21f')](_0x1ee715,_0x593a33=>this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x1b3')](_0x593a33,_0x197289,_0x117ca5,_0x44613d)));}catch(_0x4f8cc4){_0x10e79a[_0x510a('0xd')]['error']('updateBodyStream\x20failed:\x20'+_0x4f8cc4);}}}async[_0x510a('0x4d5')](_0x600c37){if(!_0x600c37[_0x510a('0x351')]){throw new Error('Parameter\x20interactionId\x20is\x20required');}let _0x16cf9a=await this[_0x510a('0x1d4')][_0x510a('0xad')]['getInteractionByID'](_0x600c37['interactionId']);if(!_0x16cf9a){throw new Error('Interaction\x20'+_0x600c37[_0x510a('0x351')]+'\x20do\x20not\x20exist');}if(!_0x26dc90[_0x510a('0xd')]['has'](_0x16cf9a,_0x510a('0x12f'))||!_0x26dc90[_0x510a('0xd')][_0x510a('0x250')](_0x16cf9a,_0x510a('0x4d6'))){throw new Error('Interaction\x20do\x20not\x20have\x20necessary\x20properties');}if(!_0x16cf9a[_0x510a('0x23e')][_0x510a('0x2cb')][this['session'][_0x510a('0xe8')]]){throw new Error(_0x510a('0x4d7'));}if(_0x16cf9a[_0x510a('0x12f')]!=='0'){throw new Error(_0x510a('0x4d1'));}let _0x4cd823=this[_0x510a('0x1d3')][_0x510a('0xa2')]();return new _0x11c247[(_0x510a('0x50'))]((_0x264964,_0x37d956)=>{_0x209578['default']['eachSeries'](_0x4cd823,(_0x449897,_0x2db05c)=>{if(_0x449897[_0x510a('0xe8')]!==this[_0x510a('0x18d')]['contactuuid']&&_0x16cf9a['contacts']['users'][_0x449897[_0x510a('0xe8')]]){_0x449897['sendJSON']({'action':_0x510a('0x4d8'),'contactId':this[_0x510a('0x18d')][_0x510a('0xe8')],'interactionId':_0x600c37[_0x510a('0x351')]});}_0x2db05c();},_0x41bd82=>{if(_0x41bd82){return _0x37d956(_0x41bd82);}return _0x264964(!![]);});});}[_0x510a('0x4d2')](_0x5ada48,_0x7f1020){return new _0x11c247[(_0x510a('0x50'))]((_0x3af598,_0x4f8584)=>{if(_0x5ada48[_0x510a('0xf7')]!==_0x510a('0x45e')){let _0x56f954=[];let _0x14ce6e=_0x1b74ba['find'](_0x7f1020);if(_0x14ce6e[_0x510a('0x13c')]>0x0){_0x209578[_0x510a('0xd')][_0x510a('0x237')](_0x14ce6e,(_0x14c664,_0x3bb53e)=>{if(_0x14c664[_0x510a('0xf7')]===_0x510a('0x4d9')){let _0x59c150=_0x14c664['href'][_0x510a('0x1fb')](/^\//,'');this[_0x510a('0x1d4')][_0x510a('0xad')][_0x510a('0x30a')](_0x59c150)['then'](_0x4ace99=>{if(_0x4ace99){_0x56f954['push'](_0x4ace99);}else if(_0x59c150===_0x510a('0x226')){_0x56f954['push']({'id':_0x510a('0x226')});}_0x3bb53e();})['catch'](_0x385769=>{_0x3bb53e(_0x385769);});}else{_0x3bb53e();}},_0x28a1ea=>{if(_0x28a1ea){return _0x4f8584(_0x28a1ea);}else{return _0x3af598(_0x56f954);}});}else{return _0x3af598([]);}}else{return _0x3af598([]);}});}[_0x510a('0x4d3')](_0x547cc6,_0x6fdb41,_0x6d9b05){return new _0x11c247['Promise']((_0x1249d0,_0x1cd59d)=>{const _0x5d7a5f=Object[_0x510a('0x13b')](_0x547cc6['contacts'][_0x510a('0x2cb')]);if(!_0x5d7a5f[_0x510a('0x13c')]||_0x5d7a5f[_0x510a('0x13c')]===0x0){_0x10e79a[_0x510a('0xd')]['error']('No\x20other\x20parties');_0x1cd59d(new Error(_0x510a('0x4da')));return;}let _0x13692b=[];_0x209578['default'][_0x510a('0x237')](_0x5d7a5f,(_0x4ff7c1,_0x763a64)=>{let _0x1b0d37={'userman_id':_0x547cc6[_0x510a('0x23e')][_0x510a('0x2cb')][_0x4ff7c1]['id'],'linkedid':_0x4ff7c1};_0x13692b[_0x510a('0x295')](_0x1b0d37);let _0x339e44=![];const _0x3ed980=Object[_0x510a('0x13b')](_0x547cc6[_0x510a('0x23e')][_0x510a('0x2cb')][_0x4ff7c1][_0x510a('0x188')]);if(_0x3ed980[_0x510a('0x13c')]>0x0){_0x339e44=!![];}const _0x1af87e=_0x547cc6[_0x510a('0x23e')][_0x510a('0x2cb')][_0x4ff7c1]['notification'];let _0x58ff31=_0x6fdb41['find'](_0x567160=>{return _0x567160['id']===_0x547cc6['contacts']['users'][_0x4ff7c1]['id']||_0x567160['id']===_0x510a('0x226')&&_0x1af87e===_0x510a('0x49a');});const _0x365d05=!!_0x58ff31;if(_0x365d05){_0x6fdb41=_0x6fdb41[_0x510a('0x33b')](_0x4fd04c=>{return _0x4fd04c['id']!==_0x547cc6[_0x510a('0x23e')][_0x510a('0x2cb')][_0x4ff7c1]['id'];});}if(!_0x339e44&&(_0x547cc6[_0x510a('0xf7')]===_0x510a('0x45e')||_0x365d05||_0x1af87e===_0x510a('0x4db'))){const _0x4075e9=_0x547cc6[_0x510a('0xf7')]!==_0x510a('0x45e')?_0x547cc6[_0x510a('0x4dc')]:'';this[_0x510a('0x1d4')]['api'][_0x510a('0x308')](_0x547cc6[_0x510a('0x23e')]['users'][_0x4ff7c1]['id'],this[_0x510a('0x18d')]['_user']['id'],_0x6d9b05,_0x365d05,_0x4075e9);}if(_0x547cc6[_0x510a('0xf7')]===_0x510a('0x45e')&&_0x4ff7c1!==this[_0x510a('0x18d')][_0x510a('0xe8')]){this[_0x510a('0x1d4')][_0x510a('0x2c5')][_0x510a('0x1c3')](_0x547cc6[_0x510a('0x23e')]['users'][_0x4ff7c1]['id'],this[_0x510a('0x18d')][_0x510a('0x221')]['id'],_0x6d9b05,_0x547cc6['id']);}_0x763a64();},_0x41c526=>{if(_0x41c526){_0x1cd59d(_0x41c526);}else{_0x6fdb41=_0x6fdb41['filter'](_0x11efc2=>{return _0x11efc2['id']!==_0x510a('0x226');});if(_0x6fdb41[_0x510a('0x13c')]>0x0&&_0x547cc6[_0x510a('0xf7')]===_0x510a('0x470')){this[_0x510a('0x4dd')](_0x6fdb41,_0x547cc6['id'],_0x6d9b05,_0x547cc6[_0x510a('0x4dc')]);}return _0x1249d0(_0x13692b);}});});}[_0x510a('0x4dd')](_0x516d76,_0x5ee421,_0x8f8e16,_0x5660c5){return new _0x11c247['Promise']((_0x12321b,_0x51f9f3)=>{let _0x488d33=Object[_0x510a('0x13b')](_0x516d76);if(_0x488d33['length']===0x0){_0x12321b();return;}_0x209578[_0x510a('0xd')][_0x510a('0x237')](_0x516d76,(_0x1a7fe0,_0x318c71)=>{let _0x4c1999=Object[_0x510a('0x13b')](_0x1a7fe0[_0x510a('0x188')]);if(_0x4c1999['length']>0x0){_0x209578[_0x510a('0xd')][_0x510a('0x237')](_0x1a7fe0[_0x510a('0x188')],(_0x50099b,_0x1a7126)=>{let _0x146581=this[_0x510a('0x1d3')][_0x510a('0xa1')](_0x50099b[_0x510a('0x4de')]);if(_0x146581){let _0x144c48={'action':'group:invite_received','message':{'text':_0x8f8e16,'interactionId':_0x5ee421,'invitedBy':this[_0x510a('0x18d')][_0x510a('0xe8')]}};_0x146581[_0x510a('0xe7')](_0x144c48);}_0x1a7126();},_0x2c43df=>{if(_0x2c43df){_0x318c71(_0x2c43df);}else{_0x318c71();}});}else{this['_BackendServer'][_0x510a('0xad')][_0x510a('0x308')](_0x1a7fe0['id'],this[_0x510a('0x18d')]['_user']['id'],_0x8f8e16,!![],_0x5660c5);_0x318c71();}},_0x56645f=>{if(_0x56645f){return _0x51f9f3(_0x56645f);}else{return _0x12321b();}});});}}_0x4a94ee[_0x510a('0xd')]=ChatRPC;return _0x2dce40[_0x510a('0x4')];};_0x5e4b0d[0x29]=function(_0x260ce7,_0x47ac81){'use strict';Object[_0x510a('0x75')](_0x47ac81,_0x510a('0x16'),{'value':!![]});const _0x5b93ab=_0x47ac81['CHAT_CONNECTION_STATUS']={'CONNECTED':_0x510a('0x11b'),'RECONNECTING':_0x510a('0x4df'),'DISCONNECTED':_0x510a('0x4e0')};const _0x40c012=_0x47ac81['CONNECTION_STATUS_CHANGE_EVENT']=_0x510a('0x4e1');const _0x1108bb=_0x47ac81[_0x510a('0x4a0')]=_0x510a('0x4e2');return _0x260ce7[_0x510a('0x4')];};_0x5e4b0d[0x2a]=function(_0x259922,_0x2cee29){'use strict';Object[_0x510a('0x75')](_0x2cee29,_0x510a('0x16'),{'value':!![]});var _0x33dabb=_0x59c414(0x4,0x2a);var _0x609dbd=_0x14c6db(_0x33dabb);var _0x102b6d=require(_0x510a('0x4e3'));var _0x4bfbde=_0x14c6db(_0x102b6d);function _0x14c6db(_0x2b8167){return _0x2b8167&&_0x2b8167[_0x510a('0x16')]?_0x2b8167:{'default':_0x2b8167};}const _0x2c91f3=_0x4bfbde[_0x510a('0xd')][_0x510a('0x4e4')]['RTCPeerConnection'];const _0x169ad8={'logLevel':_0x510a('0x4a'),'rtcIPv4':!![],'rtcIPv6':![],'rtcMinPort':0x4e21,'rtcMaxPort':0xc34f};const _0x4e8a2b={'mediaCodecs':[{'kind':_0x510a('0x4e5'),'name':_0x510a('0x4e6'),'clockRate':0xbb80,'payloadType':0x64},{'kind':_0x510a('0x4e7'),'name':_0x510a('0x4e8'),'clockRate':0x15f90,'payloadType':0x7b},{'kind':'video','name':'video/vp8','clockRate':0x15f90,'payloadType':0x7b}]};class MediasoupServer{constructor(_0x15b8fa=0x4e21,_0x4aec35=0xea5f){this[_0x510a('0x4e9')](_0x15b8fa,_0x4aec35);}[_0x510a('0x4e9')](_0x4f1865,_0x5cc5a4){_0x169ad8[_0x510a('0x4ea')]=_0x4f1865;_0x169ad8['rtcMaxPort']=_0x5cc5a4;_0x609dbd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4eb'),_0x169ad8[_0x510a('0x4ea')]);_0x609dbd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4ec'),_0x169ad8[_0x510a('0x4ed')]);this[_0x510a('0x4ee')]=_0x4bfbde[_0x510a('0xd')][_0x510a('0x4ef')](_0x169ad8);}[_0x510a('0x4b5')](_0x1e4b8d){return new Promise((_0x28337d,_0x5c1cf7)=>{this[_0x510a('0x4ee')][_0x510a('0x2ca')](_0x4e8a2b)[_0x510a('0x10')](_0x22c796=>{_0x22c796[_0x510a('0x2cd')]=_0x1e4b8d[_0x510a('0x2cd')];_0x609dbd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4f0'),_0x22c796[_0x510a('0x2cd')]);_0x1e4b8d['on']('join',(_0x5a7cef,_0x3264ca)=>{_0x609dbd['default'][_0x510a('0x11')](_0x510a('0x4f1'),_0x22c796[_0x510a('0x2cd')],_0x5a7cef[_0x510a('0xe6')]);if(_0x22c796[_0x510a('0x4f2')]){_0x609dbd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x4f3'),_0x5a7cef[_0x510a('0xe6')],_0x22c796['roomId']);}this[_0x510a('0x4f4')](_0x5a7cef,_0x3264ca,_0x1e4b8d,_0x22c796);});_0x1e4b8d['on'](_0x510a('0x12f'),function(){_0x22c796[_0x510a('0x12f')]();});_0x22c796['on'](_0x510a('0x12f'),function(_0x4348ce){if(_0x4348ce){_0x609dbd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x4f5'),_0x22c796[_0x510a('0x2cd')]);}_0x1e4b8d[_0x510a('0x64')](_0x510a('0x339'));});_0x28337d();})['catch'](_0x1c4b5b=>{_0x609dbd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x4f6'),_0x1c4b5b);});});}[_0x510a('0x4f4')](_0x54f11e,_0x141a59,_0x185cdb,_0x448a34){const _0x103060=_0x448a34['Peer'](_0x54f11e[_0x510a('0xe6')]+Math[_0x510a('0x4f7')]());_0x609dbd[_0x510a('0xd')]['info']('Participant\x20%s\x20is\x20using\x20planB:\x20',_0x54f11e['username'],_0x54f11e['isPlanB']);var _0x53470f=new _0x2c91f3({'peer':_0x103060,'usePlanB':_0x54f11e[_0x510a('0x2d2')]});_0x53470f[_0x510a('0x4f8')](_0x54f11e[_0x510a('0x2d0')])[_0x510a('0x10')](()=>{_0x609dbd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4f9'),_0x54f11e['username']);this[_0x510a('0x4fa')](_0x54f11e,_0x53470f,_0x185cdb);})[_0x510a('0x13')](_0xfbc468=>{_0x609dbd[_0x510a('0xd')][_0x510a('0x11')](_0x510a('0x4fb'),_0xfbc468);if(!_0x448a34['closed']){_0x53470f[_0x510a('0x12f')]();}});_0x53470f['on'](_0x510a('0x4fc'),()=>{this[_0x510a('0x4fa')](_0x54f11e,_0x53470f,_0x185cdb);});_0x185cdb['on'](_0x510a('0x4fd'),_0x4fae63=>{if(_0x54f11e[_0x510a('0xe6')]===_0x4fae63[_0x510a('0xe6')]&&!_0x448a34[_0x510a('0x4f2')]){_0x53470f[_0x510a('0x12f')]();}});}[_0x510a('0x4fa')](_0x3abb0f,_0x4d259d,_0x2c7901){return new Promise((_0x3603ed,_0x598a9e)=>{_0x4d259d[_0x510a('0x4fe')]({'offerToReceiveAudio':0x1,'offerToReceiveVideo':0x1})[_0x510a('0x10')](_0x49df9f=>{return _0x4d259d[_0x510a('0x4ff')](_0x49df9f);})[_0x510a('0x10')](()=>{return _0x3abb0f[_0x510a('0x2d5')](_0x4d259d[_0x510a('0x500')]['serialize']());})[_0x510a('0x10')](_0x4c5b39=>{return _0x4d259d[_0x510a('0x501')](_0x4c5b39);})[_0x510a('0x10')](()=>{_0x3603ed();})[_0x510a('0x13')](_0x4d4d93=>{_0x609dbd[_0x510a('0xd')][_0x510a('0x2b')](_0x510a('0x502'),_0x4d4d93);_0x4d259d[_0x510a('0x503')]();_0x598a9e(_0x4d4d93);});});}}_0x2cee29[_0x510a('0xd')]=MediasoupServer;return _0x259922[_0x510a('0x4')];};_0x5e4b0d[0x2b]=function(_0x122408,_0x182894){'use strict';Object[_0x510a('0x75')](_0x182894,_0x510a('0x16'),{'value':!![]});_0x182894['VIEWER_ROLE']=_0x182894['TRANSMITTER_ROLE']=undefined;var _0x462d14=require(_0x510a('0x106'));var _0x422d78=_0x46b624(_0x462d14);function _0x46b624(_0x59f8cf){return _0x59f8cf&&_0x59f8cf[_0x510a('0x16')]?_0x59f8cf:{'default':_0x59f8cf};}const _0x4826ec=_0x182894['TRANSMITTER_ROLE']=_0x510a('0x504');const _0x1cf4bf=_0x182894[_0x510a('0x505')]='viewer';class Room extends _0x422d78['default']{constructor(_0x3189cd,_0x30ec47){super();this[_0x510a('0x2cd')]=_0x3189cd;this[_0x510a('0x167')]=_0x30ec47;this[_0x510a('0x2cb')]={};}[_0x510a('0x4b8')](_0x23f706){if(this[_0x510a('0x2cb')][_0x23f706[_0x510a('0xe6')]]){return![];}else{this['users'][_0x23f706[_0x510a('0xe6')]]=_0x23f706;_0x23f706[_0x510a('0x506')]=this;this[_0x510a('0x59')](_0x510a('0x339'),_0x23f706);return!![];}}[_0x510a('0x4b9')](_0x3ceee6){if(!this['users'][_0x3ceee6[_0x510a('0xe6')]]){return![];}else{this[_0x510a('0x59')](_0x510a('0x4fd'),this[_0x510a('0x2cb')][_0x3ceee6['username']]);delete this[_0x510a('0x2cb')][_0x3ceee6[_0x510a('0xe6')]];return!![];}}[_0x510a('0x4b7')](){for(var _0x490bd5=0x0,_0x1b67de=Object[_0x510a('0x13b')](this['users']);_0x490bd5<_0x1b67de[_0x510a('0x13c')];_0x490bd5++){var _0x439e10=_0x1b67de[_0x490bd5];if(this[_0x510a('0x2cb')][_0x439e10][_0x510a('0x2d3')]==_0x4826ec){return!![];}}return![];}[_0x510a('0x12f')](){this[_0x510a('0x59')]('close');}}_0x182894[_0x510a('0xd')]=Room;return _0x122408[_0x510a('0x4')];};_0x5e4b0d[0x2c]=function(_0x121f55,_0x978df6){'use strict';Object[_0x510a('0x75')](_0x978df6,_0x510a('0x16'),{'value':!![]});_0x978df6[_0x510a('0x14d')]=undefined;var _0xcd604c=_0x59c414(0x4,0x2c);var _0x1741d7=_0x322139(_0xcd604c);var _0x540a67=_0x59c414(0x2d,0x2c);function _0x322139(_0x2ce9fc){return _0x2ce9fc&&_0x2ce9fc['__esModule']?_0x2ce9fc:{'default':_0x2ce9fc};}const _0x3554a9={'NOANSWER':_0x510a('0x318'),'ANSWERED':_0x510a('0x319'),'TRANSFERED':_0x510a('0x31a')};const _0x3791bb=require(_0x510a('0x79'));_0x3791bb['round']=!![];class Call{constructor(_0x3f3240,_0x408e47,_0xcb4c6a,_0x7a602e,_0x4686cf){this['from']=_0x408e47;this[_0x510a('0x507')]=_0x7a602e;this['to']=_0xcb4c6a;this[_0x510a('0x508')]=_0x4686cf;this['linkedid']=_0x3f3240;this[_0x510a('0x509')]=_0x3554a9[_0x510a('0x318')];this[_0x510a('0x4ac')]=0x0;this[_0x510a('0x485')]=0x0;this[_0x510a('0x349')]={};this[_0x510a('0x50a')]=[];this[_0x510a('0x50b')]=![];this['answer']=null;this[_0x510a('0x50c')]={};this['answeree']=null;this[_0x510a('0x50d')]=![];this[_0x510a('0x50e')]={};this[_0x510a('0x50f')]={};this[_0x510a('0x358')]={};this['isNWayCall']=![];this[_0x510a('0x510')]=[];this[_0x510a('0x511')]=null;}get[_0x510a('0x258')](){return this[_0x510a('0x50d')];}set['outbound'](_0x40ad95){this[_0x510a('0x50d')]=_0x40ad95;}[_0x510a('0x3ba')](_0x3ecf3d,_0x4e0c16){if(!this[_0x510a('0x50e')][_0x3ecf3d]){return![];}return this[_0x510a('0x50e')][_0x3ecf3d][_0x510a('0x22f')](_0x4e0c16)>-0x1;}[_0x510a('0x3bc')](_0x3b8f36,_0x3d70f3){if(!this[_0x510a('0x50e')][_0x3b8f36]){this[_0x510a('0x50e')][_0x3b8f36]=[];}this[_0x510a('0x50e')][_0x3b8f36][_0x510a('0x295')](_0x3d70f3);}[_0x510a('0x3d3')](_0x425d68){if(!this[_0x510a('0x50f')][_0x425d68]){return![];}return this[_0x510a('0x50f')][_0x425d68];}[_0x510a('0x512')](_0x5700a7){if(!this[_0x510a('0x50f')][_0x5700a7]){this['_streamedList'][_0x5700a7]=[];}this[_0x510a('0x50f')][_0x5700a7]=!![];}[_0x510a('0x39a')](_0x2d63e7,_0x3f53da){_0x1741d7[_0x510a('0xd')][_0x510a('0x4a')](_0x510a('0x513')+_0x2d63e7+',\x20'+JSON[_0x510a('0x52')](_0x3f53da)+')');this[_0x510a('0x349')][_0x2d63e7]=new _0x540a67[(_0x510a('0x514'))](_0x2d63e7,_0x3f53da);return this['channels'][_0x2d63e7];}['clearChannel'](_0x88d0ac){if(this[_0x510a('0x515')](_0x88d0ac)){delete this[_0x510a('0x349')][_0x88d0ac];return!![];}else{_0x1741d7[_0x510a('0xd')]['warn']('Trying\x20to\x20delete\x20an\x20untracked\x20channel');return![];}}[_0x510a('0x39f')](_0x1ec8fa){if(_0x1ec8fa){this[_0x510a('0x50b')]=!![];}else{this['dialing']=![];}}[_0x510a('0x3af')](){return this[_0x510a('0x50b')];}['addDialing'](_0x22ff16){if(this[_0x510a('0x50a')]['indexOf'](_0x22ff16)===-0x1){this['dials'][_0x510a('0x295')](_0x22ff16);}}[_0x510a('0x376')](_0x56e4c8){let _0x53d8c4=this[_0x510a('0x50a')][_0x510a('0x22f')](_0x56e4c8);if(_0x53d8c4===-0x1){return;}this['dials']['splice'](_0x53d8c4,0x1);}[_0x510a('0x516')](){this['dials']=[];}['inDialing'](_0x3f2b6b){return this[_0x510a('0x50a')][_0x510a('0x22f')](_0x3f2b6b)>-0x1;}[_0x510a('0x515')](_0x29a8bc){return this['channels'][_0x29a8bc]!==undefined&&this[_0x510a('0x349')][_0x29a8bc]!==null;}[_0x510a('0x365')](_0x9c074f){return this[_0x510a('0x515')](_0x9c074f)?this[_0x510a('0x349')][_0x9c074f]:undefined;}[_0x510a('0x517')](){return Object[_0x510a('0x13b')](this['channels'])[_0x510a('0x13c')];}[_0x510a('0x518')](){return this[_0x510a('0x349')];}[_0x510a('0x371')](_0x2139de){this[_0x510a('0x2de')]=_0x2139de;this[_0x510a('0x519')]=this[_0x510a('0x365')](_0x2139de)['getExten']();}[_0x510a('0x51a')](){return this[_0x510a('0x365')](this[_0x510a('0x2de')]);}[_0x510a('0x3b5')](_0x55c0f5){return this[_0x510a('0x2de')]===_0x55c0f5;}[_0x510a('0x3b7')](){return this[_0x510a('0x2de')]!==null;}[_0x510a('0x373')](){return this[_0x510a('0x519')];}['getToNum'](){return this['to'];}[_0x510a('0x20f')](){return this[_0x510a('0x508')];}[_0x510a('0x372')](_0x3efa4a){this['to']=_0x3efa4a;}[_0x510a('0x382')](_0x1bed2e){this[_0x510a('0x508')]=_0x1bed2e;}[_0x510a('0x3c2')](_0x247ac1){this[_0x510a('0x1e9')]=_0x247ac1;}[_0x510a('0x3a2')](){return this[_0x510a('0x1e9')];}[_0x510a('0x389')](_0x1179cd){this['fromName']=_0x1179cd;}['getFromName'](){return this[_0x510a('0x507')];}[_0x510a('0x3cf')](){return this[_0x510a('0x3b9')]();}[_0x510a('0x3b9')](){return this[_0x510a('0x2c2')];}[_0x510a('0x51b')](_0x43661f){this[_0x510a('0x20d')]=_0x43661f;}[_0x510a('0x51c')](){return this[_0x510a('0x20d')];}[_0x510a('0x51d')](){return this[_0x510a('0x509')];}['getDuration'](){if(this[_0x510a('0x4ac')]&&this[_0x510a('0x4ac')]>0x0){this['processDuration']();return this['duration'];}else{return this['duration'];}}['processDuration'](){if(this[_0x510a('0x4ac')]&&this[_0x510a('0x4ac')]>0x0){this['duration']=_0x3791bb[_0x510a('0xd8')]()-this[_0x510a('0x4ac')];this[_0x510a('0x4ac')]=0x0;}}['hasTimestamp'](){if(this[_0x510a('0x4ac')]&&this[_0x510a('0x4ac')]>0x0){return!![];}else{return![];}}['setTimestamp'](){this['timestamp']=_0x3791bb['now']();}[_0x510a('0x51e')](){this[_0x510a('0x4ac')]=0x0;}[_0x510a('0x51f')](){this[_0x510a('0x509')]=_0x3554a9[_0x510a('0x31a')];}[_0x510a('0x520')](){this[_0x510a('0x509')]=_0x3554a9[_0x510a('0x318')];}[_0x510a('0x39c')](){this['finalState']=_0x3554a9[_0x510a('0x319')];}[_0x510a('0x385')](_0x3cb0b1,_0x5540f3,_0x27e8f6){if(!this[_0x510a('0x50c')][_0x3cb0b1]){this[_0x510a('0x50c')][_0x3cb0b1]={};}this[_0x510a('0x50c')][_0x3cb0b1][_0x5540f3]=_0x27e8f6;}[_0x510a('0x521')](_0x8f90f0,_0x5c5faa){if(!this['zuluVars'][_0x8f90f0]){return undefined;}return this[_0x510a('0x50c')][_0x8f90f0][_0x5c5faa];}['getAllZuluVariables'](_0x2bd475){if(!this[_0x510a('0x50c')][_0x2bd475]){return undefined;}return this[_0x510a('0x50c')][_0x2bd475];}[_0x510a('0x364')](_0x5274f4,_0x2d1fec){this[_0x510a('0x358')][_0x5274f4]=_0x2d1fec;}['getVariable'](_0x4f1dd0){return this[_0x510a('0x358')][_0x4f1dd0];}[_0x510a('0x3c5')](){this[_0x510a('0x2de')]=null;}[_0x510a('0x33c')](_0x567de2,_0xe1a963){this[_0x510a('0x33a')]=!![];this[_0x510a('0x351')]=_0x567de2;this[_0x510a('0x344')]=_0xe1a963;}['addRingingExtension'](_0x16c0a4){if(this[_0x510a('0x510')][_0x510a('0x22f')](_0x16c0a4)===-0x1){this[_0x510a('0x510')][_0x510a('0x295')](_0x16c0a4);}}[_0x510a('0x522')](){return this['ringingExtensions'];}[_0x510a('0x37c')](_0x4b6128){this['answeredApp']=_0x4b6128;}[_0x510a('0x3ce')](){return this['answeredApp'];}}_0x978df6[_0x510a('0x14d')]=Call;return _0x121f55[_0x510a('0x4')];};_0x5e4b0d[0x2d]=function(_0xc6fd0c,_0x477332){'use strict';Object[_0x510a('0x75')](_0x477332,'__esModule',{'value':!![]});const _0x3b5a2f=/(.*)\/(\d*)[@|-]/;class Channel{constructor(_0x52b465,_0x51f6c2){this[_0x510a('0x2c1')]=_0x52b465;this[_0x510a('0x358')]={};this[_0x510a('0x20d')]=_0x51f6c2;}[_0x510a('0x51c')](){return this[_0x510a('0x20d')];}[_0x510a('0x51b')](_0x41f22d){this[_0x510a('0x20d')]=_0x41f22d;}[_0x510a('0x523')](){const _0x3fc72f=this[_0x510a('0x20d')][_0x510a('0x268')]['match'](_0x3b5a2f);return _0x3fc72f&&_0x3fc72f[0x2];}[_0x510a('0x3b0')](){return this[_0x510a('0x38e')](_0x510a('0x35a'))||this[_0x510a('0x523')]();}[_0x510a('0x370')](_0x5389f0){this[_0x510a('0x364')](_0x510a('0x35a'),_0x5389f0);}[_0x510a('0x364')](_0x3db341,_0x3590c9){this['variables'][_0x3db341]=_0x3590c9;}[_0x510a('0x38e')](_0x2b45ac){return this[_0x510a('0x358')][_0x2b45ac];}[_0x510a('0x524')](){return this[_0x510a('0x358')];}}_0x477332[_0x510a('0x514')]=Channel;return _0xc6fd0c[_0x510a('0x4')];};if(typeof module===_0x510a('0x13a'))module['exports']=_0x59c414(0x0);else return _0x59c414(0x0);}());