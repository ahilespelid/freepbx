<module>
	<rawname>adv_recovery</rawname>
	<name>Advanced Recovery</name>
	<version>15.0.53.9</version>
	<publisher>Sangoma Technologies Corporation</publisher>
	<license>Commercial</license>
	<licenselink>https://portal.sangoma.com/marketing/resources/2808/Sangoma%20Corporate/Terms%20of%20Service%20and%20User%20License%20Agreement/FreePBXCommercialModule-EndUserAgreement.txt</licenselink>
	<repo>commercial</repo>
	<commercial>
		<type>paid</type>
		<link>//www.freepbx.org/add-ons/#advanced-recovery</link>
	</commercial>
	<category>Admin</category>
	<description>COMMERCIAL MODULE, REQUIRES A LICENSE. Advanced Recovery makes it easy to setup a warm spare that can easily take over if your primary server fails.</description>
  	<more-info>https://wiki.freepbx.org/display/FPG/Advanced+Recovery</more-info>
	<menuitems>
		<adv_recovery needsenginedb="yes">Advanced Recovery</adv_recovery>
	</menuitems>
	<depends>
		<module>filestore ge 15.0.3.28</module>
		<version>15.0.23</version>
		<module>api ge 15.0.5</module>
		<module>backup ge 15.0.11</module>
		<module>endpoint ge 15.0.43.1</module>
	</depends>
	<supported>
		<version>15.0</version>
	</supported>
	<hooks>
		<sysadmin class="Sysadmin" namespace="FreePBX\modules">
            <method callingMethod="getModuleLicenseInformation" class="Adv_recovery" namespace="FreePBX\modules">sendModuleLicenseInformation</method>
        </sysadmin>
		<dashboard class="Overview" namespace="FreePBX\modules\Dashboard\Sections">
			<method callingMethod="getSummary" class="Adv_recovery" namespace="FreePBX\Modules">dashboardService</method>
		</dashboard>
		<framework class="Chown" namespace="FreePBX\Console\Command">
			<method callingMethod="fwcChownFiles" class="Adv_recovery" namespace="FreePBX\modules">chownFreepbx</method>
		</framework>
		<framework class="Start" namespace="FreePBX\Console\Command">
			<method callingMethod="postAsteriskHooks" class="Adv_recovery" namespace="FreePBX\modules">startFreepbx</method>
		</framework>
		<framework class="Stop" namespace="FreePBX\Console\Command">
			<method callingMethod="postAsteriskHooks" class="Adv_recovery" namespace="FreePBX\modules">stopFreepbx</method>
		</framework>
	  	<Backup class="Backup" namespace="FreePBX\modules">
			<method callingMethod="postrestoreModulehook" class="Adv_recovery" namespace="FreePBX\modules">postrestorehook</method>
		</Backup>
	</hooks>
	<database>
		<table name="adv_recovery_primary_server_settings">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="key" type="string" length="50"/>
			<field name="value" type="string" length="200"/>
		</table>
		<table name="adv_recovery_heartbeat_log">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="timestamp" type="string" length="20"/>
			<field name="from" type="string" length="20"/>
			<field name="to" type="string" length="40"/>
			<field name="response" type="string" length="20"/>
		</table>
		<table name="adv_recovery_backuprestore_log">
			<field name="id" type="integer" autoincrement="true" primaryKey="true"/>
			<field name="timestamp" type="integer"/>
			<field name="type" type="string" length="20"/>
			<field name="filename" type="string" length="100"/>
			<field name="transactionID" type="string" length="40"/>
			<field name="backup_status" type="string" length="50"/>
			<field name="restore_status" type="string" length="50"/>
			<field name="lastupdate" type="string" length="20"/>
			<field name="Emailstatus" type="string" length="10" default="No"/>
			<field name="totaltimetaken" type="string" length="10" default="0"/>
		</table>
		<table name="adv_recovery_notifications_log">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="timestamp" type="integer"/>
			<field name="type" type="string" length="20"/>
			<field name="notification_for" type="string" length="20"/>
			<field name="server" type="string" length="40"/>
			<field name="notified_to" type="string" length="100"/>
			<field name="message" type="string" length="200"/>
			<field name="service_run_id" type="string" length="20"/>
		</table>
		<table name="adv_recovery_serviceswitch_log">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="timestamp" type="integer"/>
			<field name="service_run_id" type="string" length="20"/>
			<field name="server" type="string" length="40"/>
			<field name="activity" type="string" length="10"/>
			<field name="comments" type="string" length="200"/>
		</table>
	</database>
	<changelog>
		*15.0.53.9* FREEI-104 
		*15.0.53.8* FREEI-68 
		*15.0.53.7* FREEI-5858 
		*15.0.53.6* FREEI-5859 
		*15.0.53.5* FREEI-5686 
		*15.0.53.4* FREEI-5668 
		*15.0.53.3* FREEI-5585 
		*15.0.53.2* FREEI-5585 
		*15.0.53.1*  FREEI-5593 AR Restore Errored without any errors in the logs
		*15.0.53* FREEI-5327-Advanced recovery-Post Switchover Hook change to sysadmin hooks 
		*15.0.52* FREEI-4644 added modules include option for advance recovery 
		*15.0.51* FREEI-4898 AR heartbeat error 
		*15.0.50* FREEI-4392 System taken down - firewall not blocking 
		*15.0.49* bump 
		*15.0.48* Allow lazy loading for fwconsole commands
		*15.0.47* FREEI-4383 AR - Showing incorrect active sync status 
		*15.0.46* FREEI-4281 Advanced Recovery emails on failure 
		*15.0.45* FREEI-4115 Adv_recovery issue when secondary unreachable 
		*15.0.44* FREEI-4136 force stop asterisk service in primary when primary database is down 
		*15.0.43* FREEI-4160 Advanced Recovery service stopped with exception 
		*15.0.42* FREEI-3301 corrected empty file attachment in the mail, fixed error in fetching from mail address 
		*15.0.41* FREEI-3854 call recording folder owned by root, not asterisk 
		*15.0.40* FREEI-3409bugix in advanced recovery failback process 
		*15.0.39* FREEI-3673 AR - Copying SIP Settings and certs on sync back 
		*15.0.38* FREEI-3411 improved quick configuration, sync and switchback UIs in advanced recovery module 
		*15.0.37* FREEI-3301 changed mail body of advanced recovery email notifications 
		*15.0.36* FREEI-3691 non-numeric value encountered 
		*15.0.35* FREEI-3548 fixed the issue of showing the wrong syncing process status in primary, if the restore process in secondary fails abruptly 
		*15.0.34* FREEI-3301 changed mail body of advanced recovery email notifications 
		*15.0.33* FREEI-3411 improved quick config, sync and switchback UIs 
		*15.0.32* FREEI-3499 changed code to set primary ip only during quick configuration and not while updating primary server configuration 
		*15.0.31* FREEI-3411 advanced recovery module ui improvements 
		*15.0.1* Initial release of Advanced Recovery module
	</changelog>
	<supported>
		<version>15.0</version>
	</supported>
	<console>
		<command>
			<name>adv_recovery</name>
			<alias>advr</alias>
		</command>
	</console>
</module>