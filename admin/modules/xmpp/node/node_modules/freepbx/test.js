/* jshint node:true, newcap:false */
var FreePBX = new require("./index.js")();

FreePBX.connect().then(function (freepbx) {
	//FreePBX is now ready
	//freepbx.ami == https://github.com/pipobscure/NodeJS-AsteriskManager
	//freepbx.db == https://github.com/mysqljs/mysql
	//freepbx.config == freepbx.config.get("VALUE FROM ADVANCED SETTINGS")
	//freepbx.kvstore == see examples below:

	console.log("FreePBX is ready");
	freepbx.kvstore.setConfig('FreePBX\\modules\\Core','foo',"hello world")
	.then(function(res) {
		freepbx.kvstore.getConfig('FreePBX\\modules\\Core','foo')
		.then(function(val){
			console.log(val);
		}).catch(function(err){
			console.log(err);
		});
	}).catch(function(err) {
		console.log(err);
	});
});
