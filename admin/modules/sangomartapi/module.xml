<module>
	<rawname>sangomartapi</rawname>
	<name>Sangoma Realtime API</name>
	<version>15.0.53.37</version>
	<repo>commercial</repo>
	<description>Sangoma Realtime API - COMMERCIAL MODULE REQUIRES A LICENSE FOR IT TO FUNCTION.  Used by some Phone Apps and SangomaConnect</description>
	<category>Applications</category>
	<publisher>Sangoma Technologies Corporation</publisher>
	<license>Commercial</license>
	<licenselink>https://portal.sangoma.com/marketing/resources/2808/Sangoma%20Corporate/Terms%20of%20Service%20and%20User%20License%20Agreement/FreePBXCommercialModule-EndUserAgreement.txt</licenselink>
	<more-info>https://wiki.freepbx.org/display/FPG/Phone+Apps</more-info>
	<changelog>
		*15.0.53.37* FREEI-390 call waiting is not getting cleared in scd 
		*15.0.53.36* Packaging of ver 15.0.53.36
		*15.0.53.35* Packaging of ver 15.0.53.35
		*15.0.53.34* FREEI-322 
		*15.0.53.33* FREEI-315 set dial peer in queue call state 
		*15.0.53.32* FSDC-349 
		*15.0.53.31* Packaging of ver 15.0.53.31
		*15.0.53.30* FREEI-266 
		*15.0.53.29* FREEI-265 
		*15.0.53.28* FREEI-255 asterisk manager showing large number of connections 
		*15.0.53.27* FREEI-115 
		*15.0.53.26* FREEI-115 
		*15.0.53.25* FREEI-188 
		*15.0.53.24* STALK-534 
		*15.0.53.23* STALK-534 
		*15.0.53.22* FREEI-115 FMFM Api modification and FREEI-166 
		*15.0.53.21* Packaging of ver 15.0.53.21
		*15.0.53.20* FREEI-115 Find Me Follow Me API for P Phones 
		*15.0.53.19* FREEI-137 
		*15.0.53.18* FREEI-130 
		*15.0.53.17* FREEI-93 and FREEI-127 
		*15.0.53.16* FREEI-107 
		*15.0.53.15* FREEI-107 
		*15.0.53.14* FREEI-103 
		*15.0.53.13* FREEI-99 
		*15.0.53.12* FREEI-90 and FREEI-92 
		*15.0.53.11* FREEI-96 and FREEI-91 
		*15.0.53.10* Packaging of ver 15.0.53.10
		*15.0.53.9* FREEI-23 Adding logs support 
		*15.0.53.8* Packaging of ver 15.0.53.8
		*15.0.53.7* FREEI-23 
		*15.0.53.6* Packaging of ver 15.0.53.6
		*15.0.53.5* Packaging of ver 15.0.53.5
		*15.0.53.4* FSDC-343 , FREEI-34 and FREEI-10 
		*15.0.53.3* FREEI-10 
		*15.0.53.2* FREEI-5884 
		*15.0.53.1* FREEI-5869 , FREEI-5875 and FREEI-5865 
		*15.0.53* Packaging of ver 15.0.53
		*15.0.52* FREEI-5771 and FREEI-5707 
		*15.0.51* FREEI-5745, FREEI-5692, FREEI-5766 and FREEI-5765
		*15.0.50.14* Packaging of ver 15.0.50.14
		*15.0.50.13* FREEI-5703 and FREEI-5690 
		*15.0.50.12* Packaging of ver 15.0.50.12
		*15.0.50.11* FREEI-5740 
		*15.0.50.10* Packaging of ver 15.0.50.10
		*15.0.50.9* Packaging of ver 15.0.50.9
		*15.0.50.8* Packaging of ver 15.0.50.8
		*15.0.50.7* Packaging of ver 15.0.50.7
		*15.0.50.6* Packaging of ver 15.0.50.6
		*15.0.50.5* Packaging of ver 15.0.50.5
		*15.0.50.4* Packaging of ver 15.0.50.4
		*15.0.50.3* FREEI-5592 
		*15.0.50.2* Packaging of ver 15.0.50.2
		*15.0.50.1* bump 
		*15.0.50* Packaging of ver 15.0.50
		*15.0.49*  Adding support for mobile chat app
		*15.0.48.5* FREEPBX-23814 Error updating user info in user manager 
		*15.0.48.4* SCD-346 
		*15.0.48.3* FREEI-5350 Presence State fix for single digit extensions 
		*15.0.48.2* Packaging of ver 15.0.48.2
		*15.0.48.1* SCD-316 and SCD-320 
		*15.0.48* Packaging of ver 15.0.48
		*15.0.47* Packaging of ver 15.0.47
		*15.0.46* SCD-296, SCD-299 , SCD-318 and SCD-330 
		*15.0.45* FREEI-5077, SCD-310 
		*15.0.44* Packaging of ver 15.0.44
		*15.0.43* SCD-305 and SCD-253 
		*15.0.42* SCD-295 Dphone api methods to enable rapid dial list 
		*15.0.41* SCD-286 and SCD-297 
		*15.0.40* SCD-291 
		*15.0.39* SCD-284 
		*15.0.38* SCD-289: Call Recording and SCD-286 Call Pop Ups features to Sangoma Phone desktop clients 
		*15.0.37* SCD-272 adding call parking functionality 
		*15.0.36* SCD-283 
		*15.0.35* SCD-281 reload SMS DID info when changes are made to Users, and Apply Config is pressed
		*15.0.34* Packaging of ver 15.0.34
		*15.0.33*   SCD-254 Add SMS functionality to Chat
		*15.0.32.11* FREEI-4901 fixed issue with conference 
		*15.0.32.10* Packaging of ver 15.0.32.10
		*15.0.32.9* Packaging of ver 15.0.32.9
		*15.0.32.8* SCD-246 
		*15.0.32.7* SCD-258 
		*15.0.32.6* SCD-247 
		*15.0.32.5* SCD-257 
		*15.0.32.4* adding restapps dependency 
		*15.0.32.3* SCD-240 Call Merge functionality 
		*15.0.32.2* Packaging of ver 15.0.32.2
		*15.0.32.1* bump 
		*15.0.32* SCD-107 added code to emit reloadCallLog event when asterisk cdr event is received 
		*15.0.31* SCD-228 and SCD-190 
		*15.0.30* SCD-204 
		*15.0.29* FREEI-4557 
		*15.0.28* Packaging of ver 15.0.28
		*15.0.27* SCD-193 SCD is not writting any logs after logrotation untill you restart the sangomartapi service 
		*15.0.26* SCD-192 /etc/logrotate.d/sangomartapi" file not setting proper file permission on logrotation. 
		*15.0.25* SCD-189:  Disable BLF/Presence indicators on favorites, for now 
		*15.0.24* SCD-183: set reloadCallLogs featureflag to false 
		*15.0.23* SCD-156: include the address of the requester in the logged message on login failures due to bad credentials 
		*15.0.22* SCD-104 set favorite flag to true inorder to enable favorite contacts in SCD client 
		*15.0.21* SCD-149:  Update featureflags auth['extension.alert'] to be an object with specific reloads, instead of a global 'true' 
		*15.0.20* Packaging of ver 15.0.20
		*15.0.19* SCD-128 modified the error message 
		*15.0.18* SCD-96 
		*15.0.17* SCD-96, SCD-97 and SCD-99 
		*15.0.16* Packaging of ver 15.0.16
		*15.0.15* SCD-85 
		*15.0.14* SCD-85 sangomartapi-logger.conf conf file location changed 
		*15.0.13* SCD-77:  force a response for switchvox.users.callLogs.setLastViewed 
		*15.0.12* SCD-62: modifying the error message that posts when logging in with bad credentials 
		*15.0.11* SCD-48: add the sangomartapi_registry table to the database during module install 
		*15.0.10* Packaging of ver 15.0.10
		*15.0.9* Packaging of ver 15.0.9
		*15.0.8* Packaging of ver 15.0.8
		*15.0.7* initial desktop checkin 
		*15.0.6* Fixing FREEPBX-22757 Permission issue 
		*15.0.5* FREEI-3641: stop muting self when Mute Others is pressed 
		*15.0.4* FREEI-3614 
		*15.0.3* FREEI-3600, FREEI-3602 and FREEI-3601 
		*15.0.2* FREEI-3556: stop relying on the channel's accountcode for conference app 
		*15.0.0* Initial release
	</changelog>
	<depends>
		<version>15.0.17.37</version>
		<phpversion>5.3.0</phpversion>
		<phpcomponent>Zend Guard Loader</phpcomponent>
		<module>conferences ge 15.0.7.11</module>
		<module>manager ge 15.0.20</module>
		<module>contactmanager ge 15.0.9.6</module>
		<module>restapps ge 15.0.40.3</module>
		<module>sysadmin ge 15.0.29.19</module>
		<module>userman ge 15.0.69.14</module>
		<module>webrtc ge 15.0.10.8</module>
		<module>queues ge 15.0.36</module>
	</depends>
	<database>
		<!--Chat related database changes should be done in SangomartapiChatDb.class.php-->

		<table name="restapps_rtapi_conferences">
			<field name="conferenceNumber" type="string" length="80"/>
			<field name="userman_id" type="integer"/>
			<key name="conference_user" type="unique">
				<column name="conferenceNumber"/>
				<column name="userman_id"/>
			</key>
		</table>
		<table name="sangomartapi_registry">
			<field name="key" type="string" length="64"/>
			<field name="value" type="string" length="1024"/>
			<key name="sangomartapi_registry_pkey" type="unique">
				<column name="key"/>
			</key>
		</table>
		<table name="sangomartapi_login_register">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="uid" type="integer" notnull="false"/>
			<field name="session_id" type="string" length="64" default="none"/>
			<field name="default_extension" type="string" length="45" default="none"/>
			<field name="login_time" type="datetime" notnull="true"/>
		</table>
		<table name="chat_push_tokens">
			<field name="account_id" type="string" length="10"/>
			<field name="app_instance_id" type="string" length="100"/>
			<field name="push_type" type="string" length="20"/>
			<field name="notify_token" type="text"/>
			<field name="push_cert_id" type="integer"/>
			<field name="rooms_supported" type="string" length="10"/>
			<field name="voicemail_badge" type="string" length="10"/>
			<field name="voicemail_details" type="string" length="10"/>
			<field name="missed_badge" type="string" length="10"/>
			<field name="missed_details" type="string" length="10"/>
			<key name="idx" type="unique">
				<column name="account_id"/>
				<column name="app_instance_id"/>
			</key>
		</table>
		<table name="sangomartapi_call_queue_members">
			<field name="call_queue_member_id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="person_account_id" type="integer" notnull="false"/>
			<field name="call_queue_account_id" type="integer" notnull="false"/>
			<field name="queue_position" type="integer" default="1" notnull="false"/>
			<field name="member_type" type="integer" default="1" notnull="false"/>
			<field name="queue_name" type="string" length="128"/>
			<field name="interface" type="string" length="128"/>
			<field name="penalty" type="integer" default="0"/>
			<field name="loggedin" type="integer" default="-1"/>
			<field name="location" type="string" length="30"/>
			<field name="multiple_calls" type="boolean" default="0"/>
			<field name="pause_until" type="integer" length="30" default="0"/>
			<field name="login_time" type="datetime" notnull="false"/>
			<field name="missed_calls_allowed" type="integer" default="-1" notnull="false"/>
			<field name="paused_since" type="integer" length="30" default="0" notnull="false"/>
			<field name="tier" type="integer" default="1" notnull="false"/>
		</table>
	</database>
	<hooks>
		<framework class="Chown" namespace="FreePBX\Console\Command">
			<method callingMethod="fwcChownFiles" class="Sangomartapi" namespace="FreePBX\Modules">chownFreepbx</method>
		</framework>
		<framework class="Reload" namespace="FreePBX">
			<method callingMethod="postReload" class="Sangomartapi" namespace="FreePBX\Modules">postReloadFreepbx</method>
		</framework>
		<framework class="Start" namespace="FreePBX\Console\Command">
			<method callingMethod="postAsteriskHooks" class="Sangomartapi">startFreepbx</method>
		</framework>
		<framework class="Stop" namespace="FreePBX\Console\Command">
			<method callingMethod="preAsteriskHooks" class="Sangomartapi">stopFreepbx</method>
		</framework>
		<userman class="Userman" namespace="FreePBX\modules">
	 		<method callingMethod="delUser" class="Sangomartapi" namespace="FreePBX\modules">usermanDelUser</method>
	 		<method callingMethod="addUser" class="Sangomartapi" namespace="FreePBX\modules">usermanSaveUser</method>
	 		<method callingMethod="updateUser" class="Sangomartapi" namespace="FreePBX\modules">usermanUpdateUser</method>
		</userman>
	</hooks>
	<supported>
		<version>15.0</version>
	</supported>
</module>